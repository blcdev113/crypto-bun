(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function F0(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var i=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return s[n]}})}),t}var Df={exports:{}},Uo={},Af={exports:{}},F={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=Symbol.for("react.element"),B0=Symbol.for("react.portal"),W0=Symbol.for("react.fragment"),V0=Symbol.for("react.strict_mode"),H0=Symbol.for("react.profiler"),K0=Symbol.for("react.provider"),q0=Symbol.for("react.context"),X0=Symbol.for("react.forward_ref"),G0=Symbol.for("react.suspense"),Q0=Symbol.for("react.memo"),J0=Symbol.for("react.lazy"),oh=Symbol.iterator;function Y0(s){return s===null||typeof s!="object"?null:(s=oh&&s[oh]||s["@@iterator"],typeof s=="function"?s:null)}var If={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uf=Object.assign,Ff={};function An(s,e,t){this.props=s,this.context=e,this.refs=Ff,this.updater=t||If}An.prototype.isReactComponent={};An.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};An.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function Bf(){}Bf.prototype=An.prototype;function Ou(s,e,t){this.props=s,this.context=e,this.refs=Ff,this.updater=t||If}var Du=Ou.prototype=new Bf;Du.constructor=Ou;Uf(Du,An.prototype);Du.isPureReactComponent=!0;var lh=Array.isArray,Wf=Object.prototype.hasOwnProperty,Au={current:null},Vf={key:!0,ref:!0,__self:!0,__source:!0};function Hf(s,e,t){var n,i={},r=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Wf.call(e,n)&&!Vf.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(s&&s.defaultProps)for(n in a=s.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Ji,type:s,key:r,ref:o,props:i,_owner:Au.current}}function Z0(s,e){return{$$typeof:Ji,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function Iu(s){return typeof s=="object"&&s!==null&&s.$$typeof===Ji}function ev(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(t){return e[t]})}var ah=/\/+/g;function bl(s,e){return typeof s=="object"&&s!==null&&s.key!=null?ev(""+s.key):e.toString(36)}function Kr(s,e,t,n,i){var r=typeof s;(r==="undefined"||r==="boolean")&&(s=null);var o=!1;if(s===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(s.$$typeof){case Ji:case B0:o=!0}}if(o)return o=s,i=i(o),s=n===""?"."+bl(o,0):n,lh(i)?(t="",s!=null&&(t=s.replace(ah,"$&/")+"/"),Kr(i,e,t,"",function(u){return u})):i!=null&&(Iu(i)&&(i=Z0(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ah,"$&/")+"/")+s)),e.push(i)),1;if(o=0,n=n===""?".":n+":",lh(s))for(var a=0;a<s.length;a++){r=s[a];var l=n+bl(r,a);o+=Kr(r,e,t,l,i)}else if(l=Y0(s),typeof l=="function")for(s=l.call(s),a=0;!(r=s.next()).done;)r=r.value,l=n+bl(r,a++),o+=Kr(r,e,t,l,i);else if(r==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function pr(s,e,t){if(s==null)return s;var n=[],i=0;return Kr(s,n,"","",function(r){return e.call(t,r,i++)}),n}function tv(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(t){(s._status===0||s._status===-1)&&(s._status=1,s._result=t)},function(t){(s._status===0||s._status===-1)&&(s._status=2,s._result=t)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var Le={current:null},qr={transition:null},sv={ReactCurrentDispatcher:Le,ReactCurrentBatchConfig:qr,ReactCurrentOwner:Au};function Kf(){throw Error("act(...) is not supported in production builds of React.")}F.Children={map:pr,forEach:function(s,e,t){pr(s,function(){e.apply(this,arguments)},t)},count:function(s){var e=0;return pr(s,function(){e++}),e},toArray:function(s){return pr(s,function(e){return e})||[]},only:function(s){if(!Iu(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};F.Component=An;F.Fragment=W0;F.Profiler=H0;F.PureComponent=Ou;F.StrictMode=V0;F.Suspense=G0;F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sv;F.act=Kf;F.cloneElement=function(s,e,t){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var n=Uf({},s.props),i=s.key,r=s.ref,o=s._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Au.current),e.key!==void 0&&(i=""+e.key),s.type&&s.type.defaultProps)var a=s.type.defaultProps;for(l in e)Wf.call(e,l)&&!Vf.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Ji,type:s.type,key:i,ref:r,props:n,_owner:o}};F.createContext=function(s){return s={$$typeof:q0,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:K0,_context:s},s.Consumer=s};F.createElement=Hf;F.createFactory=function(s){var e=Hf.bind(null,s);return e.type=s,e};F.createRef=function(){return{current:null}};F.forwardRef=function(s){return{$$typeof:X0,render:s}};F.isValidElement=Iu;F.lazy=function(s){return{$$typeof:J0,_payload:{_status:-1,_result:s},_init:tv}};F.memo=function(s,e){return{$$typeof:Q0,type:s,compare:e===void 0?null:e}};F.startTransition=function(s){var e=qr.transition;qr.transition={};try{s()}finally{qr.transition=e}};F.unstable_act=Kf;F.useCallback=function(s,e){return Le.current.useCallback(s,e)};F.useContext=function(s){return Le.current.useContext(s)};F.useDebugValue=function(){};F.useDeferredValue=function(s){return Le.current.useDeferredValue(s)};F.useEffect=function(s,e){return Le.current.useEffect(s,e)};F.useId=function(){return Le.current.useId()};F.useImperativeHandle=function(s,e,t){return Le.current.useImperativeHandle(s,e,t)};F.useInsertionEffect=function(s,e){return Le.current.useInsertionEffect(s,e)};F.useLayoutEffect=function(s,e){return Le.current.useLayoutEffect(s,e)};F.useMemo=function(s,e){return Le.current.useMemo(s,e)};F.useReducer=function(s,e,t){return Le.current.useReducer(s,e,t)};F.useRef=function(s){return Le.current.useRef(s)};F.useState=function(s){return Le.current.useState(s)};F.useSyncExternalStore=function(s,e,t){return Le.current.useSyncExternalStore(s,e,t)};F.useTransition=function(){return Le.current.useTransition()};F.version="18.3.1";Af.exports=F;var _=Af.exports;const fe=U0(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv=_,iv=Symbol.for("react.element"),rv=Symbol.for("react.fragment"),ov=Object.prototype.hasOwnProperty,lv=nv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,av={key:!0,ref:!0,__self:!0,__source:!0};function qf(s,e,t){var n,i={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ov.call(e,n)&&!av.hasOwnProperty(n)&&(i[n]=e[n]);if(s&&s.defaultProps)for(n in e=s.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:iv,type:s,key:r,ref:o,props:i,_owner:lv.current}}Uo.Fragment=rv;Uo.jsx=qf;Uo.jsxs=qf;Df.exports=Uo;var h=Df.exports,Xf={exports:{}},Xe={},Gf={exports:{}},Qf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(P,L){var D=P.length;P.push(L);e:for(;0<D;){var q=D-1>>>1,se=P[q];if(0<i(se,L))P[q]=L,P[D]=se,D=q;else break e}}function t(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var L=P[0],D=P.pop();if(D!==L){P[0]=D;e:for(var q=0,se=P.length,Pt=se>>>1;q<Pt;){var ot=2*(q+1)-1,Xt=P[ot],Je=ot+1,B=P[Je];if(0>i(Xt,D))Je<se&&0>i(B,Xt)?(P[q]=B,P[Je]=D,q=Je):(P[q]=Xt,P[ot]=D,q=ot);else if(Je<se&&0>i(B,D))P[q]=B,P[Je]=D,q=Je;else break e}}return L}function i(P,L){var D=P.sortIndex-L.sortIndex;return D!==0?D:P.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;s.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();s.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,v=!1,p=!1,m=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var L=t(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=P)n(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=t(u)}}function b(P){if(m=!1,y(P),!p)if(t(l)!==null)p=!0,Q(S);else{var L=t(u);L!==null&&Qe(b,L.startTime-P)}}function S(P,L){p=!1,m&&(m=!1,g(C),C=-1),v=!0;var D=f;try{for(y(L),d=t(l);d!==null&&(!(d.expirationTime>L)||P&&!I());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var se=q(d.expirationTime<=L);L=s.unstable_now(),typeof se=="function"?d.callback=se:d===t(l)&&n(l),y(L)}else n(l);d=t(l)}if(d!==null)var Pt=!0;else{var ot=t(u);ot!==null&&Qe(b,ot.startTime-L),Pt=!1}return Pt}finally{d=null,f=D,v=!1}}var k=!1,E=null,C=-1,$=5,M=-1;function I(){return!(s.unstable_now()-M<$)}function z(){if(E!==null){var P=s.unstable_now();M=P;var L=!0;try{L=E(!0,P)}finally{L?O():(k=!1,E=null)}}else k=!1}var O;if(typeof w=="function")O=function(){w(z)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,G=H.port2;H.port1.onmessage=z,O=function(){G.postMessage(null)}}else O=function(){x(z,0)};function Q(P){E=P,k||(k=!0,O())}function Qe(P,L){C=x(function(){P(s.unstable_now())},L)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(P){P.callback=null},s.unstable_continueExecution=function(){p||v||(p=!0,Q(S))},s.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<P?Math.floor(1e3/P):5},s.unstable_getCurrentPriorityLevel=function(){return f},s.unstable_getFirstCallbackNode=function(){return t(l)},s.unstable_next=function(P){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var D=f;f=L;try{return P()}finally{f=D}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(P,L){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var D=f;f=P;try{return L()}finally{f=D}},s.unstable_scheduleCallback=function(P,L,D){var q=s.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?q+D:q):D=q,P){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=D+se,P={id:c++,callback:L,priorityLevel:P,startTime:D,expirationTime:se,sortIndex:-1},D>q?(P.sortIndex=D,e(u,P),t(l)===null&&P===t(u)&&(m?(g(C),C=-1):m=!0,Qe(b,D-q))):(P.sortIndex=se,e(l,P),p||v||(p=!0,Q(S))),P},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(P){var L=f;return function(){var D=f;f=L;try{return P.apply(this,arguments)}finally{f=D}}}})(Qf);Gf.exports=Qf;var uv=Gf.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=_,qe=uv;function N(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jf=new Set,Ci={};function Vs(s,e){jn(s,e),jn(s+"Capture",e)}function jn(s,e){for(Ci[s]=e,s=0;s<e.length;s++)Jf.add(e[s])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=Object.prototype.hasOwnProperty,hv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uh={},ch={};function dv(s){return ba.call(ch,s)?!0:ba.call(uh,s)?!1:hv.test(s)?ch[s]=!0:(uh[s]=!0,!1)}function fv(s,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function pv(s,e,t,n){if(e===null||typeof e>"u"||fv(s,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ze(s,e,t,n,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=s,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ee[s]=new ze(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];Ee[e]=new ze(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ee[s]=new ze(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ee[s]=new ze(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ee[s]=new ze(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Ee[s]=new ze(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Ee[s]=new ze(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Ee[s]=new ze(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Ee[s]=new ze(s,5,!1,s.toLowerCase(),null,!1,!1)});var Uu=/[\-:]([a-z])/g;function Fu(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(Uu,Fu);Ee[e]=new ze(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(Uu,Fu);Ee[e]=new ze(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(Uu,Fu);Ee[e]=new ze(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Ee[s]=new ze(s,1,!1,s.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Ee[s]=new ze(s,1,!1,s.toLowerCase(),null,!0,!0)});function Bu(s,e,t,n){var i=Ee.hasOwnProperty(e)?Ee[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pv(e,t,i,n)&&(t=null),n||i===null?dv(e)&&(t===null?s.removeAttribute(e):s.setAttribute(e,""+t)):i.mustUseProperty?s[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?s.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?s.setAttributeNS(n,e,t):s.setAttribute(e,t))))}var Kt=cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mr=Symbol.for("react.element"),rn=Symbol.for("react.portal"),on=Symbol.for("react.fragment"),Wu=Symbol.for("react.strict_mode"),_a=Symbol.for("react.profiler"),Yf=Symbol.for("react.provider"),Zf=Symbol.for("react.context"),Vu=Symbol.for("react.forward_ref"),Sa=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Hu=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),ep=Symbol.for("react.offscreen"),hh=Symbol.iterator;function Kn(s){return s===null||typeof s!="object"?null:(s=hh&&s[hh]||s["@@iterator"],typeof s=="function"?s:null)}var ae=Object.assign,_l;function ri(s){if(_l===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);_l=e&&e[1]||""}return`
`+_l+s}var Sl=!1;function kl(s,e){if(!s||Sl)return"";Sl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(s,[],e)}else{try{e.call()}catch(u){n=u}s.call(e.prototype)}else{try{throw Error()}catch(u){n=u}s()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=n.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var l=`
`+i[o].replace(" at new "," at ");return s.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",s.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sl=!1,Error.prepareStackTrace=t}return(s=s?s.displayName||s.name:"")?ri(s):""}function mv(s){switch(s.tag){case 5:return ri(s.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 2:case 15:return s=kl(s.type,!1),s;case 11:return s=kl(s.type.render,!1),s;case 1:return s=kl(s.type,!0),s;default:return""}}function Ea(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case on:return"Fragment";case rn:return"Portal";case _a:return"Profiler";case Wu:return"StrictMode";case Sa:return"Suspense";case ka:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Zf:return(s.displayName||"Context")+".Consumer";case Yf:return(s._context.displayName||"Context")+".Provider";case Vu:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Hu:return e=s.displayName||null,e!==null?e:Ea(s.type)||"Memo";case Zt:e=s._payload,s=s._init;try{return Ea(s(e))}catch{}}return null}function gv(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ea(e);case 8:return e===Wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ps(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function tp(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vv(s){var e=tp(s)?"checked":"value",t=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),n=""+s[e];if(!s.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,r=t.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(s,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function gr(s){s._valueTracker||(s._valueTracker=vv(s))}function sp(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return s&&(n=tp(s)?s.checked?"true":"false":s.value),s=n,s!==t?(e.setValue(s),!0):!1}function ao(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ca(s,e){var t=e.checked;return ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??s._wrapperState.initialChecked})}function dh(s,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=ps(e.value!=null?e.value:t),s._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function np(s,e){e=e.checked,e!=null&&Bu(s,"checked",e,!1)}function ja(s,e){np(s,e);var t=ps(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&s.value===""||s.value!=t)&&(s.value=""+t):s.value!==""+t&&(s.value=""+t);else if(n==="submit"||n==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?Na(s,e.type,t):e.hasOwnProperty("defaultValue")&&Na(s,e.type,ps(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function fh(s,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,t||e===s.value||(s.value=e),s.defaultValue=e}t=s.name,t!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,t!==""&&(s.name=t)}function Na(s,e,t){(e!=="number"||ao(s.ownerDocument)!==s)&&(t==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+t&&(s.defaultValue=""+t))}var oi=Array.isArray;function xn(s,e,t,n){if(s=s.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<s.length;t++)i=e.hasOwnProperty("$"+s[t].value),s[t].selected!==i&&(s[t].selected=i),i&&n&&(s[t].defaultSelected=!0)}else{for(t=""+ps(t),e=null,i=0;i<s.length;i++){if(s[i].value===t){s[i].selected=!0,n&&(s[i].defaultSelected=!0);return}e!==null||s[i].disabled||(e=s[i])}e!==null&&(e.selected=!0)}}function Ta(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return ae({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ph(s,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(N(92));if(oi(t)){if(1<t.length)throw Error(N(93));t=t[0]}e=t}e==null&&(e=""),t=e}s._wrapperState={initialValue:ps(t)}}function ip(s,e){var t=ps(e.value),n=ps(e.defaultValue);t!=null&&(t=""+t,t!==s.value&&(s.value=t),e.defaultValue==null&&s.defaultValue!==t&&(s.defaultValue=t)),n!=null&&(s.defaultValue=""+n)}function mh(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function rp(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pa(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?rp(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var vr,op=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return s(e,t,n,i)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(vr=vr||document.createElement("div"),vr.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ji(s,e){if(e){var t=s.firstChild;if(t&&t===s.lastChild&&t.nodeType===3){t.nodeValue=e;return}}s.textContent=e}var ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yv=["Webkit","ms","Moz","O"];Object.keys(ci).forEach(function(s){yv.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),ci[e]=ci[s]})});function lp(s,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ci.hasOwnProperty(s)&&ci[s]?(""+e).trim():e+"px"}function ap(s,e){s=s.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=lp(t,e[t],n);t==="float"&&(t="cssFloat"),n?s.setProperty(t,i):s[t]=i}}var wv=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ma(s,e){if(e){if(wv[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function Ra(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $a=null;function Ku(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var La=null,bn=null,_n=null;function gh(s){if(s=er(s)){if(typeof La!="function")throw Error(N(280));var e=s.stateNode;e&&(e=Ho(e),La(s.stateNode,s.type,e))}}function up(s){bn?_n?_n.push(s):_n=[s]:bn=s}function cp(){if(bn){var s=bn,e=_n;if(_n=bn=null,gh(s),e)for(s=0;s<e.length;s++)gh(e[s])}}function hp(s,e){return s(e)}function dp(){}var El=!1;function fp(s,e,t){if(El)return s(e,t);El=!0;try{return hp(s,e,t)}finally{El=!1,(bn!==null||_n!==null)&&(dp(),cp())}}function Ni(s,e){var t=s.stateNode;if(t===null)return null;var n=Ho(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(s=s.type,n=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!n;break e;default:s=!1}if(s)return null;if(t&&typeof t!="function")throw Error(N(231,e,typeof t));return t}var za=!1;if(Ft)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){za=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{za=!1}function xv(s,e,t,n,i,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var hi=!1,uo=null,co=!1,Oa=null,bv={onError:function(s){hi=!0,uo=s}};function _v(s,e,t,n,i,r,o,a,l){hi=!1,uo=null,xv.apply(bv,arguments)}function Sv(s,e,t,n,i,r,o,a,l){if(_v.apply(this,arguments),hi){if(hi){var u=uo;hi=!1,uo=null}else throw Error(N(198));co||(co=!0,Oa=u)}}function Hs(s){var e=s,t=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(t=e.return),s=e.return;while(s)}return e.tag===3?t:null}function pp(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function vh(s){if(Hs(s)!==s)throw Error(N(188))}function kv(s){var e=s.alternate;if(!e){if(e=Hs(s),e===null)throw Error(N(188));return e!==s?null:s}for(var t=s,n=e;;){var i=t.return;if(i===null)break;var r=i.alternate;if(r===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===t)return vh(i),s;if(r===n)return vh(i),e;r=r.sibling}throw Error(N(188))}if(t.return!==n.return)t=i,n=r;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,n=r;break}if(a===n){o=!0,n=i,t=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===t){o=!0,t=r,n=i;break}if(a===n){o=!0,n=r,t=i;break}a=a.sibling}if(!o)throw Error(N(189))}}if(t.alternate!==n)throw Error(N(190))}if(t.tag!==3)throw Error(N(188));return t.stateNode.current===t?s:e}function mp(s){return s=kv(s),s!==null?gp(s):null}function gp(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=gp(s);if(e!==null)return e;s=s.sibling}return null}var vp=qe.unstable_scheduleCallback,yh=qe.unstable_cancelCallback,Ev=qe.unstable_shouldYield,Cv=qe.unstable_requestPaint,he=qe.unstable_now,jv=qe.unstable_getCurrentPriorityLevel,qu=qe.unstable_ImmediatePriority,yp=qe.unstable_UserBlockingPriority,ho=qe.unstable_NormalPriority,Nv=qe.unstable_LowPriority,wp=qe.unstable_IdlePriority,Fo=null,Ct=null;function Tv(s){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(Fo,s,void 0,(s.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:Rv,Pv=Math.log,Mv=Math.LN2;function Rv(s){return s>>>=0,s===0?32:31-(Pv(s)/Mv|0)|0}var yr=64,wr=4194304;function li(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function fo(s,e){var t=s.pendingLanes;if(t===0)return 0;var n=0,i=s.suspendedLanes,r=s.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?n=li(a):(r&=o,r!==0&&(n=li(r)))}else o=t&~i,o!==0?n=li(o):r!==0&&(n=li(r));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(n&4&&(n|=t&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=n;0<e;)t=31-ft(e),i=1<<t,n|=s[t],e&=~i;return n}function $v(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lv(s,e){for(var t=s.suspendedLanes,n=s.pingedLanes,i=s.expirationTimes,r=s.pendingLanes;0<r;){var o=31-ft(r),a=1<<o,l=i[o];l===-1?(!(a&t)||a&n)&&(i[o]=$v(a,e)):l<=e&&(s.expiredLanes|=a),r&=~a}}function Da(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function xp(){var s=yr;return yr<<=1,!(yr&4194240)&&(yr=64),s}function Cl(s){for(var e=[],t=0;31>t;t++)e.push(s);return e}function Yi(s,e,t){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-ft(e),s[e]=t}function zv(s,e){var t=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var n=s.eventTimes;for(s=s.expirationTimes;0<t;){var i=31-ft(t),r=1<<i;e[i]=0,n[i]=-1,s[i]=-1,t&=~r}}function Xu(s,e){var t=s.entangledLanes|=e;for(s=s.entanglements;t;){var n=31-ft(t),i=1<<n;i&e|s[n]&e&&(s[n]|=e),t&=~i}}var X=0;function bp(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var _p,Gu,Sp,kp,Ep,Aa=!1,xr=[],os=null,ls=null,as=null,Ti=new Map,Pi=new Map,ts=[],Ov="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wh(s,e){switch(s){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Ti.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pi.delete(e.pointerId)}}function Xn(s,e,t,n,i,r){return s===null||s.nativeEvent!==r?(s={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:r,targetContainers:[i]},e!==null&&(e=er(e),e!==null&&Gu(e)),s):(s.eventSystemFlags|=n,e=s.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),s)}function Dv(s,e,t,n,i){switch(e){case"focusin":return os=Xn(os,s,e,t,n,i),!0;case"dragenter":return ls=Xn(ls,s,e,t,n,i),!0;case"mouseover":return as=Xn(as,s,e,t,n,i),!0;case"pointerover":var r=i.pointerId;return Ti.set(r,Xn(Ti.get(r)||null,s,e,t,n,i)),!0;case"gotpointercapture":return r=i.pointerId,Pi.set(r,Xn(Pi.get(r)||null,s,e,t,n,i)),!0}return!1}function Cp(s){var e=Ns(s.target);if(e!==null){var t=Hs(e);if(t!==null){if(e=t.tag,e===13){if(e=pp(t),e!==null){s.blockedOn=e,Ep(s.priority,function(){Sp(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){s.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xr(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var t=Ia(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(t===null){t=s.nativeEvent;var n=new t.constructor(t.type,t);$a=n,t.target.dispatchEvent(n),$a=null}else return e=er(t),e!==null&&Gu(e),s.blockedOn=t,!1;e.shift()}return!0}function xh(s,e,t){Xr(s)&&t.delete(e)}function Av(){Aa=!1,os!==null&&Xr(os)&&(os=null),ls!==null&&Xr(ls)&&(ls=null),as!==null&&Xr(as)&&(as=null),Ti.forEach(xh),Pi.forEach(xh)}function Gn(s,e){s.blockedOn===e&&(s.blockedOn=null,Aa||(Aa=!0,qe.unstable_scheduleCallback(qe.unstable_NormalPriority,Av)))}function Mi(s){function e(i){return Gn(i,s)}if(0<xr.length){Gn(xr[0],s);for(var t=1;t<xr.length;t++){var n=xr[t];n.blockedOn===s&&(n.blockedOn=null)}}for(os!==null&&Gn(os,s),ls!==null&&Gn(ls,s),as!==null&&Gn(as,s),Ti.forEach(e),Pi.forEach(e),t=0;t<ts.length;t++)n=ts[t],n.blockedOn===s&&(n.blockedOn=null);for(;0<ts.length&&(t=ts[0],t.blockedOn===null);)Cp(t),t.blockedOn===null&&ts.shift()}var Sn=Kt.ReactCurrentBatchConfig,po=!0;function Iv(s,e,t,n){var i=X,r=Sn.transition;Sn.transition=null;try{X=1,Qu(s,e,t,n)}finally{X=i,Sn.transition=r}}function Uv(s,e,t,n){var i=X,r=Sn.transition;Sn.transition=null;try{X=4,Qu(s,e,t,n)}finally{X=i,Sn.transition=r}}function Qu(s,e,t,n){if(po){var i=Ia(s,e,t,n);if(i===null)Ol(s,e,n,mo,t),wh(s,n);else if(Dv(i,s,e,t,n))n.stopPropagation();else if(wh(s,n),e&4&&-1<Ov.indexOf(s)){for(;i!==null;){var r=er(i);if(r!==null&&_p(r),r=Ia(s,e,t,n),r===null&&Ol(s,e,n,mo,t),r===i)break;i=r}i!==null&&n.stopPropagation()}else Ol(s,e,n,null,t)}}var mo=null;function Ia(s,e,t,n){if(mo=null,s=Ku(n),s=Ns(s),s!==null)if(e=Hs(s),e===null)s=null;else if(t=e.tag,t===13){if(s=pp(e),s!==null)return s;s=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return mo=s,null}function jp(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jv()){case qu:return 1;case yp:return 4;case ho:case Nv:return 16;case wp:return 536870912;default:return 16}default:return 16}}var is=null,Ju=null,Gr=null;function Np(){if(Gr)return Gr;var s,e=Ju,t=e.length,n,i="value"in is?is.value:is.textContent,r=i.length;for(s=0;s<t&&e[s]===i[s];s++);var o=t-s;for(n=1;n<=o&&e[t-n]===i[r-n];n++);return Gr=i.slice(s,1<n?1-n:void 0)}function Qr(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function br(){return!0}function bh(){return!1}function Ge(s){function e(t,n,i,r,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in s)s.hasOwnProperty(a)&&(t=s[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?br:bh,this.isPropagationStopped=bh,this}return ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=br)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=br)},persist:function(){},isPersistent:br}),e}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=Ge(In),Zi=ae({},In,{view:0,detail:0}),Fv=Ge(Zi),jl,Nl,Qn,Bo=ae({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zu,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Qn&&(Qn&&s.type==="mousemove"?(jl=s.screenX-Qn.screenX,Nl=s.screenY-Qn.screenY):Nl=jl=0,Qn=s),jl)},movementY:function(s){return"movementY"in s?s.movementY:Nl}}),_h=Ge(Bo),Bv=ae({},Bo,{dataTransfer:0}),Wv=Ge(Bv),Vv=ae({},Zi,{relatedTarget:0}),Tl=Ge(Vv),Hv=ae({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),Kv=Ge(Hv),qv=ae({},In,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Xv=Ge(qv),Gv=ae({},In,{data:0}),Sh=Ge(Gv),Qv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zv(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Yv[s])?!!e[s]:!1}function Zu(){return Zv}var ey=ae({},Zi,{key:function(s){if(s.key){var e=Qv[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=Qr(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Jv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zu,charCode:function(s){return s.type==="keypress"?Qr(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Qr(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ty=Ge(ey),sy=ae({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kh=Ge(sy),ny=ae({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zu}),iy=Ge(ny),ry=ae({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),oy=Ge(ry),ly=ae({},Bo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ay=Ge(ly),uy=[9,13,27,32],ec=Ft&&"CompositionEvent"in window,di=null;Ft&&"documentMode"in document&&(di=document.documentMode);var cy=Ft&&"TextEvent"in window&&!di,Tp=Ft&&(!ec||di&&8<di&&11>=di),Eh=" ",Ch=!1;function Pp(s,e){switch(s){case"keyup":return uy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mp(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ln=!1;function hy(s,e){switch(s){case"compositionend":return Mp(e);case"keypress":return e.which!==32?null:(Ch=!0,Eh);case"textInput":return s=e.data,s===Eh&&Ch?null:s;default:return null}}function dy(s,e){if(ln)return s==="compositionend"||!ec&&Pp(s,e)?(s=Np(),Gr=Ju=is=null,ln=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tp&&e.locale!=="ko"?null:e.data;default:return null}}var fy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jh(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!fy[s.type]:e==="textarea"}function Rp(s,e,t,n){up(n),e=go(e,"onChange"),0<e.length&&(t=new Yu("onChange","change",null,t,n),s.push({event:t,listeners:e}))}var fi=null,Ri=null;function py(s){Wp(s,0)}function Wo(s){var e=cn(s);if(sp(e))return s}function my(s,e){if(s==="change")return e}var $p=!1;if(Ft){var Pl;if(Ft){var Ml="oninput"in document;if(!Ml){var Nh=document.createElement("div");Nh.setAttribute("oninput","return;"),Ml=typeof Nh.oninput=="function"}Pl=Ml}else Pl=!1;$p=Pl&&(!document.documentMode||9<document.documentMode)}function Th(){fi&&(fi.detachEvent("onpropertychange",Lp),Ri=fi=null)}function Lp(s){if(s.propertyName==="value"&&Wo(Ri)){var e=[];Rp(e,Ri,s,Ku(s)),fp(py,e)}}function gy(s,e,t){s==="focusin"?(Th(),fi=e,Ri=t,fi.attachEvent("onpropertychange",Lp)):s==="focusout"&&Th()}function vy(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Wo(Ri)}function yy(s,e){if(s==="click")return Wo(e)}function wy(s,e){if(s==="input"||s==="change")return Wo(e)}function xy(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var mt=typeof Object.is=="function"?Object.is:xy;function $i(s,e){if(mt(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var t=Object.keys(s),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!ba.call(e,i)||!mt(s[i],e[i]))return!1}return!0}function Ph(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Mh(s,e){var t=Ph(s);s=0;for(var n;t;){if(t.nodeType===3){if(n=s+t.textContent.length,s<=e&&n>=e)return{node:t,offset:e-s};s=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Ph(t)}}function zp(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?zp(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Op(){for(var s=window,e=ao();e instanceof s.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)s=e.contentWindow;else break;e=ao(s.document)}return e}function tc(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function by(s){var e=Op(),t=s.focusedElem,n=s.selectionRange;if(e!==t&&t&&t.ownerDocument&&zp(t.ownerDocument.documentElement,t)){if(n!==null&&tc(t)){if(e=n.start,s=n.end,s===void 0&&(s=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(s,t.value.length);else if(s=(e=t.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var i=t.textContent.length,r=Math.min(n.start,i);n=n.end===void 0?r:Math.min(n.end,i),!s.extend&&r>n&&(i=n,n=r,r=i),i=Mh(t,r);var o=Mh(t,n);i&&o&&(s.rangeCount!==1||s.anchorNode!==i.node||s.anchorOffset!==i.offset||s.focusNode!==o.node||s.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),s.removeAllRanges(),r>n?(s.addRange(e),s.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),s.addRange(e)))}}for(e=[],s=t;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)s=e[t],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var _y=Ft&&"documentMode"in document&&11>=document.documentMode,an=null,Ua=null,pi=null,Fa=!1;function Rh(s,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Fa||an==null||an!==ao(n)||(n=an,"selectionStart"in n&&tc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),pi&&$i(pi,n)||(pi=n,n=go(Ua,"onSelect"),0<n.length&&(e=new Yu("onSelect","select",null,e,t),s.push({event:e,listeners:n}),e.target=an)))}function _r(s,e){var t={};return t[s.toLowerCase()]=e.toLowerCase(),t["Webkit"+s]="webkit"+e,t["Moz"+s]="moz"+e,t}var un={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Rl={},Dp={};Ft&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);function Vo(s){if(Rl[s])return Rl[s];if(!un[s])return s;var e=un[s],t;for(t in e)if(e.hasOwnProperty(t)&&t in Dp)return Rl[s]=e[t];return s}var Ap=Vo("animationend"),Ip=Vo("animationiteration"),Up=Vo("animationstart"),Fp=Vo("transitionend"),Bp=new Map,$h="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(s,e){Bp.set(s,e),Vs(e,[s])}for(var $l=0;$l<$h.length;$l++){var Ll=$h[$l],Sy=Ll.toLowerCase(),ky=Ll[0].toUpperCase()+Ll.slice(1);vs(Sy,"on"+ky)}vs(Ap,"onAnimationEnd");vs(Ip,"onAnimationIteration");vs(Up,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(Fp,"onTransitionEnd");jn("onMouseEnter",["mouseout","mouseover"]);jn("onMouseLeave",["mouseout","mouseover"]);jn("onPointerEnter",["pointerout","pointerover"]);jn("onPointerLeave",["pointerout","pointerover"]);Vs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ai="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ey=new Set("cancel close invalid load scroll toggle".split(" ").concat(ai));function Lh(s,e,t){var n=s.type||"unknown-event";s.currentTarget=t,Sv(n,e,void 0,s),s.currentTarget=null}function Wp(s,e){e=(e&4)!==0;for(var t=0;t<s.length;t++){var n=s[t],i=n.event;n=n.listeners;e:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;Lh(i,a,u),r=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;Lh(i,a,u),r=l}}}if(co)throw s=Oa,co=!1,Oa=null,s}function Z(s,e){var t=e[Ka];t===void 0&&(t=e[Ka]=new Set);var n=s+"__bubble";t.has(n)||(Vp(e,s,2,!1),t.add(n))}function zl(s,e,t){var n=0;e&&(n|=4),Vp(t,s,n,e)}var Sr="_reactListening"+Math.random().toString(36).slice(2);function Li(s){if(!s[Sr]){s[Sr]=!0,Jf.forEach(function(t){t!=="selectionchange"&&(Ey.has(t)||zl(t,!1,s),zl(t,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[Sr]||(e[Sr]=!0,zl("selectionchange",!1,e))}}function Vp(s,e,t,n){switch(jp(e)){case 1:var i=Iv;break;case 4:i=Uv;break;default:i=Qu}t=i.bind(null,e,t,s),i=void 0,!za||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?s.addEventListener(e,t,{capture:!0,passive:i}):s.addEventListener(e,t,!0):i!==void 0?s.addEventListener(e,t,{passive:i}):s.addEventListener(e,t,!1)}function Ol(s,e,t,n,i){var r=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ns(a),o===null)return;if(l=o.tag,l===5||l===6){n=r=o;continue e}a=a.parentNode}}n=n.return}fp(function(){var u=r,c=Ku(t),d=[];e:{var f=Bp.get(s);if(f!==void 0){var v=Yu,p=s;switch(s){case"keypress":if(Qr(t)===0)break e;case"keydown":case"keyup":v=ty;break;case"focusin":p="focus",v=Tl;break;case"focusout":p="blur",v=Tl;break;case"beforeblur":case"afterblur":v=Tl;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=_h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Wv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=iy;break;case Ap:case Ip:case Up:v=Kv;break;case Fp:v=oy;break;case"scroll":v=Fv;break;case"wheel":v=ay;break;case"copy":case"cut":case"paste":v=Xv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=kh}var m=(e&4)!==0,x=!m&&s==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var w=u,y;w!==null;){y=w;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,g!==null&&(b=Ni(w,g),b!=null&&m.push(zi(w,b,y)))),x)break;w=w.return}0<m.length&&(f=new v(f,p,null,t,c),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=s==="mouseover"||s==="pointerover",v=s==="mouseout"||s==="pointerout",f&&t!==$a&&(p=t.relatedTarget||t.fromElement)&&(Ns(p)||p[Bt]))break e;if((v||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,v?(p=t.relatedTarget||t.toElement,v=u,p=p?Ns(p):null,p!==null&&(x=Hs(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(v=null,p=u),v!==p)){if(m=_h,b="onMouseLeave",g="onMouseEnter",w="mouse",(s==="pointerout"||s==="pointerover")&&(m=kh,b="onPointerLeave",g="onPointerEnter",w="pointer"),x=v==null?f:cn(v),y=p==null?f:cn(p),f=new m(b,w+"leave",v,t,c),f.target=x,f.relatedTarget=y,b=null,Ns(c)===u&&(m=new m(g,w+"enter",p,t,c),m.target=y,m.relatedTarget=x,b=m),x=b,v&&p)t:{for(m=v,g=p,w=0,y=m;y;y=Gs(y))w++;for(y=0,b=g;b;b=Gs(b))y++;for(;0<w-y;)m=Gs(m),w--;for(;0<y-w;)g=Gs(g),y--;for(;w--;){if(m===g||g!==null&&m===g.alternate)break t;m=Gs(m),g=Gs(g)}m=null}else m=null;v!==null&&zh(d,f,v,m,!1),p!==null&&x!==null&&zh(d,x,p,m,!0)}}e:{if(f=u?cn(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var S=my;else if(jh(f))if($p)S=wy;else{S=vy;var k=gy}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=yy);if(S&&(S=S(s,u))){Rp(d,S,t,c);break e}k&&k(s,f,u),s==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Na(f,"number",f.value)}switch(k=u?cn(u):window,s){case"focusin":(jh(k)||k.contentEditable==="true")&&(an=k,Ua=u,pi=null);break;case"focusout":pi=Ua=an=null;break;case"mousedown":Fa=!0;break;case"contextmenu":case"mouseup":case"dragend":Fa=!1,Rh(d,t,c);break;case"selectionchange":if(_y)break;case"keydown":case"keyup":Rh(d,t,c)}var E;if(ec)e:{switch(s){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ln?Pp(s,t)&&(C="onCompositionEnd"):s==="keydown"&&t.keyCode===229&&(C="onCompositionStart");C&&(Tp&&t.locale!=="ko"&&(ln||C!=="onCompositionStart"?C==="onCompositionEnd"&&ln&&(E=Np()):(is=c,Ju="value"in is?is.value:is.textContent,ln=!0)),k=go(u,C),0<k.length&&(C=new Sh(C,s,null,t,c),d.push({event:C,listeners:k}),E?C.data=E:(E=Mp(t),E!==null&&(C.data=E)))),(E=cy?hy(s,t):dy(s,t))&&(u=go(u,"onBeforeInput"),0<u.length&&(c=new Sh("onBeforeInput","beforeinput",null,t,c),d.push({event:c,listeners:u}),c.data=E))}Wp(d,e)})}function zi(s,e,t){return{instance:s,listener:e,currentTarget:t}}function go(s,e){for(var t=e+"Capture",n=[];s!==null;){var i=s,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Ni(s,t),r!=null&&n.unshift(zi(s,r,i)),r=Ni(s,e),r!=null&&n.push(zi(s,r,i))),s=s.return}return n}function Gs(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function zh(s,e,t,n,i){for(var r=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=Ni(t,r),l!=null&&o.unshift(zi(t,l,a))):i||(l=Ni(t,r),l!=null&&o.push(zi(t,l,a)))),t=t.return}o.length!==0&&s.push({event:e,listeners:o})}var Cy=/\r\n?/g,jy=/\u0000|\uFFFD/g;function Oh(s){return(typeof s=="string"?s:""+s).replace(Cy,`
`).replace(jy,"")}function kr(s,e,t){if(e=Oh(e),Oh(s)!==e&&t)throw Error(N(425))}function vo(){}var Ba=null,Wa=null;function Va(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ha=typeof setTimeout=="function"?setTimeout:void 0,Ny=typeof clearTimeout=="function"?clearTimeout:void 0,Dh=typeof Promise=="function"?Promise:void 0,Ty=typeof queueMicrotask=="function"?queueMicrotask:typeof Dh<"u"?function(s){return Dh.resolve(null).then(s).catch(Py)}:Ha;function Py(s){setTimeout(function(){throw s})}function Dl(s,e){var t=e,n=0;do{var i=t.nextSibling;if(s.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){s.removeChild(i),Mi(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Mi(e)}function us(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function Ah(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return s;e--}else t==="/$"&&e++}s=s.previousSibling}return null}var Un=Math.random().toString(36).slice(2),kt="__reactFiber$"+Un,Oi="__reactProps$"+Un,Bt="__reactContainer$"+Un,Ka="__reactEvents$"+Un,My="__reactListeners$"+Un,Ry="__reactHandles$"+Un;function Ns(s){var e=s[kt];if(e)return e;for(var t=s.parentNode;t;){if(e=t[Bt]||t[kt]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(s=Ah(s);s!==null;){if(t=s[kt])return t;s=Ah(s)}return e}s=t,t=s.parentNode}return null}function er(s){return s=s[kt]||s[Bt],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function cn(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(N(33))}function Ho(s){return s[Oi]||null}var qa=[],hn=-1;function ys(s){return{current:s}}function te(s){0>hn||(s.current=qa[hn],qa[hn]=null,hn--)}function Y(s,e){hn++,qa[hn]=s.current,s.current=e}var ms={},Te=ys(ms),Ie=ys(!1),Ls=ms;function Nn(s,e){var t=s.type.contextTypes;if(!t)return ms;var n=s.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in t)i[r]=e[r];return n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(s){return s=s.childContextTypes,s!=null}function yo(){te(Ie),te(Te)}function Ih(s,e,t){if(Te.current!==ms)throw Error(N(168));Y(Te,e),Y(Ie,t)}function Hp(s,e,t){var n=s.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(N(108,gv(s)||"Unknown",i));return ae({},t,n)}function wo(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||ms,Ls=Te.current,Y(Te,s),Y(Ie,Ie.current),!0}function Uh(s,e,t){var n=s.stateNode;if(!n)throw Error(N(169));t?(s=Hp(s,e,Ls),n.__reactInternalMemoizedMergedChildContext=s,te(Ie),te(Te),Y(Te,s)):te(Ie),Y(Ie,t)}var Lt=null,Ko=!1,Al=!1;function Kp(s){Lt===null?Lt=[s]:Lt.push(s)}function $y(s){Ko=!0,Kp(s)}function ws(){if(!Al&&Lt!==null){Al=!0;var s=0,e=X;try{var t=Lt;for(X=1;s<t.length;s++){var n=t[s];do n=n(!0);while(n!==null)}Lt=null,Ko=!1}catch(i){throw Lt!==null&&(Lt=Lt.slice(s+1)),vp(qu,ws),i}finally{X=e,Al=!1}}return null}var dn=[],fn=0,xo=null,bo=0,Ze=[],et=0,zs=null,zt=1,Ot="";function ks(s,e){dn[fn++]=bo,dn[fn++]=xo,xo=s,bo=e}function qp(s,e,t){Ze[et++]=zt,Ze[et++]=Ot,Ze[et++]=zs,zs=s;var n=zt;s=Ot;var i=32-ft(n)-1;n&=~(1<<i),t+=1;var r=32-ft(e)+i;if(30<r){var o=i-i%5;r=(n&(1<<o)-1).toString(32),n>>=o,i-=o,zt=1<<32-ft(e)+i|t<<i|n,Ot=r+s}else zt=1<<r|t<<i|n,Ot=s}function sc(s){s.return!==null&&(ks(s,1),qp(s,1,0))}function nc(s){for(;s===xo;)xo=dn[--fn],dn[fn]=null,bo=dn[--fn],dn[fn]=null;for(;s===zs;)zs=Ze[--et],Ze[et]=null,Ot=Ze[--et],Ze[et]=null,zt=Ze[--et],Ze[et]=null}var Ke=null,He=null,ne=!1,dt=null;function Xp(s,e){var t=tt(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=s,e=s.deletions,e===null?(s.deletions=[t],s.flags|=16):e.push(t)}function Fh(s,e){switch(s.tag){case 5:var t=s.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,Ke=s,He=us(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,Ke=s,He=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=zs!==null?{id:zt,overflow:Ot}:null,s.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=tt(18,null,null,0),t.stateNode=e,t.return=s,s.child=t,Ke=s,He=null,!0):!1;default:return!1}}function Xa(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ga(s){if(ne){var e=He;if(e){var t=e;if(!Fh(s,e)){if(Xa(s))throw Error(N(418));e=us(t.nextSibling);var n=Ke;e&&Fh(s,e)?Xp(n,t):(s.flags=s.flags&-4097|2,ne=!1,Ke=s)}}else{if(Xa(s))throw Error(N(418));s.flags=s.flags&-4097|2,ne=!1,Ke=s}}}function Bh(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Ke=s}function Er(s){if(s!==Ke)return!1;if(!ne)return Bh(s),ne=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Va(s.type,s.memoizedProps)),e&&(e=He)){if(Xa(s))throw Gp(),Error(N(418));for(;e;)Xp(s,e),e=us(e.nextSibling)}if(Bh(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(N(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var t=s.data;if(t==="/$"){if(e===0){He=us(s.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}s=s.nextSibling}He=null}}else He=Ke?us(s.stateNode.nextSibling):null;return!0}function Gp(){for(var s=He;s;)s=us(s.nextSibling)}function Tn(){He=Ke=null,ne=!1}function ic(s){dt===null?dt=[s]:dt.push(s)}var Ly=Kt.ReactCurrentBatchConfig;function Jn(s,e,t){if(s=t.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(N(309));var n=t.stateNode}if(!n)throw Error(N(147,s));var i=n,r=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof s!="string")throw Error(N(284));if(!t._owner)throw Error(N(290,s))}return s}function Cr(s,e){throw s=Object.prototype.toString.call(e),Error(N(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Wh(s){var e=s._init;return e(s._payload)}function Qp(s){function e(g,w){if(s){var y=g.deletions;y===null?(g.deletions=[w],g.flags|=16):y.push(w)}}function t(g,w){if(!s)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function n(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=fs(g,w),g.index=0,g.sibling=null,g}function r(g,w,y){return g.index=y,s?(y=g.alternate,y!==null?(y=y.index,y<w?(g.flags|=2,w):y):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return s&&g.alternate===null&&(g.flags|=2),g}function a(g,w,y,b){return w===null||w.tag!==6?(w=Hl(y,g.mode,b),w.return=g,w):(w=i(w,y),w.return=g,w)}function l(g,w,y,b){var S=y.type;return S===on?c(g,w,y.props.children,b,y.key):w!==null&&(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Zt&&Wh(S)===w.type)?(b=i(w,y.props),b.ref=Jn(g,w,y),b.return=g,b):(b=no(y.type,y.key,y.props,null,g.mode,b),b.ref=Jn(g,w,y),b.return=g,b)}function u(g,w,y,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=Kl(y,g.mode,b),w.return=g,w):(w=i(w,y.children||[]),w.return=g,w)}function c(g,w,y,b,S){return w===null||w.tag!==7?(w=Rs(y,g.mode,b,S),w.return=g,w):(w=i(w,y),w.return=g,w)}function d(g,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hl(""+w,g.mode,y),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mr:return y=no(w.type,w.key,w.props,null,g.mode,y),y.ref=Jn(g,null,w),y.return=g,y;case rn:return w=Kl(w,g.mode,y),w.return=g,w;case Zt:var b=w._init;return d(g,b(w._payload),y)}if(oi(w)||Kn(w))return w=Rs(w,g.mode,y,null),w.return=g,w;Cr(g,w)}return null}function f(g,w,y,b){var S=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(g,w,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case mr:return y.key===S?l(g,w,y,b):null;case rn:return y.key===S?u(g,w,y,b):null;case Zt:return S=y._init,f(g,w,S(y._payload),b)}if(oi(y)||Kn(y))return S!==null?null:c(g,w,y,b,null);Cr(g,y)}return null}function v(g,w,y,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(y)||null,a(w,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mr:return g=g.get(b.key===null?y:b.key)||null,l(w,g,b,S);case rn:return g=g.get(b.key===null?y:b.key)||null,u(w,g,b,S);case Zt:var k=b._init;return v(g,w,y,k(b._payload),S)}if(oi(b)||Kn(b))return g=g.get(y)||null,c(w,g,b,S,null);Cr(w,b)}return null}function p(g,w,y,b){for(var S=null,k=null,E=w,C=w=0,$=null;E!==null&&C<y.length;C++){E.index>C?($=E,E=null):$=E.sibling;var M=f(g,E,y[C],b);if(M===null){E===null&&(E=$);break}s&&E&&M.alternate===null&&e(g,E),w=r(M,w,C),k===null?S=M:k.sibling=M,k=M,E=$}if(C===y.length)return t(g,E),ne&&ks(g,C),S;if(E===null){for(;C<y.length;C++)E=d(g,y[C],b),E!==null&&(w=r(E,w,C),k===null?S=E:k.sibling=E,k=E);return ne&&ks(g,C),S}for(E=n(g,E);C<y.length;C++)$=v(E,g,C,y[C],b),$!==null&&(s&&$.alternate!==null&&E.delete($.key===null?C:$.key),w=r($,w,C),k===null?S=$:k.sibling=$,k=$);return s&&E.forEach(function(I){return e(g,I)}),ne&&ks(g,C),S}function m(g,w,y,b){var S=Kn(y);if(typeof S!="function")throw Error(N(150));if(y=S.call(y),y==null)throw Error(N(151));for(var k=S=null,E=w,C=w=0,$=null,M=y.next();E!==null&&!M.done;C++,M=y.next()){E.index>C?($=E,E=null):$=E.sibling;var I=f(g,E,M.value,b);if(I===null){E===null&&(E=$);break}s&&E&&I.alternate===null&&e(g,E),w=r(I,w,C),k===null?S=I:k.sibling=I,k=I,E=$}if(M.done)return t(g,E),ne&&ks(g,C),S;if(E===null){for(;!M.done;C++,M=y.next())M=d(g,M.value,b),M!==null&&(w=r(M,w,C),k===null?S=M:k.sibling=M,k=M);return ne&&ks(g,C),S}for(E=n(g,E);!M.done;C++,M=y.next())M=v(E,g,C,M.value,b),M!==null&&(s&&M.alternate!==null&&E.delete(M.key===null?C:M.key),w=r(M,w,C),k===null?S=M:k.sibling=M,k=M);return s&&E.forEach(function(z){return e(g,z)}),ne&&ks(g,C),S}function x(g,w,y,b){if(typeof y=="object"&&y!==null&&y.type===on&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case mr:e:{for(var S=y.key,k=w;k!==null;){if(k.key===S){if(S=y.type,S===on){if(k.tag===7){t(g,k.sibling),w=i(k,y.props.children),w.return=g,g=w;break e}}else if(k.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Zt&&Wh(S)===k.type){t(g,k.sibling),w=i(k,y.props),w.ref=Jn(g,k,y),w.return=g,g=w;break e}t(g,k);break}else e(g,k);k=k.sibling}y.type===on?(w=Rs(y.props.children,g.mode,b,y.key),w.return=g,g=w):(b=no(y.type,y.key,y.props,null,g.mode,b),b.ref=Jn(g,w,y),b.return=g,g=b)}return o(g);case rn:e:{for(k=y.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){t(g,w.sibling),w=i(w,y.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=Kl(y,g.mode,b),w.return=g,g=w}return o(g);case Zt:return k=y._init,x(g,w,k(y._payload),b)}if(oi(y))return p(g,w,y,b);if(Kn(y))return m(g,w,y,b);Cr(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(t(g,w.sibling),w=i(w,y),w.return=g,g=w):(t(g,w),w=Hl(y,g.mode,b),w.return=g,g=w),o(g)):t(g,w)}return x}var Pn=Qp(!0),Jp=Qp(!1),_o=ys(null),So=null,pn=null,rc=null;function oc(){rc=pn=So=null}function lc(s){var e=_o.current;te(_o),s._currentValue=e}function Qa(s,e,t){for(;s!==null;){var n=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),s===t)break;s=s.return}}function kn(s,e){So=s,rc=pn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(Ae=!0),s.firstContext=null)}function it(s){var e=s._currentValue;if(rc!==s)if(s={context:s,memoizedValue:e,next:null},pn===null){if(So===null)throw Error(N(308));pn=s,So.dependencies={lanes:0,firstContext:s}}else pn=pn.next=s;return e}var Ts=null;function ac(s){Ts===null?Ts=[s]:Ts.push(s)}function Yp(s,e,t,n){var i=e.interleaved;return i===null?(t.next=t,ac(e)):(t.next=i.next,i.next=t),e.interleaved=t,Wt(s,n)}function Wt(s,e){s.lanes|=e;var t=s.alternate;for(t!==null&&(t.lanes|=e),t=s,s=s.return;s!==null;)s.childLanes|=e,t=s.alternate,t!==null&&(t.childLanes|=e),t=s,s=s.return;return t.tag===3?t.stateNode:null}var es=!1;function uc(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zp(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function It(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(s,e,t){var n=s.updateQueue;if(n===null)return null;if(n=n.shared,V&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Wt(s,t)}return i=n.interleaved,i===null?(e.next=e,ac(n)):(e.next=i.next,i.next=e),n.interleaved=e,Wt(s,t)}function Jr(s,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,Xu(s,t)}}function Vh(s,e){var t=s.updateQueue,n=s.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?i=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?i=r=e:r=r.next=e}else i=r=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:n.shared,effects:n.effects},s.updateQueue=t;return}s=t.lastBaseUpdate,s===null?t.firstBaseUpdate=e:s.next=e,t.lastBaseUpdate=e}function ko(s,e,t,n){var i=s.updateQueue;es=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var c=s.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(r!==null){var d=i.baseState;o=0,c=u=l=null,a=r;do{var f=a.lane,v=a.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=s,m=a;switch(f=e,v=t,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(v,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(v,d,f):p,f==null)break e;d=ae({},d,f);break e;case 2:es=!0}}a.callback!==null&&a.lane!==0&&(s.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=v,l=d):c=c.next=v,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);Ds|=o,s.lanes=o,s.memoizedState=d}}function Hh(s,e,t){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var n=s[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(N(191,i));i.call(n)}}}var tr={},jt=ys(tr),Di=ys(tr),Ai=ys(tr);function Ps(s){if(s===tr)throw Error(N(174));return s}function cc(s,e){switch(Y(Ai,e),Y(Di,s),Y(jt,tr),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pa(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=Pa(e,s)}te(jt),Y(jt,e)}function Mn(){te(jt),te(Di),te(Ai)}function em(s){Ps(Ai.current);var e=Ps(jt.current),t=Pa(e,s.type);e!==t&&(Y(Di,s),Y(jt,t))}function hc(s){Di.current===s&&(te(jt),te(Di))}var re=ys(0);function Eo(s){for(var e=s;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Il=[];function dc(){for(var s=0;s<Il.length;s++)Il[s]._workInProgressVersionPrimary=null;Il.length=0}var Yr=Kt.ReactCurrentDispatcher,Ul=Kt.ReactCurrentBatchConfig,Os=0,oe=null,ye=null,xe=null,Co=!1,mi=!1,Ii=0,zy=0;function Ce(){throw Error(N(321))}function fc(s,e){if(e===null)return!1;for(var t=0;t<e.length&&t<s.length;t++)if(!mt(s[t],e[t]))return!1;return!0}function pc(s,e,t,n,i,r){if(Os=r,oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yr.current=s===null||s.memoizedState===null?Iy:Uy,s=t(n,i),mi){r=0;do{if(mi=!1,Ii=0,25<=r)throw Error(N(301));r+=1,xe=ye=null,e.updateQueue=null,Yr.current=Fy,s=t(n,i)}while(mi)}if(Yr.current=jo,e=ye!==null&&ye.next!==null,Os=0,xe=ye=oe=null,Co=!1,e)throw Error(N(300));return s}function mc(){var s=Ii!==0;return Ii=0,s}function bt(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?oe.memoizedState=xe=s:xe=xe.next=s,xe}function rt(){if(ye===null){var s=oe.alternate;s=s!==null?s.memoizedState:null}else s=ye.next;var e=xe===null?oe.memoizedState:xe.next;if(e!==null)xe=e,ye=s;else{if(s===null)throw Error(N(310));ye=s,s={memoizedState:ye.memoizedState,baseState:ye.baseState,baseQueue:ye.baseQueue,queue:ye.queue,next:null},xe===null?oe.memoizedState=xe=s:xe=xe.next=s}return xe}function Ui(s,e){return typeof e=="function"?e(s):e}function Fl(s){var e=rt(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=s;var n=ye,i=n.baseQueue,r=t.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}n.baseQueue=i=r,t.pending=null}if(i!==null){r=i.next,n=n.baseState;var a=o=null,l=null,u=r;do{var c=u.lane;if((Os&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:s(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,oe.lanes|=c,Ds|=c}u=u.next}while(u!==null&&u!==r);l===null?o=n:l.next=a,mt(n,e.memoizedState)||(Ae=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(s=t.interleaved,s!==null){i=s;do r=i.lane,oe.lanes|=r,Ds|=r,i=i.next;while(i!==s)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Bl(s){var e=rt(),t=e.queue;if(t===null)throw Error(N(311));t.lastRenderedReducer=s;var n=t.dispatch,i=t.pending,r=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do r=s(r,o.action),o=o.next;while(o!==i);mt(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,n]}function tm(){}function sm(s,e){var t=oe,n=rt(),i=e(),r=!mt(n.memoizedState,i);if(r&&(n.memoizedState=i,Ae=!0),n=n.queue,gc(rm.bind(null,t,n,s),[s]),n.getSnapshot!==e||r||xe!==null&&xe.memoizedState.tag&1){if(t.flags|=2048,Fi(9,im.bind(null,t,n,i,e),void 0,null),be===null)throw Error(N(349));Os&30||nm(t,e,i)}return i}function nm(s,e,t){s.flags|=16384,s={getSnapshot:e,value:t},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.stores=[s]):(t=e.stores,t===null?e.stores=[s]:t.push(s))}function im(s,e,t,n){e.value=t,e.getSnapshot=n,om(e)&&lm(s)}function rm(s,e,t){return t(function(){om(e)&&lm(s)})}function om(s){var e=s.getSnapshot;s=s.value;try{var t=e();return!mt(s,t)}catch{return!0}}function lm(s){var e=Wt(s,1);e!==null&&pt(e,s,1,-1)}function Kh(s){var e=bt();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:s},e.queue=s,s=s.dispatch=Ay.bind(null,oe,s),[e.memoizedState,s]}function Fi(s,e,t,n){return s={tag:s,create:e,destroy:t,deps:n,next:null},e=oe.updateQueue,e===null?(e={lastEffect:null,stores:null},oe.updateQueue=e,e.lastEffect=s.next=s):(t=e.lastEffect,t===null?e.lastEffect=s.next=s:(n=t.next,t.next=s,s.next=n,e.lastEffect=s)),s}function am(){return rt().memoizedState}function Zr(s,e,t,n){var i=bt();oe.flags|=s,i.memoizedState=Fi(1|e,t,void 0,n===void 0?null:n)}function qo(s,e,t,n){var i=rt();n=n===void 0?null:n;var r=void 0;if(ye!==null){var o=ye.memoizedState;if(r=o.destroy,n!==null&&fc(n,o.deps)){i.memoizedState=Fi(e,t,r,n);return}}oe.flags|=s,i.memoizedState=Fi(1|e,t,r,n)}function qh(s,e){return Zr(8390656,8,s,e)}function gc(s,e){return qo(2048,8,s,e)}function um(s,e){return qo(4,2,s,e)}function cm(s,e){return qo(4,4,s,e)}function hm(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function dm(s,e,t){return t=t!=null?t.concat([s]):null,qo(4,4,hm.bind(null,e,s),t)}function vc(){}function fm(s,e){var t=rt();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&fc(e,n[1])?n[0]:(t.memoizedState=[s,e],s)}function pm(s,e){var t=rt();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&fc(e,n[1])?n[0]:(s=s(),t.memoizedState=[s,e],s)}function mm(s,e,t){return Os&21?(mt(t,e)||(t=xp(),oe.lanes|=t,Ds|=t,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,Ae=!0),s.memoizedState=t)}function Oy(s,e){var t=X;X=t!==0&&4>t?t:4,s(!0);var n=Ul.transition;Ul.transition={};try{s(!1),e()}finally{X=t,Ul.transition=n}}function gm(){return rt().memoizedState}function Dy(s,e,t){var n=ds(s);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},vm(s))ym(e,t);else if(t=Yp(s,e,t,n),t!==null){var i=Re();pt(t,s,n,i),wm(t,e,n)}}function Ay(s,e,t){var n=ds(s),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(vm(s))ym(e,i);else{var r=s.alternate;if(s.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,t);if(i.hasEagerState=!0,i.eagerState=a,mt(a,o)){var l=e.interleaved;l===null?(i.next=i,ac(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Yp(s,e,i,n),t!==null&&(i=Re(),pt(t,s,n,i),wm(t,e,n))}}function vm(s){var e=s.alternate;return s===oe||e!==null&&e===oe}function ym(s,e){mi=Co=!0;var t=s.pending;t===null?e.next=e:(e.next=t.next,t.next=e),s.pending=e}function wm(s,e,t){if(t&4194240){var n=e.lanes;n&=s.pendingLanes,t|=n,e.lanes=t,Xu(s,t)}}var jo={readContext:it,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useInsertionEffect:Ce,useLayoutEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useMutableSource:Ce,useSyncExternalStore:Ce,useId:Ce,unstable_isNewReconciler:!1},Iy={readContext:it,useCallback:function(s,e){return bt().memoizedState=[s,e===void 0?null:e],s},useContext:it,useEffect:qh,useImperativeHandle:function(s,e,t){return t=t!=null?t.concat([s]):null,Zr(4194308,4,hm.bind(null,e,s),t)},useLayoutEffect:function(s,e){return Zr(4194308,4,s,e)},useInsertionEffect:function(s,e){return Zr(4,2,s,e)},useMemo:function(s,e){var t=bt();return e=e===void 0?null:e,s=s(),t.memoizedState=[s,e],s},useReducer:function(s,e,t){var n=bt();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},n.queue=s,s=s.dispatch=Dy.bind(null,oe,s),[n.memoizedState,s]},useRef:function(s){var e=bt();return s={current:s},e.memoizedState=s},useState:Kh,useDebugValue:vc,useDeferredValue:function(s){return bt().memoizedState=s},useTransition:function(){var s=Kh(!1),e=s[0];return s=Oy.bind(null,s[1]),bt().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,t){var n=oe,i=bt();if(ne){if(t===void 0)throw Error(N(407));t=t()}else{if(t=e(),be===null)throw Error(N(349));Os&30||nm(n,e,t)}i.memoizedState=t;var r={value:t,getSnapshot:e};return i.queue=r,qh(rm.bind(null,n,r,s),[s]),n.flags|=2048,Fi(9,im.bind(null,n,r,t,e),void 0,null),t},useId:function(){var s=bt(),e=be.identifierPrefix;if(ne){var t=Ot,n=zt;t=(n&~(1<<32-ft(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ii++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=zy++,e=":"+e+"r"+t.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Uy={readContext:it,useCallback:fm,useContext:it,useEffect:gc,useImperativeHandle:dm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:Fl,useRef:am,useState:function(){return Fl(Ui)},useDebugValue:vc,useDeferredValue:function(s){var e=rt();return mm(e,ye.memoizedState,s)},useTransition:function(){var s=Fl(Ui)[0],e=rt().memoizedState;return[s,e]},useMutableSource:tm,useSyncExternalStore:sm,useId:gm,unstable_isNewReconciler:!1},Fy={readContext:it,useCallback:fm,useContext:it,useEffect:gc,useImperativeHandle:dm,useInsertionEffect:um,useLayoutEffect:cm,useMemo:pm,useReducer:Bl,useRef:am,useState:function(){return Bl(Ui)},useDebugValue:vc,useDeferredValue:function(s){var e=rt();return ye===null?e.memoizedState=s:mm(e,ye.memoizedState,s)},useTransition:function(){var s=Bl(Ui)[0],e=rt().memoizedState;return[s,e]},useMutableSource:tm,useSyncExternalStore:sm,useId:gm,unstable_isNewReconciler:!1};function ut(s,e){if(s&&s.defaultProps){e=ae({},e),s=s.defaultProps;for(var t in s)e[t]===void 0&&(e[t]=s[t]);return e}return e}function Ja(s,e,t,n){e=s.memoizedState,t=t(n,e),t=t==null?e:ae({},e,t),s.memoizedState=t,s.lanes===0&&(s.updateQueue.baseState=t)}var Xo={isMounted:function(s){return(s=s._reactInternals)?Hs(s)===s:!1},enqueueSetState:function(s,e,t){s=s._reactInternals;var n=Re(),i=ds(s),r=It(n,i);r.payload=e,t!=null&&(r.callback=t),e=cs(s,r,i),e!==null&&(pt(e,s,i,n),Jr(e,s,i))},enqueueReplaceState:function(s,e,t){s=s._reactInternals;var n=Re(),i=ds(s),r=It(n,i);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=cs(s,r,i),e!==null&&(pt(e,s,i,n),Jr(e,s,i))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var t=Re(),n=ds(s),i=It(t,n);i.tag=2,e!=null&&(i.callback=e),e=cs(s,i,n),e!==null&&(pt(e,s,n,t),Jr(e,s,n))}};function Xh(s,e,t,n,i,r,o){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(n,r,o):e.prototype&&e.prototype.isPureReactComponent?!$i(t,n)||!$i(i,r):!0}function xm(s,e,t){var n=!1,i=ms,r=e.contextType;return typeof r=="object"&&r!==null?r=it(r):(i=Ue(e)?Ls:Te.current,n=e.contextTypes,r=(n=n!=null)?Nn(s,i):ms),e=new e(t,r),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xo,s.stateNode=e,e._reactInternals=s,n&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=i,s.__reactInternalMemoizedMaskedChildContext=r),e}function Gh(s,e,t,n){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==s&&Xo.enqueueReplaceState(e,e.state,null)}function Ya(s,e,t,n){var i=s.stateNode;i.props=t,i.state=s.memoizedState,i.refs={},uc(s);var r=e.contextType;typeof r=="object"&&r!==null?i.context=it(r):(r=Ue(e)?Ls:Te.current,i.context=Nn(s,r)),i.state=s.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Ja(s,e,r,t),i.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Xo.enqueueReplaceState(i,i.state,null),ko(s,t,i,n),i.state=s.memoizedState),typeof i.componentDidMount=="function"&&(s.flags|=4194308)}function Rn(s,e){try{var t="",n=e;do t+=mv(n),n=n.return;while(n);var i=t}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:s,source:e,stack:i,digest:null}}function Wl(s,e,t){return{value:s,source:null,stack:t??null,digest:e??null}}function Za(s,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var By=typeof WeakMap=="function"?WeakMap:Map;function bm(s,e,t){t=It(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){To||(To=!0,uu=n),Za(s,e)},t}function _m(s,e,t){t=It(-1,t),t.tag=3;var n=s.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){Za(s,e)}}var r=s.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){Za(s,e),typeof n!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Qh(s,e,t){var n=s.pingCache;if(n===null){n=s.pingCache=new By;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),s=sw.bind(null,s,e,t),e.then(s,s))}function Jh(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Yh(s,e,t,n,i){return s.mode&1?(s.flags|=65536,s.lanes=i,s):(s===e?s.flags|=65536:(s.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=It(-1,1),e.tag=2,cs(t,e,1))),t.lanes|=1),s)}var Wy=Kt.ReactCurrentOwner,Ae=!1;function Me(s,e,t,n){e.child=s===null?Jp(e,null,t,n):Pn(e,s.child,t,n)}function Zh(s,e,t,n,i){t=t.render;var r=e.ref;return kn(e,i),n=pc(s,e,t,n,r,i),t=mc(),s!==null&&!Ae?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~i,Vt(s,e,i)):(ne&&t&&sc(e),e.flags|=1,Me(s,e,n,i),e.child)}function ed(s,e,t,n,i){if(s===null){var r=t.type;return typeof r=="function"&&!Ec(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,Sm(s,e,r,n,i)):(s=no(t.type,null,n,e,e.mode,i),s.ref=e.ref,s.return=e,e.child=s)}if(r=s.child,!(s.lanes&i)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:$i,t(o,n)&&s.ref===e.ref)return Vt(s,e,i)}return e.flags|=1,s=fs(r,n),s.ref=e.ref,s.return=e,e.child=s}function Sm(s,e,t,n,i){if(s!==null){var r=s.memoizedProps;if($i(r,n)&&s.ref===e.ref)if(Ae=!1,e.pendingProps=n=r,(s.lanes&i)!==0)s.flags&131072&&(Ae=!0);else return e.lanes=s.lanes,Vt(s,e,i)}return eu(s,e,t,n,i)}function km(s,e,t){var n=e.pendingProps,i=n.children,r=s!==null?s.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Y(gn,Ve),Ve|=t;else{if(!(t&1073741824))return s=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,Y(gn,Ve),Ve|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:t,Y(gn,Ve),Ve|=n}else r!==null?(n=r.baseLanes|t,e.memoizedState=null):n=t,Y(gn,Ve),Ve|=n;return Me(s,e,i,t),e.child}function Em(s,e){var t=e.ref;(s===null&&t!==null||s!==null&&s.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function eu(s,e,t,n,i){var r=Ue(t)?Ls:Te.current;return r=Nn(e,r),kn(e,i),t=pc(s,e,t,n,r,i),n=mc(),s!==null&&!Ae?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~i,Vt(s,e,i)):(ne&&n&&sc(e),e.flags|=1,Me(s,e,t,i),e.child)}function td(s,e,t,n,i){if(Ue(t)){var r=!0;wo(e)}else r=!1;if(kn(e,i),e.stateNode===null)eo(s,e),xm(e,t,n),Ya(e,t,n,i),n=!0;else if(s===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=it(u):(u=Ue(t)?Ls:Te.current,u=Nn(e,u));var c=t.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&Gh(e,o,n,u),es=!1;var f=e.memoizedState;o.state=f,ko(e,n,o,i),l=e.memoizedState,a!==n||f!==l||Ie.current||es?(typeof c=="function"&&(Ja(e,t,c,n),l=e.memoizedState),(a=es||Xh(e,t,a,n,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Zp(s,e),a=e.memoizedProps,u=e.type===e.elementType?a:ut(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=it(l):(l=Ue(t)?Ls:Te.current,l=Nn(e,l));var v=t.getDerivedStateFromProps;(c=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Gh(e,o,n,l),es=!1,f=e.memoizedState,o.state=f,ko(e,n,o,i);var p=e.memoizedState;a!==d||f!==p||Ie.current||es?(typeof v=="function"&&(Ja(e,t,v,n),p=e.memoizedState),(u=es||Xh(e,t,u,n,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===s.memoizedProps&&f===s.memoizedState||(e.flags|=1024),n=!1)}return tu(s,e,t,n,r,i)}function tu(s,e,t,n,i,r){Em(s,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Uh(e,t,!1),Vt(s,e,r);n=e.stateNode,Wy.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,s!==null&&o?(e.child=Pn(e,s.child,null,r),e.child=Pn(e,null,a,r)):Me(s,e,a,r),e.memoizedState=n.state,i&&Uh(e,t,!0),e.child}function Cm(s){var e=s.stateNode;e.pendingContext?Ih(s,e.pendingContext,e.pendingContext!==e.context):e.context&&Ih(s,e.context,!1),cc(s,e.containerInfo)}function sd(s,e,t,n,i){return Tn(),ic(i),e.flags|=256,Me(s,e,t,n),e.child}var su={dehydrated:null,treeContext:null,retryLane:0};function nu(s){return{baseLanes:s,cachePool:null,transitions:null}}function jm(s,e,t){var n=e.pendingProps,i=re.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=s!==null&&s.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(i|=1),Y(re,i&1),s===null)return Ga(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,s=n.fallback,r?(n=e.mode,r=e.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Jo(o,n,0,null),s=Rs(s,n,t,null),r.return=e,s.return=e,r.sibling=s,e.child=r,e.child.memoizedState=nu(t),e.memoizedState=su,s):yc(e,o));if(i=s.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Vy(s,e,o,n,a,i,t);if(r){r=n.fallback,o=e.mode,i=s.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=fs(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=fs(a,r):(r=Rs(r,o,t,null),r.flags|=2),r.return=e,n.return=e,n.sibling=r,e.child=n,n=r,r=e.child,o=s.child.memoizedState,o=o===null?nu(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=s.childLanes&~t,e.memoizedState=su,n}return r=s.child,s=r.sibling,n=fs(r,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,s!==null&&(t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)),e.child=n,e.memoizedState=null,n}function yc(s,e){return e=Jo({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function jr(s,e,t,n){return n!==null&&ic(n),Pn(e,s.child,null,t),s=yc(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function Vy(s,e,t,n,i,r,o){if(t)return e.flags&256?(e.flags&=-257,n=Wl(Error(N(422))),jr(s,e,o,n)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(r=n.fallback,i=e.mode,n=Jo({mode:"visible",children:n.children},i,0,null),r=Rs(r,i,o,null),r.flags|=2,n.return=e,r.return=e,n.sibling=r,e.child=n,e.mode&1&&Pn(e,s.child,null,o),e.child.memoizedState=nu(o),e.memoizedState=su,r);if(!(e.mode&1))return jr(s,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,r=Error(N(419)),n=Wl(r,n,void 0),jr(s,e,o,n)}if(a=(o&s.childLanes)!==0,Ae||a){if(n=be,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,Wt(s,i),pt(n,s,i,-1))}return kc(),n=Wl(Error(N(421))),jr(s,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=s.child,e=nw.bind(null,s),i._reactRetry=e,null):(s=r.treeContext,He=us(i.nextSibling),Ke=e,ne=!0,dt=null,s!==null&&(Ze[et++]=zt,Ze[et++]=Ot,Ze[et++]=zs,zt=s.id,Ot=s.overflow,zs=e),e=yc(e,n.children),e.flags|=4096,e)}function nd(s,e,t){s.lanes|=e;var n=s.alternate;n!==null&&(n.lanes|=e),Qa(s.return,e,t)}function Vl(s,e,t,n,i){var r=s.memoizedState;r===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=t,r.tailMode=i)}function Nm(s,e,t){var n=e.pendingProps,i=n.revealOrder,r=n.tail;if(Me(s,e,n.children,t),n=re.current,n&2)n=n&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&nd(s,t,e);else if(s.tag===19)nd(s,t,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}n&=1}if(Y(re,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)s=t.alternate,s!==null&&Eo(s)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Vl(e,!1,i,t,r);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(s=i.alternate,s!==null&&Eo(s)===null){e.child=i;break}s=i.sibling,i.sibling=t,t=i,i=s}Vl(e,!0,t,null,r);break;case"together":Vl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function eo(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Vt(s,e,t){if(s!==null&&(e.dependencies=s.dependencies),Ds|=e.lanes,!(t&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(N(153));if(e.child!==null){for(s=e.child,t=fs(s,s.pendingProps),e.child=t,t.return=e;s.sibling!==null;)s=s.sibling,t=t.sibling=fs(s,s.pendingProps),t.return=e;t.sibling=null}return e.child}function Hy(s,e,t){switch(e.tag){case 3:Cm(e),Tn();break;case 5:em(e);break;case 1:Ue(e.type)&&wo(e);break;case 4:cc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Y(_o,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Y(re,re.current&1),e.flags|=128,null):t&e.child.childLanes?jm(s,e,t):(Y(re,re.current&1),s=Vt(s,e,t),s!==null?s.sibling:null);Y(re,re.current&1);break;case 19:if(n=(t&e.childLanes)!==0,s.flags&128){if(n)return Nm(s,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Y(re,re.current),n)break;return null;case 22:case 23:return e.lanes=0,km(s,e,t)}return Vt(s,e,t)}var Tm,iu,Pm,Mm;Tm=function(s,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)s.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};iu=function(){};Pm=function(s,e,t,n){var i=s.memoizedProps;if(i!==n){s=e.stateNode,Ps(jt.current);var r=null;switch(t){case"input":i=Ca(s,i),n=Ca(s,n),r=[];break;case"select":i=ae({},i,{value:void 0}),n=ae({},n,{value:void 0}),r=[];break;case"textarea":i=Ta(s,i),n=Ta(s,n),r=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(s.onclick=vo)}Ma(t,n);var o;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ci.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(r||(r=[]),r.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Z("scroll",s),r||a===l||(r=[])):(r=r||[]).push(u,l))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Mm=function(s,e,t,n){t!==n&&(e.flags|=4)};function Yn(s,e){if(!ne)switch(s.tailMode){case"hidden":e=s.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?s.tail=null:t.sibling=null;break;case"collapsed":t=s.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:n.sibling=null}}function je(s){var e=s.alternate!==null&&s.alternate.child===s.child,t=0,n=0;if(e)for(var i=s.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=s,i=i.sibling;else for(i=s.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=s,i=i.sibling;return s.subtreeFlags|=n,s.childLanes=t,e}function Ky(s,e,t){var n=e.pendingProps;switch(nc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return Ue(e.type)&&yo(),je(e),null;case 3:return n=e.stateNode,Mn(),te(Ie),te(Te),dc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(s===null||s.child===null)&&(Er(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dt!==null&&(du(dt),dt=null))),iu(s,e),je(e),null;case 5:hc(e);var i=Ps(Ai.current);if(t=e.type,s!==null&&e.stateNode!=null)Pm(s,e,t,n,i),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(N(166));return je(e),null}if(s=Ps(jt.current),Er(e)){n=e.stateNode,t=e.type;var r=e.memoizedProps;switch(n[kt]=e,n[Oi]=r,s=(e.mode&1)!==0,t){case"dialog":Z("cancel",n),Z("close",n);break;case"iframe":case"object":case"embed":Z("load",n);break;case"video":case"audio":for(i=0;i<ai.length;i++)Z(ai[i],n);break;case"source":Z("error",n);break;case"img":case"image":case"link":Z("error",n),Z("load",n);break;case"details":Z("toggle",n);break;case"input":dh(n,r),Z("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},Z("invalid",n);break;case"textarea":ph(n,r),Z("invalid",n)}Ma(t,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?n.textContent!==a&&(r.suppressHydrationWarning!==!0&&kr(n.textContent,a,s),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&kr(n.textContent,a,s),i=["children",""+a]):Ci.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Z("scroll",n)}switch(t){case"input":gr(n),fh(n,r,!0);break;case"textarea":gr(n),mh(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=vo)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=rp(t)),s==="http://www.w3.org/1999/xhtml"?t==="script"?(s=o.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof n.is=="string"?s=o.createElement(t,{is:n.is}):(s=o.createElement(t),t==="select"&&(o=s,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):s=o.createElementNS(s,t),s[kt]=e,s[Oi]=n,Tm(s,e,!1,!1),e.stateNode=s;e:{switch(o=Ra(t,n),t){case"dialog":Z("cancel",s),Z("close",s),i=n;break;case"iframe":case"object":case"embed":Z("load",s),i=n;break;case"video":case"audio":for(i=0;i<ai.length;i++)Z(ai[i],s);i=n;break;case"source":Z("error",s),i=n;break;case"img":case"image":case"link":Z("error",s),Z("load",s),i=n;break;case"details":Z("toggle",s),i=n;break;case"input":dh(s,n),i=Ca(s,n),Z("invalid",s);break;case"option":i=n;break;case"select":s._wrapperState={wasMultiple:!!n.multiple},i=ae({},n,{value:void 0}),Z("invalid",s);break;case"textarea":ph(s,n),i=Ta(s,n),Z("invalid",s);break;default:i=n}Ma(t,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?ap(s,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&op(s,l)):r==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ji(s,l):typeof l=="number"&&ji(s,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Ci.hasOwnProperty(r)?l!=null&&r==="onScroll"&&Z("scroll",s):l!=null&&Bu(s,r,l,o))}switch(t){case"input":gr(s),fh(s,n,!1);break;case"textarea":gr(s),mh(s);break;case"option":n.value!=null&&s.setAttribute("value",""+ps(n.value));break;case"select":s.multiple=!!n.multiple,r=n.value,r!=null?xn(s,!!n.multiple,r,!1):n.defaultValue!=null&&xn(s,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(s.onclick=vo)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(s&&e.stateNode!=null)Mm(s,e,s.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(N(166));if(t=Ps(Ai.current),Ps(jt.current),Er(e)){if(n=e.stateNode,t=e.memoizedProps,n[kt]=e,(r=n.nodeValue!==t)&&(s=Ke,s!==null))switch(s.tag){case 3:kr(n.nodeValue,t,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&kr(n.nodeValue,t,(s.mode&1)!==0)}r&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[kt]=e,e.stateNode=n}return je(e),null;case 13:if(te(re),n=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ne&&He!==null&&e.mode&1&&!(e.flags&128))Gp(),Tn(),e.flags|=98560,r=!1;else if(r=Er(e),n!==null&&n.dehydrated!==null){if(s===null){if(!r)throw Error(N(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[kt]=e}else Tn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),r=!1}else dt!==null&&(du(dt),dt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(s!==null&&s.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(s===null||re.current&1?we===0&&(we=3):kc())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return Mn(),iu(s,e),s===null&&Li(e.stateNode.containerInfo),je(e),null;case 10:return lc(e.type._context),je(e),null;case 17:return Ue(e.type)&&yo(),je(e),null;case 19:if(te(re),r=e.memoizedState,r===null)return je(e),null;if(n=(e.flags&128)!==0,o=r.rendering,o===null)if(n)Yn(r,!1);else{if(we!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(o=Eo(s),o!==null){for(e.flags|=128,Yn(r,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)r=t,s=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t=t.sibling;return Y(re,re.current&1|2),e.child}s=s.sibling}r.tail!==null&&he()>$n&&(e.flags|=128,n=!0,Yn(r,!1),e.lanes=4194304)}else{if(!n)if(s=Eo(o),s!==null){if(e.flags|=128,n=!0,t=s.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Yn(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ne)return je(e),null}else 2*he()-r.renderingStartTime>$n&&t!==1073741824&&(e.flags|=128,n=!0,Yn(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=he(),e.sibling=null,t=re.current,Y(re,n?t&1|2:t&1),e):(je(e),null);case 22:case 23:return Sc(),n=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ve&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function qy(s,e){switch(nc(e),e.tag){case 1:return Ue(e.type)&&yo(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return Mn(),te(Ie),te(Te),dc(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return hc(e),null;case 13:if(te(re),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(N(340));Tn()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return te(re),null;case 4:return Mn(),null;case 10:return lc(e.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var Nr=!1,Ne=!1,Xy=typeof WeakSet=="function"?WeakSet:Set,R=null;function mn(s,e){var t=s.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){ce(s,e,n)}else t.current=null}function ru(s,e,t){try{t()}catch(n){ce(s,e,n)}}var id=!1;function Gy(s,e){if(Ba=po,s=Op(),tc(s)){if("selectionStart"in s)var t={start:s.selectionStart,end:s.selectionEnd};else e:{t=(t=s.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=s,f=null;t:for(;;){for(var v;d!==t||i!==0&&d.nodeType!==3||(a=o+i),d!==r||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===s)break t;if(f===t&&++u===i&&(a=o),f===r&&++c===n&&(l=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Wa={focusedElem:s,selectionRange:t},po=!1,R=e;R!==null;)if(e=R,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,R=s;else for(;R!==null;){e=R;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,x=p.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:ut(e.type,m),x);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(b){ce(e,e.return,b)}if(s=e.sibling,s!==null){s.return=e.return,R=s;break}R=e.return}return p=id,id=!1,p}function gi(s,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&s)===s){var r=i.destroy;i.destroy=void 0,r!==void 0&&ru(e,t,r)}i=i.next}while(i!==n)}}function Go(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&s)===s){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function ou(s){var e=s.ref;if(e!==null){var t=s.stateNode;switch(s.tag){case 5:s=t;break;default:s=t}typeof e=="function"?e(s):e.current=s}}function Rm(s){var e=s.alternate;e!==null&&(s.alternate=null,Rm(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[kt],delete e[Oi],delete e[Ka],delete e[My],delete e[Ry])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function $m(s){return s.tag===5||s.tag===3||s.tag===4}function rd(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$m(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function lu(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(s,e):t.insertBefore(s,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(s,t)):(e=t,e.appendChild(s)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=vo));else if(n!==4&&(s=s.child,s!==null))for(lu(s,e,t),s=s.sibling;s!==null;)lu(s,e,t),s=s.sibling}function au(s,e,t){var n=s.tag;if(n===5||n===6)s=s.stateNode,e?t.insertBefore(s,e):t.appendChild(s);else if(n!==4&&(s=s.child,s!==null))for(au(s,e,t),s=s.sibling;s!==null;)au(s,e,t),s=s.sibling}var _e=null,ct=!1;function Gt(s,e,t){for(t=t.child;t!==null;)Lm(s,e,t),t=t.sibling}function Lm(s,e,t){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(Fo,t)}catch{}switch(t.tag){case 5:Ne||mn(t,e);case 6:var n=_e,i=ct;_e=null,Gt(s,e,t),_e=n,ct=i,_e!==null&&(ct?(s=_e,t=t.stateNode,s.nodeType===8?s.parentNode.removeChild(t):s.removeChild(t)):_e.removeChild(t.stateNode));break;case 18:_e!==null&&(ct?(s=_e,t=t.stateNode,s.nodeType===8?Dl(s.parentNode,t):s.nodeType===1&&Dl(s,t),Mi(s)):Dl(_e,t.stateNode));break;case 4:n=_e,i=ct,_e=t.stateNode.containerInfo,ct=!0,Gt(s,e,t),_e=n,ct=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ru(t,e,o),i=i.next}while(i!==n)}Gt(s,e,t);break;case 1:if(!Ne&&(mn(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){ce(t,e,a)}Gt(s,e,t);break;case 21:Gt(s,e,t);break;case 22:t.mode&1?(Ne=(n=Ne)||t.memoizedState!==null,Gt(s,e,t),Ne=n):Gt(s,e,t);break;default:Gt(s,e,t)}}function od(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var t=s.stateNode;t===null&&(t=s.stateNode=new Xy),e.forEach(function(n){var i=iw.bind(null,s,n);t.has(n)||(t.add(n),n.then(i,i))})}}function lt(s,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var r=s,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:_e=a.stateNode,ct=!1;break e;case 3:_e=a.stateNode.containerInfo,ct=!0;break e;case 4:_e=a.stateNode.containerInfo,ct=!0;break e}a=a.return}if(_e===null)throw Error(N(160));Lm(r,o,i),_e=null,ct=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zm(e,s),e=e.sibling}function zm(s,e){var t=s.alternate,n=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(lt(e,s),wt(s),n&4){try{gi(3,s,s.return),Go(3,s)}catch(m){ce(s,s.return,m)}try{gi(5,s,s.return)}catch(m){ce(s,s.return,m)}}break;case 1:lt(e,s),wt(s),n&512&&t!==null&&mn(t,t.return);break;case 5:if(lt(e,s),wt(s),n&512&&t!==null&&mn(t,t.return),s.flags&32){var i=s.stateNode;try{ji(i,"")}catch(m){ce(s,s.return,m)}}if(n&4&&(i=s.stateNode,i!=null)){var r=s.memoizedProps,o=t!==null?t.memoizedProps:r,a=s.type,l=s.updateQueue;if(s.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&np(i,r),Ra(a,o);var u=Ra(a,r);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?ap(i,d):c==="dangerouslySetInnerHTML"?op(i,d):c==="children"?ji(i,d):Bu(i,c,d,u)}switch(a){case"input":ja(i,r);break;case"textarea":ip(i,r);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var v=r.value;v!=null?xn(i,!!r.multiple,v,!1):f!==!!r.multiple&&(r.defaultValue!=null?xn(i,!!r.multiple,r.defaultValue,!0):xn(i,!!r.multiple,r.multiple?[]:"",!1))}i[Oi]=r}catch(m){ce(s,s.return,m)}}break;case 6:if(lt(e,s),wt(s),n&4){if(s.stateNode===null)throw Error(N(162));i=s.stateNode,r=s.memoizedProps;try{i.nodeValue=r}catch(m){ce(s,s.return,m)}}break;case 3:if(lt(e,s),wt(s),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Mi(e.containerInfo)}catch(m){ce(s,s.return,m)}break;case 4:lt(e,s),wt(s);break;case 13:lt(e,s),wt(s),i=s.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(bc=he())),n&4&&od(s);break;case 22:if(c=t!==null&&t.memoizedState!==null,s.mode&1?(Ne=(u=Ne)||c,lt(e,s),Ne=u):lt(e,s),wt(s),n&8192){if(u=s.memoizedState!==null,(s.stateNode.isHidden=u)&&!c&&s.mode&1)for(R=s,c=s.child;c!==null;){for(d=R=c;R!==null;){switch(f=R,v=f.child,f.tag){case 0:case 11:case 14:case 15:gi(4,f,f.return);break;case 1:mn(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){ce(n,t,m)}}break;case 5:mn(f,f.return);break;case 22:if(f.memoizedState!==null){ad(d);continue}}v!==null?(v.return=f,R=v):ad(d)}c=c.sibling}e:for(c=null,d=s;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=lp("display",o))}catch(m){ce(s,s.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){ce(s,s.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===s)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:lt(e,s),wt(s),n&4&&od(s);break;case 21:break;default:lt(e,s),wt(s)}}function wt(s){var e=s.flags;if(e&2){try{e:{for(var t=s.return;t!==null;){if($m(t)){var n=t;break e}t=t.return}throw Error(N(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ji(i,""),n.flags&=-33);var r=rd(s);au(s,r,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=rd(s);lu(s,a,o);break;default:throw Error(N(161))}}catch(l){ce(s,s.return,l)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function Qy(s,e,t){R=s,Om(s)}function Om(s,e,t){for(var n=(s.mode&1)!==0;R!==null;){var i=R,r=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Nr;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ne;a=Nr;var u=Ne;if(Nr=o,(Ne=l)&&!u)for(R=i;R!==null;)o=R,l=o.child,o.tag===22&&o.memoizedState!==null?ud(i):l!==null?(l.return=o,R=l):ud(i);for(;r!==null;)R=r,Om(r),r=r.sibling;R=i,Nr=a,Ne=u}ld(s)}else i.subtreeFlags&8772&&r!==null?(r.return=i,R=r):ld(s)}}function ld(s){for(;R!==null;){var e=R;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ne||Go(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ne)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:ut(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Hh(e,r,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Hh(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Mi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ne||e.flags&512&&ou(e)}catch(f){ce(e,e.return,f)}}if(e===s){R=null;break}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}}function ad(s){for(;R!==null;){var e=R;if(e===s){R=null;break}var t=e.sibling;if(t!==null){t.return=e.return,R=t;break}R=e.return}}function ud(s){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Go(4,e)}catch(l){ce(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){ce(e,i,l)}}var r=e.return;try{ou(e)}catch(l){ce(e,r,l)}break;case 5:var o=e.return;try{ou(e)}catch(l){ce(e,o,l)}}}catch(l){ce(e,e.return,l)}if(e===s){R=null;break}var a=e.sibling;if(a!==null){a.return=e.return,R=a;break}R=e.return}}var Jy=Math.ceil,No=Kt.ReactCurrentDispatcher,wc=Kt.ReactCurrentOwner,st=Kt.ReactCurrentBatchConfig,V=0,be=null,pe=null,ke=0,Ve=0,gn=ys(0),we=0,Bi=null,Ds=0,Qo=0,xc=0,vi=null,Oe=null,bc=0,$n=1/0,Rt=null,To=!1,uu=null,hs=null,Tr=!1,rs=null,Po=0,yi=0,cu=null,to=-1,so=0;function Re(){return V&6?he():to!==-1?to:to=he()}function ds(s){return s.mode&1?V&2&&ke!==0?ke&-ke:Ly.transition!==null?(so===0&&(so=xp()),so):(s=X,s!==0||(s=window.event,s=s===void 0?16:jp(s.type)),s):1}function pt(s,e,t,n){if(50<yi)throw yi=0,cu=null,Error(N(185));Yi(s,t,n),(!(V&2)||s!==be)&&(s===be&&(!(V&2)&&(Qo|=t),we===4&&ss(s,ke)),Fe(s,n),t===1&&V===0&&!(e.mode&1)&&($n=he()+500,Ko&&ws()))}function Fe(s,e){var t=s.callbackNode;Lv(s,e);var n=fo(s,s===be?ke:0);if(n===0)t!==null&&yh(t),s.callbackNode=null,s.callbackPriority=0;else if(e=n&-n,s.callbackPriority!==e){if(t!=null&&yh(t),e===1)s.tag===0?$y(cd.bind(null,s)):Kp(cd.bind(null,s)),Ty(function(){!(V&6)&&ws()}),t=null;else{switch(bp(n)){case 1:t=qu;break;case 4:t=yp;break;case 16:t=ho;break;case 536870912:t=wp;break;default:t=ho}t=Vm(t,Dm.bind(null,s))}s.callbackPriority=e,s.callbackNode=t}}function Dm(s,e){if(to=-1,so=0,V&6)throw Error(N(327));var t=s.callbackNode;if(En()&&s.callbackNode!==t)return null;var n=fo(s,s===be?ke:0);if(n===0)return null;if(n&30||n&s.expiredLanes||e)e=Mo(s,n);else{e=n;var i=V;V|=2;var r=Im();(be!==s||ke!==e)&&(Rt=null,$n=he()+500,Ms(s,e));do try{ew();break}catch(a){Am(s,a)}while(!0);oc(),No.current=r,V=i,pe!==null?e=0:(be=null,ke=0,e=we)}if(e!==0){if(e===2&&(i=Da(s),i!==0&&(n=i,e=hu(s,i))),e===1)throw t=Bi,Ms(s,0),ss(s,n),Fe(s,he()),t;if(e===6)ss(s,n);else{if(i=s.current.alternate,!(n&30)&&!Yy(i)&&(e=Mo(s,n),e===2&&(r=Da(s),r!==0&&(n=r,e=hu(s,r))),e===1))throw t=Bi,Ms(s,0),ss(s,n),Fe(s,he()),t;switch(s.finishedWork=i,s.finishedLanes=n,e){case 0:case 1:throw Error(N(345));case 2:Es(s,Oe,Rt);break;case 3:if(ss(s,n),(n&130023424)===n&&(e=bc+500-he(),10<e)){if(fo(s,0)!==0)break;if(i=s.suspendedLanes,(i&n)!==n){Re(),s.pingedLanes|=s.suspendedLanes&i;break}s.timeoutHandle=Ha(Es.bind(null,s,Oe,Rt),e);break}Es(s,Oe,Rt);break;case 4:if(ss(s,n),(n&4194240)===n)break;for(e=s.eventTimes,i=-1;0<n;){var o=31-ft(n);r=1<<o,o=e[o],o>i&&(i=o),n&=~r}if(n=i,n=he()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Jy(n/1960))-n,10<n){s.timeoutHandle=Ha(Es.bind(null,s,Oe,Rt),n);break}Es(s,Oe,Rt);break;case 5:Es(s,Oe,Rt);break;default:throw Error(N(329))}}}return Fe(s,he()),s.callbackNode===t?Dm.bind(null,s):null}function hu(s,e){var t=vi;return s.current.memoizedState.isDehydrated&&(Ms(s,e).flags|=256),s=Mo(s,e),s!==2&&(e=Oe,Oe=t,e!==null&&du(e)),s}function du(s){Oe===null?Oe=s:Oe.push.apply(Oe,s)}function Yy(s){for(var e=s;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],r=i.getSnapshot;i=i.value;try{if(!mt(r(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ss(s,e){for(e&=~xc,e&=~Qo,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var t=31-ft(e),n=1<<t;s[t]=-1,e&=~n}}function cd(s){if(V&6)throw Error(N(327));En();var e=fo(s,0);if(!(e&1))return Fe(s,he()),null;var t=Mo(s,e);if(s.tag!==0&&t===2){var n=Da(s);n!==0&&(e=n,t=hu(s,n))}if(t===1)throw t=Bi,Ms(s,0),ss(s,e),Fe(s,he()),t;if(t===6)throw Error(N(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Es(s,Oe,Rt),Fe(s,he()),null}function _c(s,e){var t=V;V|=1;try{return s(e)}finally{V=t,V===0&&($n=he()+500,Ko&&ws())}}function As(s){rs!==null&&rs.tag===0&&!(V&6)&&En();var e=V;V|=1;var t=st.transition,n=X;try{if(st.transition=null,X=1,s)return s()}finally{X=n,st.transition=t,V=e,!(V&6)&&ws()}}function Sc(){Ve=gn.current,te(gn)}function Ms(s,e){s.finishedWork=null,s.finishedLanes=0;var t=s.timeoutHandle;if(t!==-1&&(s.timeoutHandle=-1,Ny(t)),pe!==null)for(t=pe.return;t!==null;){var n=t;switch(nc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&yo();break;case 3:Mn(),te(Ie),te(Te),dc();break;case 5:hc(n);break;case 4:Mn();break;case 13:te(re);break;case 19:te(re);break;case 10:lc(n.type._context);break;case 22:case 23:Sc()}t=t.return}if(be=s,pe=s=fs(s.current,null),ke=Ve=e,we=0,Bi=null,xc=Qo=Ds=0,Oe=vi=null,Ts!==null){for(e=0;e<Ts.length;e++)if(t=Ts[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,r=t.pending;if(r!==null){var o=r.next;r.next=i,n.next=o}t.pending=n}Ts=null}return s}function Am(s,e){do{var t=pe;try{if(oc(),Yr.current=jo,Co){for(var n=oe.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Co=!1}if(Os=0,xe=ye=oe=null,mi=!1,Ii=0,wc.current=null,t===null||t.return===null){we=1,Bi=e,pe=null;break}e:{var r=s,o=t.return,a=t,l=e;if(e=ke,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=Jh(o);if(v!==null){v.flags&=-257,Yh(v,o,a,r,e),v.mode&1&&Qh(r,u,e),e=v,l=u;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Qh(r,u,e),kc();break e}l=Error(N(426))}}else if(ne&&a.mode&1){var x=Jh(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Yh(x,o,a,r,e),ic(Rn(l,a));break e}}r=l=Rn(l,a),we!==4&&(we=2),vi===null?vi=[r]:vi.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=bm(r,l,e);Vh(r,g);break e;case 1:a=l;var w=r.type,y=r.stateNode;if(!(r.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(hs===null||!hs.has(y)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=_m(r,a,e);Vh(r,b);break e}}r=r.return}while(r!==null)}Fm(t)}catch(S){e=S,pe===t&&t!==null&&(pe=t=t.return);continue}break}while(!0)}function Im(){var s=No.current;return No.current=jo,s===null?jo:s}function kc(){(we===0||we===3||we===2)&&(we=4),be===null||!(Ds&268435455)&&!(Qo&268435455)||ss(be,ke)}function Mo(s,e){var t=V;V|=2;var n=Im();(be!==s||ke!==e)&&(Rt=null,Ms(s,e));do try{Zy();break}catch(i){Am(s,i)}while(!0);if(oc(),V=t,No.current=n,pe!==null)throw Error(N(261));return be=null,ke=0,we}function Zy(){for(;pe!==null;)Um(pe)}function ew(){for(;pe!==null&&!Ev();)Um(pe)}function Um(s){var e=Wm(s.alternate,s,Ve);s.memoizedProps=s.pendingProps,e===null?Fm(s):pe=e,wc.current=null}function Fm(s){var e=s;do{var t=e.alternate;if(s=e.return,e.flags&32768){if(t=qy(t,e),t!==null){t.flags&=32767,pe=t;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{we=6,pe=null;return}}else if(t=Ky(t,e,Ve),t!==null){pe=t;return}if(e=e.sibling,e!==null){pe=e;return}pe=e=s}while(e!==null);we===0&&(we=5)}function Es(s,e,t){var n=X,i=st.transition;try{st.transition=null,X=1,tw(s,e,t,n)}finally{st.transition=i,X=n}return null}function tw(s,e,t,n){do En();while(rs!==null);if(V&6)throw Error(N(327));t=s.finishedWork;var i=s.finishedLanes;if(t===null)return null;if(s.finishedWork=null,s.finishedLanes=0,t===s.current)throw Error(N(177));s.callbackNode=null,s.callbackPriority=0;var r=t.lanes|t.childLanes;if(zv(s,r),s===be&&(pe=be=null,ke=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Tr||(Tr=!0,Vm(ho,function(){return En(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=st.transition,st.transition=null;var o=X;X=1;var a=V;V|=4,wc.current=null,Gy(s,t),zm(t,s),by(Wa),po=!!Ba,Wa=Ba=null,s.current=t,Qy(t),Cv(),V=a,X=o,st.transition=r}else s.current=t;if(Tr&&(Tr=!1,rs=s,Po=i),r=s.pendingLanes,r===0&&(hs=null),Tv(t.stateNode),Fe(s,he()),e!==null)for(n=s.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(To)throw To=!1,s=uu,uu=null,s;return Po&1&&s.tag!==0&&En(),r=s.pendingLanes,r&1?s===cu?yi++:(yi=0,cu=s):yi=0,ws(),null}function En(){if(rs!==null){var s=bp(Po),e=st.transition,t=X;try{if(st.transition=null,X=16>s?16:s,rs===null)var n=!1;else{if(s=rs,rs=null,Po=0,V&6)throw Error(N(331));var i=V;for(V|=4,R=s.current;R!==null;){var r=R,o=r.child;if(R.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(R=u;R!==null;){var c=R;switch(c.tag){case 0:case 11:case 15:gi(8,c,r)}var d=c.child;if(d!==null)d.return=c,R=d;else for(;R!==null;){c=R;var f=c.sibling,v=c.return;if(Rm(c),c===u){R=null;break}if(f!==null){f.return=v,R=f;break}R=v}}}var p=r.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var x=m.sibling;m.sibling=null,m=x}while(m!==null)}}R=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,R=o;else e:for(;R!==null;){if(r=R,r.flags&2048)switch(r.tag){case 0:case 11:case 15:gi(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,R=g;break e}R=r.return}}var w=s.current;for(R=w;R!==null;){o=R;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,R=y;else e:for(o=w;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Go(9,a)}}catch(S){ce(a,a.return,S)}if(a===o){R=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,R=b;break e}R=a.return}}if(V=i,ws(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(Fo,s)}catch{}n=!0}return n}finally{X=t,st.transition=e}}return!1}function hd(s,e,t){e=Rn(t,e),e=bm(s,e,1),s=cs(s,e,1),e=Re(),s!==null&&(Yi(s,1,e),Fe(s,e))}function ce(s,e,t){if(s.tag===3)hd(s,s,t);else for(;e!==null;){if(e.tag===3){hd(e,s,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(hs===null||!hs.has(n))){s=Rn(t,s),s=_m(e,s,1),e=cs(e,s,1),s=Re(),e!==null&&(Yi(e,1,s),Fe(e,s));break}}e=e.return}}function sw(s,e,t){var n=s.pingCache;n!==null&&n.delete(e),e=Re(),s.pingedLanes|=s.suspendedLanes&t,be===s&&(ke&t)===t&&(we===4||we===3&&(ke&130023424)===ke&&500>he()-bc?Ms(s,0):xc|=t),Fe(s,e)}function Bm(s,e){e===0&&(s.mode&1?(e=wr,wr<<=1,!(wr&130023424)&&(wr=4194304)):e=1);var t=Re();s=Wt(s,e),s!==null&&(Yi(s,e,t),Fe(s,t))}function nw(s){var e=s.memoizedState,t=0;e!==null&&(t=e.retryLane),Bm(s,t)}function iw(s,e){var t=0;switch(s.tag){case 13:var n=s.stateNode,i=s.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=s.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(e),Bm(s,t)}var Wm;Wm=function(s,e,t){if(s!==null)if(s.memoizedProps!==e.pendingProps||Ie.current)Ae=!0;else{if(!(s.lanes&t)&&!(e.flags&128))return Ae=!1,Hy(s,e,t);Ae=!!(s.flags&131072)}else Ae=!1,ne&&e.flags&1048576&&qp(e,bo,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;eo(s,e),s=e.pendingProps;var i=Nn(e,Te.current);kn(e,t),i=pc(null,e,n,s,i,t);var r=mc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(n)?(r=!0,wo(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uc(e),i.updater=Xo,e.stateNode=i,i._reactInternals=e,Ya(e,n,s,t),e=tu(null,e,n,!0,r,t)):(e.tag=0,ne&&r&&sc(e),Me(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(eo(s,e),s=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=ow(n),s=ut(n,s),i){case 0:e=eu(null,e,n,s,t);break e;case 1:e=td(null,e,n,s,t);break e;case 11:e=Zh(null,e,n,s,t);break e;case 14:e=ed(null,e,n,ut(n.type,s),t);break e}throw Error(N(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ut(n,i),eu(s,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ut(n,i),td(s,e,n,i,t);case 3:e:{if(Cm(e),s===null)throw Error(N(387));n=e.pendingProps,r=e.memoizedState,i=r.element,Zp(s,e),ko(e,n,null,t);var o=e.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Rn(Error(N(423)),e),e=sd(s,e,n,t,i);break e}else if(n!==i){i=Rn(Error(N(424)),e),e=sd(s,e,n,t,i);break e}else for(He=us(e.stateNode.containerInfo.firstChild),Ke=e,ne=!0,dt=null,t=Jp(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Tn(),n===i){e=Vt(s,e,t);break e}Me(s,e,n,t)}e=e.child}return e;case 5:return em(e),s===null&&Ga(e),n=e.type,i=e.pendingProps,r=s!==null?s.memoizedProps:null,o=i.children,Va(n,i)?o=null:r!==null&&Va(n,r)&&(e.flags|=32),Em(s,e),Me(s,e,o,t),e.child;case 6:return s===null&&Ga(e),null;case 13:return jm(s,e,t);case 4:return cc(e,e.stateNode.containerInfo),n=e.pendingProps,s===null?e.child=Pn(e,null,n,t):Me(s,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ut(n,i),Zh(s,e,n,i,t);case 7:return Me(s,e,e.pendingProps,t),e.child;case 8:return Me(s,e,e.pendingProps.children,t),e.child;case 12:return Me(s,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,Y(_o,n._currentValue),n._currentValue=o,r!==null)if(mt(r.value,o)){if(r.children===i.children&&!Ie.current){e=Vt(s,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(r.tag===1){l=It(-1,t&-t),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}r.lanes|=t,l=r.alternate,l!==null&&(l.lanes|=t),Qa(r.return,t,e),a.lanes|=t;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(N(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Qa(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Me(s,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,kn(e,t),i=it(i),n=n(i),e.flags|=1,Me(s,e,n,t),e.child;case 14:return n=e.type,i=ut(n,e.pendingProps),i=ut(n.type,i),ed(s,e,n,i,t);case 15:return Sm(s,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ut(n,i),eo(s,e),e.tag=1,Ue(n)?(s=!0,wo(e)):s=!1,kn(e,t),xm(e,n,i),Ya(e,n,i,t),tu(null,e,n,!0,s,t);case 19:return Nm(s,e,t);case 22:return km(s,e,t)}throw Error(N(156,e.tag))};function Vm(s,e){return vp(s,e)}function rw(s,e,t,n){this.tag=s,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tt(s,e,t,n){return new rw(s,e,t,n)}function Ec(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ow(s){if(typeof s=="function")return Ec(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Vu)return 11;if(s===Hu)return 14}return 2}function fs(s,e){var t=s.alternate;return t===null?(t=tt(s.tag,e,s.key,s.mode),t.elementType=s.elementType,t.type=s.type,t.stateNode=s.stateNode,t.alternate=s,s.alternate=t):(t.pendingProps=e,t.type=s.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=s.flags&14680064,t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,e=s.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=s.sibling,t.index=s.index,t.ref=s.ref,t}function no(s,e,t,n,i,r){var o=2;if(n=s,typeof s=="function")Ec(s)&&(o=1);else if(typeof s=="string")o=5;else e:switch(s){case on:return Rs(t.children,i,r,e);case Wu:o=8,i|=8;break;case _a:return s=tt(12,t,e,i|2),s.elementType=_a,s.lanes=r,s;case Sa:return s=tt(13,t,e,i),s.elementType=Sa,s.lanes=r,s;case ka:return s=tt(19,t,e,i),s.elementType=ka,s.lanes=r,s;case ep:return Jo(t,i,r,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Yf:o=10;break e;case Zf:o=9;break e;case Vu:o=11;break e;case Hu:o=14;break e;case Zt:o=16,n=null;break e}throw Error(N(130,s==null?s:typeof s,""))}return e=tt(o,t,e,i),e.elementType=s,e.type=n,e.lanes=r,e}function Rs(s,e,t,n){return s=tt(7,s,n,e),s.lanes=t,s}function Jo(s,e,t,n){return s=tt(22,s,n,e),s.elementType=ep,s.lanes=t,s.stateNode={isHidden:!1},s}function Hl(s,e,t){return s=tt(6,s,null,e),s.lanes=t,s}function Kl(s,e,t){return e=tt(4,s.children!==null?s.children:[],s.key,e),e.lanes=t,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function lw(s,e,t,n,i){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cl(0),this.expirationTimes=Cl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cc(s,e,t,n,i,r,o,a,l){return s=new lw(s,e,t,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=tt(3,null,null,e),s.current=r,r.stateNode=s,r.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(r),s}function aw(s,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rn,key:n==null?null:""+n,children:s,containerInfo:e,implementation:t}}function Hm(s){if(!s)return ms;s=s._reactInternals;e:{if(Hs(s)!==s||s.tag!==1)throw Error(N(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(s.tag===1){var t=s.type;if(Ue(t))return Hp(s,t,e)}return e}function Km(s,e,t,n,i,r,o,a,l){return s=Cc(t,n,!0,s,i,r,o,a,l),s.context=Hm(null),t=s.current,n=Re(),i=ds(t),r=It(n,i),r.callback=e??null,cs(t,r,i),s.current.lanes=i,Yi(s,i,n),Fe(s,n),s}function Yo(s,e,t,n){var i=e.current,r=Re(),o=ds(i);return t=Hm(t),e.context===null?e.context=t:e.pendingContext=t,e=It(r,o),e.payload={element:s},n=n===void 0?null:n,n!==null&&(e.callback=n),s=cs(i,e,o),s!==null&&(pt(s,i,o,r),Jr(s,i,o)),o}function Ro(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function dd(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var t=s.retryLane;s.retryLane=t!==0&&t<e?t:e}}function jc(s,e){dd(s,e),(s=s.alternate)&&dd(s,e)}function uw(){return null}var qm=typeof reportError=="function"?reportError:function(s){console.error(s)};function Nc(s){this._internalRoot=s}Zo.prototype.render=Nc.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(N(409));Yo(s,e,null,null)};Zo.prototype.unmount=Nc.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;As(function(){Yo(null,s,null,null)}),e[Bt]=null}};function Zo(s){this._internalRoot=s}Zo.prototype.unstable_scheduleHydration=function(s){if(s){var e=kp();s={blockedOn:null,target:s,priority:e};for(var t=0;t<ts.length&&e!==0&&e<ts[t].priority;t++);ts.splice(t,0,s),t===0&&Cp(s)}};function Tc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function el(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function fd(){}function cw(s,e,t,n,i){if(i){if(typeof n=="function"){var r=n;n=function(){var u=Ro(o);r.call(u)}}var o=Km(e,n,s,0,null,!1,!1,"",fd);return s._reactRootContainer=o,s[Bt]=o.current,Li(s.nodeType===8?s.parentNode:s),As(),o}for(;i=s.lastChild;)s.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Ro(l);a.call(u)}}var l=Cc(s,0,!1,null,null,!1,!1,"",fd);return s._reactRootContainer=l,s[Bt]=l.current,Li(s.nodeType===8?s.parentNode:s),As(function(){Yo(e,l,t,n)}),l}function tl(s,e,t,n,i){var r=t._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var l=Ro(o);a.call(l)}}Yo(e,o,s,i)}else o=cw(t,e,s,i,n);return Ro(o)}_p=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var t=li(e.pendingLanes);t!==0&&(Xu(e,t|1),Fe(e,he()),!(V&6)&&($n=he()+500,ws()))}break;case 13:As(function(){var n=Wt(s,1);if(n!==null){var i=Re();pt(n,s,1,i)}}),jc(s,1)}};Gu=function(s){if(s.tag===13){var e=Wt(s,134217728);if(e!==null){var t=Re();pt(e,s,134217728,t)}jc(s,134217728)}};Sp=function(s){if(s.tag===13){var e=ds(s),t=Wt(s,e);if(t!==null){var n=Re();pt(t,s,e,n)}jc(s,e)}};kp=function(){return X};Ep=function(s,e){var t=X;try{return X=s,e()}finally{X=t}};La=function(s,e,t){switch(e){case"input":if(ja(s,t),e=t.name,t.type==="radio"&&e!=null){for(t=s;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==s&&n.form===s.form){var i=Ho(n);if(!i)throw Error(N(90));sp(n),ja(n,i)}}}break;case"textarea":ip(s,t);break;case"select":e=t.value,e!=null&&xn(s,!!t.multiple,e,!1)}};hp=_c;dp=As;var hw={usingClientEntryPoint:!1,Events:[er,cn,Ho,up,cp,_c]},Zn={findFiberByHostInstance:Ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dw={bundleType:Zn.bundleType,version:Zn.version,rendererPackageName:Zn.rendererPackageName,rendererConfig:Zn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=mp(s),s===null?null:s.stateNode},findFiberByHostInstance:Zn.findFiberByHostInstance||uw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pr.isDisabled&&Pr.supportsFiber)try{Fo=Pr.inject(dw),Ct=Pr}catch{}}Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hw;Xe.createPortal=function(s,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tc(e))throw Error(N(200));return aw(s,e,null,t)};Xe.createRoot=function(s,e){if(!Tc(s))throw Error(N(299));var t=!1,n="",i=qm;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Cc(s,1,!1,null,null,t,!1,n,i),s[Bt]=e.current,Li(s.nodeType===8?s.parentNode:s),new Nc(e)};Xe.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(N(188)):(s=Object.keys(s).join(","),Error(N(268,s)));return s=mp(e),s=s===null?null:s.stateNode,s};Xe.flushSync=function(s){return As(s)};Xe.hydrate=function(s,e,t){if(!el(e))throw Error(N(200));return tl(null,s,e,!0,t)};Xe.hydrateRoot=function(s,e,t){if(!Tc(s))throw Error(N(405));var n=t!=null&&t.hydratedSources||null,i=!1,r="",o=qm;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Km(e,null,s,1,t??null,i,!1,r,o),s[Bt]=e.current,Li(s),n)for(s=0;s<n.length;s++)t=n[s],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Zo(e)};Xe.render=function(s,e,t){if(!el(e))throw Error(N(200));return tl(null,s,e,!1,t)};Xe.unmountComponentAtNode=function(s){if(!el(s))throw Error(N(40));return s._reactRootContainer?(As(function(){tl(null,null,s,!1,function(){s._reactRootContainer=null,s[Bt]=null})}),!0):!1};Xe.unstable_batchedUpdates=_c;Xe.unstable_renderSubtreeIntoContainer=function(s,e,t,n){if(!el(t))throw Error(N(200));if(s==null||s._reactInternals===void 0)throw Error(N(38));return tl(s,e,t,!1,n)};Xe.version="18.3.1-next-f1338f8080-20240426";function Xm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xm)}catch(s){console.error(s)}}Xm(),Xf.exports=Xe;var fw=Xf.exports,Gm,pd=fw;Gm=pd.createRoot,pd.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var md="popstate";function pw(s={}){function e(n,i){let{pathname:r,search:o,hash:a}=n.location;return fu("",{pathname:r,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(n,i){return typeof i=="string"?i:Wi(i)}return gw(e,t,null,s)}function le(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Nt(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mw(){return Math.random().toString(36).substring(2,10)}function gd(s,e){return{usr:s.state,key:s.key,idx:e}}function fu(s,e,t=null,n){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Fn(e):e,state:t,key:e&&e.key||n||mw()}}function Wi({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Fn(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let n=s.indexOf("?");n>=0&&(e.search=s.substring(n),s=s.substring(0,n)),s&&(e.pathname=s)}return e}function gw(s,e,t,n={}){let{window:i=document.defaultView,v5Compat:r=!1}=n,o=i.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let x=c(),g=x==null?null:x-u;u=x,l&&l({action:a,location:m.location,delta:g})}function f(x,g){a="PUSH";let w=fu(m.location,x,g);u=c()+1;let y=gd(w,u),b=m.createHref(w);try{o.pushState(y,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}r&&l&&l({action:a,location:m.location,delta:1})}function v(x,g){a="REPLACE";let w=fu(m.location,x,g);u=c();let y=gd(w,u),b=m.createHref(w);o.replaceState(y,"",b),r&&l&&l({action:a,location:m.location,delta:0})}function p(x){return vw(x)}let m={get action(){return a},get location(){return s(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(md,d),l=x,()=>{i.removeEventListener(md,d),l=null}},createHref(x){return e(i,x)},createURL:p,encodeLocation(x){let g=p(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:v,go(x){return o.go(x)}};return m}function vw(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),le(t,"No window.location.(origin|href) available to create URL");let n=typeof s=="string"?s:Wi(s);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function Qm(s,e,t="/"){return yw(s,e,t,!1)}function yw(s,e,t,n){let i=typeof e=="string"?Fn(e):e,r=Ht(i.pathname||"/",t);if(r==null)return null;let o=Jm(s);ww(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Pw(r);a=Nw(o[l],u,n)}return a}function Jm(s,e=[],t=[],n="",i=!1){let r=(o,a,l=i,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(n)&&l)return;le(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length)}let d=Ut([n,c.relativePath]),f=t.concat(c);o.children&&o.children.length>0&&(le(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Jm(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:Cw(d,o.index),routesMeta:f})};return s.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,a);else for(let u of Ym(o.path))r(o,a,!0,u)}),e}function Ym(s){let e=s.split("/");if(e.length===0)return[];let[t,...n]=e,i=t.endsWith("?"),r=t.replace(/\?$/,"");if(n.length===0)return i?[r,""]:[r];let o=Ym(n.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),i&&a.push(...o),a.map(l=>s.startsWith("/")&&l===""?"/":l)}function ww(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:jw(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var xw=/^:[\w-]+$/,bw=3,_w=2,Sw=1,kw=10,Ew=-2,vd=s=>s==="*";function Cw(s,e){let t=s.split("/"),n=t.length;return t.some(vd)&&(n+=Ew),e&&(n+=_w),t.filter(i=>!vd(i)).reduce((i,r)=>i+(xw.test(r)?bw:r===""?Sw:kw),n)}function jw(s,e){return s.length===e.length&&s.slice(0,-1).every((n,i)=>n===e[i])?s[s.length-1]-e[e.length-1]:0}function Nw(s,e,t=!1){let{routesMeta:n}=s,i={},r="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,c=r==="/"?e:e.slice(r.length)||"/",d=$o({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&t&&!n[n.length-1].route.index&&(d=$o({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Ut([r,d.pathname]),pathnameBase:Lw(Ut([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Ut([r,d.pathnameBase]))}return o}function $o(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,n]=Tw(s.path,s.caseSensitive,s.end),i=e.match(t);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((u,{paramName:c,isOptional:d},f)=>{if(c==="*"){let p=a[f]||"";o=r.slice(0,r.length-p.length).replace(/(.)\/+$/,"$1")}const v=a[f];return d&&!v?u[c]=void 0:u[c]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:o,pattern:s}}function Tw(s,e=!1,t=!0){Nt(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let n=[],i="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(n.push({paramName:"*"}),i+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":s!==""&&s!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function Pw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Nt(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ht(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=s.charAt(t);return n&&n!=="/"?null:s.slice(t)||"/"}function Mw(s,e="/"){let{pathname:t,search:n="",hash:i=""}=typeof s=="string"?Fn(s):s;return{pathname:t?t.startsWith("/")?t:Rw(t,e):e,search:zw(n),hash:Ow(i)}}function Rw(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function ql(s,e,t,n){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $w(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Zm(s){let e=$w(s);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function eg(s,e,t,n=!1){let i;typeof s=="string"?i=Fn(s):(i={...s},le(!i.pathname||!i.pathname.includes("?"),ql("?","pathname","search",i)),le(!i.pathname||!i.pathname.includes("#"),ql("#","pathname","hash",i)),le(!i.search||!i.search.includes("#"),ql("#","search","hash",i)));let r=s===""||i.pathname==="",o=r?"/":i.pathname,a;if(o==null)a=t;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Mw(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Ut=s=>s.join("/").replace(/\/\/+/g,"/"),Lw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),zw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Ow=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Dw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var tg=["POST","PUT","PATCH","DELETE"];new Set(tg);var Aw=["GET",...tg];new Set(Aw);var Bn=_.createContext(null);Bn.displayName="DataRouter";var sl=_.createContext(null);sl.displayName="DataRouterState";_.createContext(!1);var sg=_.createContext({isTransitioning:!1});sg.displayName="ViewTransition";var Iw=_.createContext(new Map);Iw.displayName="Fetchers";var Uw=_.createContext(null);Uw.displayName="Await";var Tt=_.createContext(null);Tt.displayName="Navigation";var sr=_.createContext(null);sr.displayName="Location";var qt=_.createContext({outlet:null,matches:[],isDataRoute:!1});qt.displayName="Route";var Pc=_.createContext(null);Pc.displayName="RouteError";function Fw(s,{relative:e}={}){le(nr(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=_.useContext(Tt),{hash:i,pathname:r,search:o}=ir(s,{relative:e}),a=r;return t!=="/"&&(a=r==="/"?t:Ut([t,r])),n.createHref({pathname:a,search:o,hash:i})}function nr(){return _.useContext(sr)!=null}function Ks(){return le(nr(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(sr).location}var ng="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ig(s){_.useContext(Tt).static||_.useLayoutEffect(s)}function Bw(){let{isDataRoute:s}=_.useContext(qt);return s?t1():Ww()}function Ww(){le(nr(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(Bn),{basename:e,navigator:t}=_.useContext(Tt),{matches:n}=_.useContext(qt),{pathname:i}=Ks(),r=JSON.stringify(Zm(n)),o=_.useRef(!1);return ig(()=>{o.current=!0}),_.useCallback((l,u={})=>{if(Nt(o.current,ng),!o.current)return;if(typeof l=="number"){t.go(l);return}let c=eg(l,JSON.parse(r),i,u.relative==="path");s==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Ut([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,r,i,s])}_.createContext(null);function ir(s,{relative:e}={}){let{matches:t}=_.useContext(qt),{pathname:n}=Ks(),i=JSON.stringify(Zm(t));return _.useMemo(()=>eg(s,JSON.parse(i),n,e==="path"),[s,i,n,e])}function Vw(s,e){return rg(s,e)}function rg(s,e,t,n){var g;le(nr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Tt),{matches:r}=_.useContext(qt),o=r[r.length-1],a=o?o.params:{},l=o?o.pathname:"/",u=o?o.pathnameBase:"/",c=o&&o.route;{let w=c&&c.path||"";og(l,!c||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let d=Ks(),f;if(e){let w=typeof e=="string"?Fn(e):e;le(u==="/"||((g=w.pathname)==null?void 0:g.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),f=w}else f=d;let v=f.pathname||"/",p=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");p="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let m=Qm(s,{pathname:p});Nt(c||m!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Nt(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=Gw(m&&m.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ut([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Ut([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),r,t,n);return e&&x?_.createElement(sr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},x):x}function Hw(){let s=e1(),e=Dw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",s),o=_.createElement(_.Fragment,null,_.createElement("p",null,"💿 Hey developer 👋"),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:r},"ErrorBoundary")," or"," ",_.createElement("code",{style:r},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),t?_.createElement("pre",{style:i},t):null,o)}var Kw=_.createElement(Hw,null),qw=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){console.error("React Router caught the following error during render",s,e)}render(){return this.state.error!==void 0?_.createElement(qt.Provider,{value:this.props.routeContext},_.createElement(Pc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xw({routeContext:s,match:e,children:t}){let n=_.useContext(Bn);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(qt.Provider,{value:s},t)}function Gw(s,e=[],t=null,n=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let i=s,r=t==null?void 0:t.errors;if(r!=null){let l=i.findIndex(u=>u.route.id&&(r==null?void 0:r[u.route.id])!==void 0);le(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let o=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:d}=t,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!d||d[u.route.id]===void 0);if(u.route.lazy||f){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let d,f=!1,v=null,p=null;t&&(d=r&&u.route.id?r[u.route.id]:void 0,v=u.route.errorElement||Kw,o&&(a<0&&c===0?(og("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):a===c&&(f=!0,p=u.route.hydrateFallbackElement||null)));let m=e.concat(i.slice(0,c+1)),x=()=>{let g;return d?g=v:f?g=p:u.route.Component?g=_.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=l,_.createElement(Xw,{match:u,routeContext:{outlet:l,matches:m,isDataRoute:t!=null},children:g})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?_.createElement(qw,{location:t.location,revalidation:t.revalidation,component:v,error:d,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}function Mc(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qw(s){let e=_.useContext(Bn);return le(e,Mc(s)),e}function Jw(s){let e=_.useContext(sl);return le(e,Mc(s)),e}function Yw(s){let e=_.useContext(qt);return le(e,Mc(s)),e}function Rc(s){let e=Yw(s),t=e.matches[e.matches.length-1];return le(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function Zw(){return Rc("useRouteId")}function e1(){var n;let s=_.useContext(Pc),e=Jw("useRouteError"),t=Rc("useRouteError");return s!==void 0?s:(n=e.errors)==null?void 0:n[t]}function t1(){let{router:s}=Qw("useNavigate"),e=Rc("useNavigate"),t=_.useRef(!1);return ig(()=>{t.current=!0}),_.useCallback(async(i,r={})=>{Nt(t.current,ng),t.current&&(typeof i=="number"?s.navigate(i):await s.navigate(i,{fromRouteId:e,...r}))},[s,e])}var yd={};function og(s,e,t){!e&&!yd[s]&&(yd[s]=!0,Nt(!1,t))}_.memo(s1);function s1({routes:s,future:e,state:t}){return rg(s,void 0,t,e)}function pu(s){le(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function n1({basename:s="/",children:e=null,location:t,navigationType:n="POP",navigator:i,static:r=!1}){le(!nr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=s.replace(/^\/*/,"/"),a=_.useMemo(()=>({basename:o,navigator:i,static:r,future:{}}),[o,i,r]);typeof t=="string"&&(t=Fn(t));let{pathname:l="/",search:u="",hash:c="",state:d=null,key:f="default"}=t,v=_.useMemo(()=>{let p=Ht(l,o);return p==null?null:{location:{pathname:p,search:u,hash:c,state:d,key:f},navigationType:n}},[o,l,u,c,d,f,n]);return Nt(v!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:_.createElement(Tt.Provider,{value:a},_.createElement(sr.Provider,{children:e,value:v}))}function i1({children:s,location:e}){return Vw(mu(s),e)}function mu(s,e=[]){let t=[];return _.Children.forEach(s,(n,i)=>{if(!_.isValidElement(n))return;let r=[...e,i];if(n.type===_.Fragment){t.push.apply(t,mu(n.props.children,r));return}le(n.type===pu,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),le(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=mu(n.props.children,r)),t.push(o)}),t}var io="get",ro="application/x-www-form-urlencoded";function nl(s){return s!=null&&typeof s.tagName=="string"}function r1(s){return nl(s)&&s.tagName.toLowerCase()==="button"}function o1(s){return nl(s)&&s.tagName.toLowerCase()==="form"}function l1(s){return nl(s)&&s.tagName.toLowerCase()==="input"}function a1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function u1(s,e){return s.button===0&&(!e||e==="_self")&&!a1(s)}var Mr=null;function c1(){if(Mr===null)try{new FormData(document.createElement("form"),0),Mr=!1}catch{Mr=!0}return Mr}var h1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xl(s){return s!=null&&!h1.has(s)?(Nt(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ro}"`),null):s}function d1(s,e){let t,n,i,r,o;if(o1(s)){let a=s.getAttribute("action");n=a?Ht(a,e):null,t=s.getAttribute("method")||io,i=Xl(s.getAttribute("enctype"))||ro,r=new FormData(s)}else if(r1(s)||l1(s)&&(s.type==="submit"||s.type==="image")){let a=s.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=s.getAttribute("formaction")||a.getAttribute("action");if(n=l?Ht(l,e):null,t=s.getAttribute("formmethod")||a.getAttribute("method")||io,i=Xl(s.getAttribute("formenctype"))||Xl(a.getAttribute("enctype"))||ro,r=new FormData(a,s),!c1()){let{name:u,type:c,value:d}=s;if(c==="image"){let f=u?`${u}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else u&&r.append(u,d)}}else{if(nl(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=io,n=null,i=ro,o=s}return r&&i==="text/plain"&&(o=r,r=void 0),{action:n,method:t.toLowerCase(),encType:i,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $c(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function f1(s,e,t){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Ht(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function p1(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function m1(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function g1(s,e,t){let n=await Promise.all(s.map(async i=>{let r=e.routes[i.route.id];if(r){let o=await p1(r,t);return o.links?o.links():[]}return[]}));return x1(n.flat(1).filter(m1).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function wd(s,e,t,n,i,r){let o=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):r==="data"?e.filter((l,u)=>{var d;let c=n.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((d=t[0])==null?void 0:d.params)||{},nextUrl:new URL(s,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function v1(s,e,{includeHydrateFallback:t}={}){return y1(s.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function y1(s){return[...new Set(s)]}function w1(s){let e={},t=Object.keys(s).sort();for(let n of t)e[n]=s[n];return e}function x1(s,e){let t=new Set;return new Set(e),s.reduce((n,i)=>{let r=JSON.stringify(w1(i));return t.has(r)||(t.add(r),n.push({key:r,link:i})),n},[])}function lg(){let s=_.useContext(Bn);return $c(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function b1(){let s=_.useContext(sl);return $c(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Lc=_.createContext(void 0);Lc.displayName="FrameworkContext";function ag(){let s=_.useContext(Lc);return $c(s,"You must render this element inside a <HydratedRouter> element"),s}function _1(s,e){let t=_.useContext(Lc),[n,i]=_.useState(!1),[r,o]=_.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,f=_.useRef(null);_.useEffect(()=>{if(s==="render"&&o(!0),s==="viewport"){let m=g=>{g.forEach(w=>{o(w.isIntersecting)})},x=new IntersectionObserver(m,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[s]),_.useEffect(()=>{if(n){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[n]);let v=()=>{i(!0)},p=()=>{i(!1),o(!1)};return t?s!=="intent"?[r,f,{}]:[r,f,{onFocus:ei(a,v),onBlur:ei(l,p),onMouseEnter:ei(u,v),onMouseLeave:ei(c,p),onTouchStart:ei(d,v)}]:[!1,f,{}]}function ei(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function S1({page:s,...e}){let{router:t}=lg(),n=_.useMemo(()=>Qm(t.routes,s,t.basename),[t.routes,s,t.basename]);return n?_.createElement(E1,{page:s,matches:n,...e}):null}function k1(s){let{manifest:e,routeModules:t}=ag(),[n,i]=_.useState([]);return _.useEffect(()=>{let r=!1;return g1(s,e,t).then(o=>{r||i(o)}),()=>{r=!0}},[s,e,t]),n}function E1({page:s,matches:e,...t}){let n=Ks(),{manifest:i,routeModules:r}=ag(),{basename:o}=lg(),{loaderData:a,matches:l}=b1(),u=_.useMemo(()=>wd(s,e,l,i,n,"data"),[s,e,l,i,n]),c=_.useMemo(()=>wd(s,e,l,i,n,"assets"),[s,e,l,i,n]),d=_.useMemo(()=>{if(s===n.pathname+n.search+n.hash)return[];let p=new Set,m=!1;if(e.forEach(g=>{var y;let w=i.routes[g.route.id];!w||!w.hasLoader||(!u.some(b=>b.route.id===g.route.id)&&g.route.id in a&&((y=r[g.route.id])!=null&&y.shouldRevalidate)||w.hasClientLoader?m=!0:p.add(g.route.id))}),p.size===0)return[];let x=f1(s,o,"data");return m&&p.size>0&&x.searchParams.set("_routes",e.filter(g=>p.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[o,a,n,i,u,e,s,r]),f=_.useMemo(()=>v1(c,i),[c,i]),v=k1(c);return _.createElement(_.Fragment,null,d.map(p=>_.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...t})),f.map(p=>_.createElement("link",{key:p,rel:"modulepreload",href:p,...t})),v.map(({key:p,link:m})=>_.createElement("link",{key:p,nonce:t.nonce,...m})))}function C1(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ug=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ug&&(window.__reactRouterVersion="7.8.1")}catch{}function j1({basename:s,children:e,window:t}){let n=_.useRef();n.current==null&&(n.current=pw({window:t,v5Compat:!0}));let i=n.current,[r,o]=_.useState({action:i.action,location:i.location}),a=_.useCallback(l=>{_.startTransition(()=>o(l))},[o]);return _.useLayoutEffect(()=>i.listen(a),[i,a]),_.createElement(n1,{basename:s,children:e,location:r.location,navigationType:r.action,navigator:i})}var cg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hg=_.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:i,reloadDocument:r,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,...f},v){let{basename:p}=_.useContext(Tt),m=typeof u=="string"&&cg.test(u),x,g=!1;if(typeof u=="string"&&m&&(x=u,ug))try{let $=new URL(window.location.href),M=u.startsWith("//")?new URL($.protocol+u):new URL(u),I=Ht(M.pathname,p);M.origin===$.origin&&I!=null?u=I+M.search+M.hash:g=!0}catch{Nt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Fw(u,{relative:i}),[y,b,S]=_1(n,f),k=M1(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function E($){e&&e($),$.defaultPrevented||k($)}let C=_.createElement("a",{...f,...S,href:x||w,onClick:g||r?e:E,ref:C1(v,b),target:l,"data-discover":!m&&t==="render"?"true":void 0});return y&&!m?_.createElement(_.Fragment,null,C,_.createElement(S1,{page:w})):C});hg.displayName="Link";var N1=_.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:i=!1,style:r,to:o,viewTransition:a,children:l,...u},c){let d=ir(o,{relative:u.relative}),f=Ks(),v=_.useContext(sl),{navigator:p,basename:m}=_.useContext(Tt),x=v!=null&&O1(d)&&a===!0,g=p.encodeLocation?p.encodeLocation(d).pathname:d.pathname,w=f.pathname,y=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;t||(w=w.toLowerCase(),y=y?y.toLowerCase():null,g=g.toLowerCase()),y&&m&&(y=Ht(y,m)||y);const b=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=w===g||!i&&w.startsWith(g)&&w.charAt(b)==="/",k=y!=null&&(y===g||!i&&y.startsWith(g)&&y.charAt(g.length)==="/"),E={isActive:S,isPending:k,isTransitioning:x},C=S?e:void 0,$;typeof n=="function"?$=n(E):$=[n,S?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let M=typeof r=="function"?r(E):r;return _.createElement(hg,{...u,"aria-current":C,className:$,ref:c,style:M,to:o,viewTransition:a},typeof l=="function"?l(E):l)});N1.displayName="NavLink";var T1=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:i,state:r,method:o=io,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,...f},v)=>{let p=L1(),m=z1(a,{relative:u}),x=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&cg.test(a),w=y=>{if(l&&l(y),y.defaultPrevented)return;y.preventDefault();let b=y.nativeEvent.submitter,S=(b==null?void 0:b.getAttribute("formmethod"))||o;p(b||y.currentTarget,{fetcherKey:e,method:S,navigate:t,replace:i,state:r,relative:u,preventScrollReset:c,viewTransition:d})};return _.createElement("form",{ref:v,method:x,action:m,onSubmit:n?l:w,...f,"data-discover":!g&&s==="render"?"true":void 0})});T1.displayName="Form";function P1(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dg(s){let e=_.useContext(Bn);return le(e,P1(s)),e}function M1(s,{target:e,replace:t,state:n,preventScrollReset:i,relative:r,viewTransition:o}={}){let a=Bw(),l=Ks(),u=ir(s,{relative:r});return _.useCallback(c=>{if(u1(c,e)){c.preventDefault();let d=t!==void 0?t:Wi(l)===Wi(u);a(s,{replace:d,state:n,preventScrollReset:i,relative:r,viewTransition:o})}},[l,a,u,t,n,e,s,i,r,o])}var R1=0,$1=()=>`__${String(++R1)}__`;function L1(){let{router:s}=dg("useSubmit"),{basename:e}=_.useContext(Tt),t=Zw();return _.useCallback(async(n,i={})=>{let{action:r,method:o,encType:a,formData:l,body:u}=d1(n,e);if(i.navigate===!1){let c=i.fetcherKey||$1();await s.fetch(c,t,i.action||r,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await s.navigate(i.action||r,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[s,e,t])}function z1(s,{relative:e}={}){let{basename:t}=_.useContext(Tt),n=_.useContext(qt);le(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),r={...ir(s||".",{relative:e})},o=Ks();if(s==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();r.search=c?`?${c}`:""}}return(!s||s===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(r.pathname=r.pathname==="/"?t:Ut([t,r.pathname])),Wi(r)}function O1(s,{relative:e}={}){let t=_.useContext(sg);le(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dg("useViewTransitionState"),i=ir(s,{relative:e});if(!t.isTransitioning)return!1;let r=Ht(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Ht(t.nextLocation.pathname,n)||t.nextLocation.pathname;return $o(i.pathname,o)!=null||$o(i.pathname,r)!=null}const fg=_.createContext(void 0),pg=()=>{const s=_.useContext(fg);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s},D1=({children:s})=>{const[e,t]=_.useState("dark"),n=()=>{t(i=>i==="dark"?"light":"dark")};return h.jsx(fg.Provider,{value:{theme:e,toggleTheme:n},children:s})},mg=_.createContext(void 0),Wn=()=>{const s=_.useContext(mg);if(s===void 0)throw new Error("useToken must be used within a TokenProvider");return s},A1=({children:s})=>{const[e,t]=_.useState("BTCUSDT");return h.jsx(mg.Provider,{value:{selectedToken:e,setSelectedToken:t},children:s})},I1="wss://stream.binance.com:9443/ws",U1="https://api.binance.com/api/v3/ticker/24hr",ti=5,F1=1e3,B1=3e4;class W1{constructor(){this.ws=null,this.priceSubscribers=[],this.orderBookSubscribers=[],this.tokenData=new Map,this.orderBookData=new Map,this.reconnectAttempts=0,this.fetchRetryAttempts=0,this.symbols=["BTCUSDT","ETHUSDT","SOLUSDT","BNBUSDT","XRPUSDT","ADAUSDT","DOGEUSDT","MATICUSDT","DOTUSDT","LINKUSDT","AVAXUSDT","SHIBUSDT","LTCUSDT","UNIUSDT","ATOMUSDT","NEARUSDT","ALGOUSDT","ICPUSDT","FTMUSDT","TRXUSDT"],this.connect(),this.fetch24hData(),this.tokenData.set("USDT",{symbol:"USDT",price:1,priceChange:0,volume:0})}calculateRetryDelay(e){return Math.min(F1*Math.pow(2,e),B1)+Math.random()*1e3}async fetch24hData(){try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3),n=await fetch(U1,{signal:e.signal,headers:{Accept:"application/json"}});if(clearTimeout(t),!n.ok)throw new Error(`HTTP error! status: ${n.status}`);(await n.json()).forEach(r=>{if(this.symbols.includes(r.symbol)){const o=this.tokenData.get(r.symbol);o?this.tokenData.set(r.symbol,{...o,priceChange:parseFloat(r.priceChangePercent)}):this.tokenData.set(r.symbol,{symbol:r.symbol,price:parseFloat(r.lastPrice),priceChange:parseFloat(r.priceChangePercent),volume:parseFloat(r.volume)})}}),this.notifyPriceSubscribers(),this.fetchRetryAttempts=0}catch(e){if(console.error("Failed to fetch 24h data:",e),this.fetchRetryAttempts<ti){const t=this.calculateRetryDelay(this.fetchRetryAttempts);this.fetchRetryAttempts++,console.log(`Retrying 24h data fetch in ${t}ms (attempt ${this.fetchRetryAttempts}/${ti})`),setTimeout(()=>this.fetch24hData(),t)}else console.error("Max retry attempts reached for 24h data fetch")}}connect(){var e;try{if(((e=this.ws)==null?void 0:e.readyState)===WebSocket.OPEN){console.log("WebSocket already connected");return}this.ws=new WebSocket(I1),this.ws.onopen=()=>{console.log("Connected to Binance WebSocket"),this.reconnectAttempts=0,this.subscribe()},this.ws.onmessage=t=>{try{const n=JSON.parse(t.data);if(n.e==="24hrMiniTicker"){const i=n.s,r=parseFloat(n.c),o=parseFloat(n.v),a=this.tokenData.get(i);this.tokenData.set(i,{symbol:i,price:r,priceChange:(a==null?void 0:a.priceChange)||0,volume:o}),this.notifyPriceSubscribers()}else n.e==="depthUpdate"&&(this.updateOrderBook(n.s,n),this.notifyOrderBookSubscribers(n.s))}catch(n){console.error("Error processing WebSocket message:",n)}},this.ws.onclose=t=>{if(console.log(`WebSocket connection closed (code: ${t.code}, reason: ${t.reason})`),this.reconnectAttempts<ti){const n=this.calculateRetryDelay(this.reconnectAttempts);this.reconnectAttempts++,console.log(`Reconnecting WebSocket in ${n}ms (attempt ${this.reconnectAttempts}/${ti})`),setTimeout(()=>this.connect(),n)}else console.error("Max reconnection attempts reached")},this.ws.onerror=t=>{console.error("WebSocket error:",t)}}catch(t){if(console.error("Failed to connect to WebSocket:",t),this.reconnectAttempts<ti){const n=this.calculateRetryDelay(this.reconnectAttempts);this.reconnectAttempts++,setTimeout(()=>this.connect(),n)}}}subscribe(){var e,t;if(((e=this.ws)==null?void 0:e.readyState)===WebSocket.OPEN)try{const n={method:"SUBSCRIBE",params:this.symbols.map(r=>`${r.toLowerCase()}@miniTicker`),id:1};this.ws.send(JSON.stringify(n));const i={method:"SUBSCRIBE",params:this.symbols.map(r=>`${r.toLowerCase()}@depth@100ms`),id:2};this.ws.send(JSON.stringify(i))}catch(n){console.error("Error subscribing to WebSocket feeds:",n),(t=this.ws)==null||t.close()}}updateOrderBook(e,t){try{const n=t.b.map((r,o)=>({price:parseFloat(r[0]),amount:parseFloat(r[1]),total:parseFloat(r[0])*parseFloat(r[1]),depth:1-o/t.b.length})),i=t.a.map((r,o)=>({price:parseFloat(r[0]),amount:parseFloat(r[1]),total:parseFloat(r[0])*parseFloat(r[1]),depth:1-o/t.a.length}));this.orderBookData.set(e,{symbol:e,bids:n,asks:i})}catch(n){console.error("Error updating order book:",n)}}notifyPriceSubscribers(){const e=Array.from(this.tokenData.values());this.priceSubscribers.forEach(t=>{try{t(e)}catch(n){console.error("Error in price subscriber callback:",n)}})}notifyOrderBookSubscribers(e){const t=this.orderBookData.get(e);t&&this.orderBookSubscribers.forEach(n=>{try{n(t)}catch(i){console.error("Error in order book subscriber callback:",i)}})}onPriceUpdate(e){return this.priceSubscribers.push(e),e(Array.from(this.tokenData.values())),()=>{this.priceSubscribers=this.priceSubscribers.filter(t=>t!==e)}}onOrderBookUpdate(e){return this.orderBookSubscribers.push(e),()=>{this.orderBookSubscribers=this.orderBookSubscribers.filter(t=>t!==e)}}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}}const qs=new W1,V1="modulepreload",H1=function(s){return"/"+s},xd={},rr=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=H1(l),l in xd)return;xd[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":V1,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((f,v)=>{d.addEventListener("load",f),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},K1=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>rr(async()=>{const{default:n}=await Promise.resolve().then(()=>Vn);return{default:n}},[]).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class zc extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class q1 extends zc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bd extends zc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class _d extends zc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gu;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(gu||(gu={}));var X1=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class G1{constructor(e,{headers:t={},customFetch:n,region:i=gu.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=K1(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return X1(this,void 0,void 0,function*(){try{const{headers:i,method:r,body:o}=t;let a={},{region:l}=t;l||(l=this.region);const u=new URL(`${this.url}/${e}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(u.toString(),{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(m=>{throw new q1(m)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new bd(d);if(!d.ok)throw new _d(d);let v=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return v==="application/json"?p=yield d.json():v==="application/octet-stream"?p=yield d.blob():v==="text/event-stream"?p=d:v==="multipart/form-data"?p=yield d.formData():p=yield d.text(),{data:p,error:null,response:d}}catch(i){return{data:null,error:i,response:i instanceof _d||i instanceof bd?i.context:void 0}}})}}var De={},Oc={},il={},or={},rl={},ol={},Q1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ln=Q1();const J1=Ln.fetch,gg=Ln.fetch.bind(Ln),vg=Ln.Headers,Y1=Ln.Request,Z1=Ln.Response,Vn=Object.freeze(Object.defineProperty({__proto__:null,Headers:vg,Request:Y1,Response:Z1,default:gg,fetch:J1},Symbol.toStringTag,{value:"Module"})),ex=F0(Vn);var ll={};Object.defineProperty(ll,"__esModule",{value:!0});let tx=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};ll.default=tx;var yg=nt&&nt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ol,"__esModule",{value:!0});const sx=yg(ex),nx=yg(ll);let ix=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=sx.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async r=>{var o,a,l;let u=null,c=null,d=null,f=r.status,v=r.statusText;if(r.ok){if(this.method!=="HEAD"){const g=await r.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=g:c=JSON.parse(g))}const m=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(a=r.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");m&&x&&x.length>1&&(d=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,v="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const m=await r.text();try{u=JSON.parse(m),Array.isArray(u)&&r.status===404&&(c=[],u=null,f=200,v="OK")}catch{r.status===404&&m===""?(f=204,v="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,f=200,v="OK"),u&&this.shouldThrowOnError)throw new nx.default(u)}return{error:u,data:c,count:d,status:f,statusText:v}});return this.shouldThrowOnError||(i=i.catch(r=>{var o,a,l;return{error:{message:`${(o=r==null?void 0:r.name)!==null&&o!==void 0?o:"FetchError"}: ${r==null?void 0:r.message}`,details:`${(a=r==null?void 0:r.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=r==null?void 0:r.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};ol.default=ix;var rx=nt&&nt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(rl,"__esModule",{value:!0});const ox=rx(ol);let lx=class extends ox.default{select(e){let t=!1;const n=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};rl.default=lx;var ax=nt&&nt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(or,"__esModule",{value:!0});const ux=ax(rl);let cx=class extends ux.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};or.default=cx;var hx=nt&&nt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(il,"__esModule",{value:!0});const si=hx(or);let dx=class{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=t,this.schema=n,this.fetch=i}select(e,{head:t=!1,count:n}={}){const i=t?"HEAD":"GET";let r=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new si.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const i="POST",r=[];if(this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),n||r.push("missing=default"),this.headers.Prefer=r.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new si.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){const o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new si.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new si.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new si.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};il.default=dx;var al={},ul={};Object.defineProperty(ul,"__esModule",{value:!0});ul.version=void 0;ul.version="0.0.0-automated";Object.defineProperty(al,"__esModule",{value:!0});al.DEFAULT_HEADERS=void 0;const fx=ul;al.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${fx.version}`};var wg=nt&&nt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Oc,"__esModule",{value:!0});const px=wg(il),mx=wg(or),gx=al;let vx=class xg{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},gx.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new px.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new xg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:i=!1,count:r}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(o=n?"HEAD":"GET",Object.entries(t).filter(([c,d])=>d!==void 0).map(([c,d])=>[c,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([c,d])=>{a.searchParams.append(c,d)})):(o="POST",l=t);const u=Object.assign({},this.headers);return r&&(u.Prefer=`count=${r}`),new mx.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Oc.default=vx;var Hn=nt&&nt.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(De,"__esModule",{value:!0});De.PostgrestError=De.PostgrestBuilder=De.PostgrestTransformBuilder=De.PostgrestFilterBuilder=De.PostgrestQueryBuilder=De.PostgrestClient=void 0;const bg=Hn(Oc);De.PostgrestClient=bg.default;const _g=Hn(il);De.PostgrestQueryBuilder=_g.default;const Sg=Hn(or);De.PostgrestFilterBuilder=Sg.default;const kg=Hn(rl);De.PostgrestTransformBuilder=kg.default;const Eg=Hn(ol);De.PostgrestBuilder=Eg.default;const Cg=Hn(ll);De.PostgrestError=Cg.default;var yx=De.default={PostgrestClient:bg.default,PostgrestQueryBuilder:_g.default,PostgrestFilterBuilder:Sg.default,PostgrestTransformBuilder:kg.default,PostgrestBuilder:Eg.default,PostgrestError:Cg.default};const{PostgrestClient:wx,PostgrestQueryBuilder:N2,PostgrestFilterBuilder:T2,PostgrestTransformBuilder:P2,PostgrestBuilder:M2,PostgrestError:R2}=yx;class xx{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const bx="2.15.1",_x=`realtime-js/${bx}`,Sx="1.0.0",vu=1e4,kx=1e3,Ex=100;var wi;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(wi||(wi={}));var ge;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ge||(ge={}));var ht;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ht||(ht={}));var yu;(function(s){s.websocket="websocket"})(yu||(yu={}));var js;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(js||(js={}));class Cx{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),r=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const l=n.decode(e.slice(o,o+r));o=o+r;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class jg{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(J||(J={}));const Sd=(s,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((r,o)=>(r[o]=jx(o,s,e,i),r),{})},jx=(s,e,t,n)=>{const i=e.find(a=>a.name===s),r=i==null?void 0:i.type,o=t[s];return r&&!n.includes(r)?Ng(r,o):wu(o)},Ng=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return Mx(e,t)}switch(s){case J.bool:return Nx(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return Tx(e);case J.json:case J.jsonb:return Px(e);case J.timestamp:return Rx(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return wu(e);default:return wu(e)}},wu=s=>s,Nx=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},Tx=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},Px=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},Mx=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let r;const o=s.slice(1,t);try{r=JSON.parse("["+o+"]")}catch{r=o?o.split(","):[]}return r.map(a=>Ng(e,a))}return s},Rx=s=>typeof s=="string"?s.replace(" ","T"):s,Tg=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Gl{constructor(e,t,n={},i=vu){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var kd;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(kd||(kd={}));class xi{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xi.syncState(this.state,i,r,o),this.pendingDiffs.forEach(l=>{this.state=xi.syncDiff(this.state,l,r,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:r,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=xi.syncDiff(this.state,i,r,o),a())}),this.onJoin((i,r,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:r,newPresences:o})}),this.onLeave((i,r,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:r,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const r=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(r,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=r[u];if(d){const f=c.map(x=>x.presence_ref),v=d.map(x=>x.presence_ref),p=c.filter(x=>v.indexOf(x.presence_ref)<0),m=d.filter(x=>f.indexOf(x.presence_ref)<0);p.length>0&&(a[u]=p),m.length>0&&(l[u]=m)}else a[u]=c}),this.syncDiff(r,{joins:a,leaves:l},n,i)}static syncDiff(e,t,n,i){const{joins:r,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(r,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(v=>v.presence_ref),f=c.filter(v=>d.indexOf(v.presence_ref)<0);e[a].unshift(...f)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(r=>(r.presence_ref=r.phx_ref,delete r.phx_ref,delete r.phx_ref_prev,r)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ed;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ed||(Ed={}));var bi;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(bi||(bi={}));var $t;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})($t||($t={}));class Dc{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gl(this,ht.join,this.params,this.timeout),this.rejoinTimer=new jg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ge.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ht.reply,{},(i,r)=>{this._trigger(this._replyEventName(r),i)}),this.presence=new xi(this),this.broadcastEndpointURL=Tg(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ge.closed){const{config:{broadcast:r,presence:o,private:a}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[bi.PRESENCE]&&this.bindings[bi.PRESENCE].length>0,c={},d={broadcast:r,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e($t.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e($t.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:f})=>{var v;if(this.socket.setAuth(),f===void 0){e==null||e($t.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(v=p==null?void 0:p.length)!==null&&v!==void 0?v:0,x=[];for(let g=0;g<m;g++){const w=p[g],{filter:{event:y,schema:b,table:S,filter:k}}=w,E=f&&f[g];if(E&&E.event===y&&E.schema===b&&E.table===S&&E.filter===k)x.push(Object.assign(Object.assign({},w),{id:E.id}));else{this.unsubscribe(),this.state=ge.errored,e==null||e($t.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e($t.SUBSCRIBED);return}}).receive("error",f=>{this.state=ge.errored,e==null||e($t.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e($t.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ge.joined&&e===bi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e,t={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){const{event:r,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(r=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&r("ok"),u.receive("ok",()=>r("ok")),u.receive("error",()=>r("error")),u.receive("timeout",()=>r("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ge.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ht.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Gl(this,ht.leave,{},e),n.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ge.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const i=new AbortController,r=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(r),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Gl(this,e,t,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Ex){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,r;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=ht;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(v=>{var p,m,x;return((p=v.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(m=v.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(r=this.bindings[o])===null||r===void 0||r.filter(v=>{var p,m,x,g,w,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const b=v.id,S=(p=v.filter)===null||p===void 0?void 0:p.event;return b&&((m=t.ids)===null||m===void 0?void 0:m.includes(b))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=t.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const b=(w=(g=v==null?void 0:v.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return b==="*"||b===((y=t==null?void 0:t.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:m,table:x,commit_timestamp:g,type:w,errors:y}=p;f=Object.assign(Object.assign({},{schema:m,table:x,commit_timestamp:g,eventType:w,new:{},old:{},errors:y}),this._getPayloadRecords(p))}v.callback(f,n)})}_isClosed(){return this.state===ge.closed}_isJoined(){return this.state===ge.joined}_isJoining(){return this.state===ge.joining}_isLeaving(){return this.state===ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),r={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(r):this.bindings[i]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var r;return!(((r=i.type)===null||r===void 0?void 0:r.toLocaleLowerCase())===n&&Dc.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ht.close,{},e)}_onError(e){this._on(ht.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Sd(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Sd(e.columns,e.old_record)),t}}const Cd=()=>{},Rr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},$x=[1e3,2e3,5e3,1e4],Lx=1e4,zx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ox{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vu,this.transport=null,this.heartbeatIntervalMs=Rr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cd,this.ref=0,this.reconnectTimer=null,this.logger=Cd,this.conn=null,this.sendBuffer=[],this.serializer=new Cx,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let r;return i?r=i:typeof fetch>"u"?r=(...o)=>rr(async()=>{const{default:a}=await Promise.resolve().then(()=>Vn);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):r=fetch,(...o)=>r(...o)},!(!((n=t==null?void 0:t.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${yu.websocket}`,this.httpEndpoint=Tg(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xx.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sx}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wi.connecting:return js.Connecting;case wi.open:return js.Open;case wi.closing:return js.Closing;default:return js.Closed}}isConnected(){return this.connectionState()===js.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(r=>r.topic===n);if(i)return i;{const r=new Dc(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:n,payload:i,ref:r}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${n} (${r})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(kx,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Rr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:r,ref:o}=t,a=o?`(${o})`:"",l=r.status||"";this.log("receive",`${l} ${n} ${i} ${a}`.trim(),r),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,r,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(ht.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([zx],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const i={access_token:t,version:_x};t&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(ht.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new jg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Rr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,i,r,o,a,l,u;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:vu,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Rr.HEARTBEAT_INTERVAL,this.worker=(r=e==null?void 0:e.worker)!==null&&r!==void 0?r:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(a=e==null?void 0:e.reconnectAfterMs)!==null&&a!==void 0?a:c=>$x[c-1]||Lx,this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:(c,d)=>d(JSON.stringify(c)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ac extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ve(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class Dx extends Ac{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class xu extends Ac{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Ax=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Pg=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>rr(async()=>{const{default:n}=await Promise.resolve().then(()=>Vn);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Ix=()=>Ax(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield rr(()=>Promise.resolve().then(()=>Vn),void 0)).Response:Response}),bu=s=>{if(Array.isArray(s))return s.map(t=>bu(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const i=t.replace(/([-_][a-z])/gi,r=>r.toUpperCase().replace(/[-_]/g,""));e[i]=bu(n)}),e},Ux=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var Xs=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Ql=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Fx=(s,e,t)=>Xs(void 0,void 0,void 0,function*(){const n=yield Ix();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(i=>{const r=s.status||500,o=(i==null?void 0:i.statusCode)||r+"";e(new Dx(Ql(i),r,o))}).catch(i=>{e(new xu(Ql(i),i))}):e(new xu(Ql(s),s))}),Bx=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!n?i:(Ux(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function lr(s,e,t,n,i,r){return Xs(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(t,Bx(e,n,i,r)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Fx(l,a,n))})})}function Lo(s,e,t,n){return Xs(this,void 0,void 0,function*(){return lr(s,"GET",e,t,n)})}function _t(s,e,t,n,i){return Xs(this,void 0,void 0,function*(){return lr(s,"POST",e,n,i,t)})}function _u(s,e,t,n,i){return Xs(this,void 0,void 0,function*(){return lr(s,"PUT",e,n,i,t)})}function Wx(s,e,t,n){return Xs(this,void 0,void 0,function*(){return lr(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Mg(s,e,t,n,i){return Xs(this,void 0,void 0,function*(){return lr(s,"DELETE",e,n,i,t)})}var Pe=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const Vx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Hx{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Pg(i)}uploadOrUpdate(e,t,n,i){return Pe(this,void 0,void 0,function*(){try{let r;const o=Object.assign(Object.assign({},jd),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(r=new FormData,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l)),r.append("",n)):typeof FormData<"u"&&n instanceof FormData?(r=n,r.append("cacheControl",o.cacheControl),l&&r.append("metadata",this.encodeMetadata(l))):(r=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(t),c=this._getFinalPath(u),d=yield(e=="PUT"?_u:_t)(this.fetch,`${this.url}/object/${c}`,r,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}})}upload(e,t,n){return Pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,i){return Pe(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),o=this._getFinalPath(r),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:jd.upsert},i),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const d=yield _u(this.fetch,a.toString(),l,{headers:c});return{data:{path:r,fullPath:d.Key},error:null}}catch(l){if(ve(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const r=yield _t(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+r.url),a=o.searchParams.get("token");if(!a)throw new Ac("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}update(e,t,n){return Pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Pe(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}copy(e,t,n){return Pe(this,void 0,void 0,function*(){try{return{data:{path:(yield _t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,n){return Pe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),r=yield _t(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${o}`)},{data:r,error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return Pe(this,void 0,void 0,function*(){try{const i=yield _t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${r}`):null})),error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}download(e,t){return Pe(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=r?`?${r}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Lo(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ve(a))return{data:null,error:a};throw a}})}info(e){return Pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield Lo(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:bu(n),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}exists(e){return Pe(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Wx(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ve(n)&&n instanceof xu){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=[],r=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";r!==""&&i.push(r);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return Pe(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}})}list(e,t,n){return Pe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Vx),t),{prefix:e||""});return{data:yield _t(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(ve(i))return{data:null,error:i};throw i}})}listV2(e,t){return Pe(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield _t(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Kx="2.11.0",qx={"X-Client-Info":`storage-js/${Kx}`};var Qs=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class Xx{constructor(e,t={},n,i){const r=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase.")),this.url=r.href,this.headers=Object.assign(Object.assign({},qx),t),this.fetch=Pg(n)}listBuckets(){return Qs(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ve(e))return{data:null,error:e};throw e}})}getBucket(e){return Qs(this,void 0,void 0,function*(){try{return{data:yield Lo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Qs(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Qs(this,void 0,void 0,function*(){try{return{data:yield _u(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Qs(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Qs(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ve(t))return{data:null,error:t};throw t}})}}class Gx extends Xx{constructor(e,t={},n,i){super(e,t,n,i)}from(e){return new Hx(this.url,this.headers,e,this.fetch)}}const Qx="2.55.0";let ui="";typeof Deno<"u"?ui="deno":typeof document<"u"?ui="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ui="react-native":ui="node";const Jx={"X-Client-Info":`supabase-js-${ui}/${Qx}`},Yx={headers:Jx},Zx={schema:"public"},eb={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tb={};var sb=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};const nb=s=>{let e;return s?e=s:typeof fetch>"u"?e=gg:e=fetch,(...t)=>e(...t)},ib=()=>typeof Headers>"u"?vg:Headers,rb=(s,e,t)=>{const n=nb(t),i=ib();return(r,o)=>sb(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:s;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(r,Object.assign(Object.assign({},o),{headers:u}))})};var ob=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};function lb(s){return s.endsWith("/")?s:s+"/"}function ab(s,e){var t,n;const{db:i,auth:r,realtime:o,global:a}=s,{db:l,auth:u,realtime:c,global:d}=e,f={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),r),realtime:Object.assign(Object.assign({},c),o),storage:{},global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},(t=d==null?void 0:d.headers)!==null&&t!==void 0?t:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>ob(this,void 0,void 0,function*(){return""})};return s.accessToken?f.accessToken=s.accessToken:delete f.accessToken,f}const Rg="2.71.1",sn=30*1e3,Su=3,Jl=Su*sn,ub="http://localhost:9999",cb="supabase.auth.token",hb={"X-Client-Info":`gotrue-js/${Rg}`},ku="X-Supabase-Api-Version",$g={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},db=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,fb=10*60*1e3;class Ic extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function A(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class pb extends Ic{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function mb(s){return A(s)&&s.name==="AuthApiError"}class Lg extends Ic{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xs extends Ic{constructor(e,t,n,i){super(e,n,i),this.name=t,this.status=n}}class Yt extends xs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function gb(s){return A(s)&&s.name==="AuthSessionMissingError"}class $r extends xs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lr extends xs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zr extends xs{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vb(s){return A(s)&&s.name==="AuthImplicitGrantRedirectError"}class Nd extends xs{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Eu extends xs{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Yl(s){return A(s)&&s.name==="AuthRetryableFetchError"}class Td extends xs{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Cu extends xs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pd=` 	
\r=`.split(""),yb=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<Pd.length;e+=1)s[Pd[e].charCodeAt(0)]=-2;for(let e=0;e<zo.length;e+=1)s[zo[e].charCodeAt(0)]=e;return s})();function Md(s,e,t){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(zo[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(zo[n]),e.queuedBits-=6}}function zg(s,e,t){const n=yb[s];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Rd(s){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},r=o=>{bb(o,n,t)};for(let o=0;o<s.length;o+=1)zg(s.charCodeAt(o),i,r);return e.join("")}function wb(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function xb(s,e){for(let t=0;t<s.length;t+=1){let n=s.charCodeAt(t);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(s.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}wb(n,e)}}function bb(s,e,t){if(e.utf8seq===0){if(s<=127){t(s);return}for(let n=1;n<6;n+=1)if(!(s>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function _b(s){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<s.length;i+=1)zg(s.charCodeAt(i),t,n);return new Uint8Array(e)}function Sb(s){const e=[];return xb(s,t=>e.push(t)),new Uint8Array(e)}function kb(s){const e=[],t={queue:0,queuedBits:0},n=i=>{e.push(i)};return s.forEach(i=>Md(i,t,n)),Md(null,t,n),e.join("")}function Eb(s){return Math.round(Date.now()/1e3)+s}function Cb(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const at=()=>typeof window<"u"&&typeof document<"u",bs={tested:!1,writable:!1},Og=()=>{if(!at())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(bs.tested)return bs.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),bs.tested=!0,bs.writable=!0}catch{bs.tested=!0,bs.writable=!1}return bs.writable};function jb(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,r)=>{e[r]=i})}catch{}return t.searchParams.forEach((n,i)=>{e[i]=n}),e}const Dg=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>rr(async()=>{const{default:n}=await Promise.resolve().then(()=>Vn);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Nb=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",nn=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},_s=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Qt=async(s,e)=>{await s.removeItem(e)};class cl{constructor(){this.promise=new cl.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}cl.promiseConstructor=Promise;function Zl(s){const e=s.split(".");if(e.length!==3)throw new Cu("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!db.test(e[n]))throw new Cu("JWT not in base64url format");return{header:JSON.parse(Rd(e[0])),payload:JSON.parse(Rd(e[1])),signature:_b(e[2]),raw:{header:e[0],payload:e[1]}}}async function Tb(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Pb(s,e){return new Promise((n,i)=>{(async()=>{for(let r=0;r<1/0;r++)try{const o=await s(r);if(!e(r,null,o)){n(o);return}}catch(o){if(!e(r,o)){i(o);return}}})()})}function Mb(s){return("0"+s.toString(16)).substr(-2)}function Rb(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let i="";for(let r=0;r<56;r++)i+=t.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,Mb).join("")}async function $b(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(n);return Array.from(i).map(r=>String.fromCharCode(r)).join("")}async function Lb(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await $b(s);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Js(s,e,t=!1){const n=Rb();let i=n;t&&(i+="/PASSWORD_RECOVERY"),await nn(s,`${e}-code-verifier`,i);const r=await Lb(n);return[r,n===r?"plain":"s256"]}const zb=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ob(s){const e=s.headers.get(ku);if(!e||!e.match(zb))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Db(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function Ab(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ib=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ys(s){if(!Ib.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ea(){const s={};return new Proxy(s,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $d(s){return JSON.parse(JSON.stringify(s))}var Ub=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};const Cs=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Fb=[502,503,504];async function Ld(s){var e;if(!Nb(s))throw new Eu(Cs(s),0);if(Fb.includes(s.status))throw new Eu(Cs(s),s.status);let t;try{t=await s.json()}catch(r){throw new Lg(Cs(r),r)}let n;const i=Ob(s);if(i&&i.getTime()>=$g["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Td(Cs(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Yt}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((r,o)=>r&&typeof o=="string",!0))throw new Td(Cs(t),s.status,t.weak_password.reasons);throw new pb(Cs(t),s.status||500,n)}const Bb=(s,e,t,n)=>{const i={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};async function U(s,e,t,n){var i;const r=Object.assign({},n==null?void 0:n.headers);r[ku]||(r[ku]=$g["2024-01-01"].name),n!=null&&n.jwt&&(r.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Wb(s,e,t+a,{headers:r,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Wb(s,e,t,n,i,r){const o=Bb(e,n,i,r);let a;try{a=await s(t,Object.assign({},o))}catch(l){throw console.error(l),new Eu(Cs(l),0)}if(a.ok||await Ld(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Ld(l)}}function Mt(s){var e;let t=null;qb(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Eb(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function zd(s){const e=Mt(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function ns(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function Vb(s){return{data:s,error:null}}function Hb(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r}=s,o=Ub(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:r},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Kb(s){return s}function qb(s){return s.access_token&&s.refresh_token&&s.expires_in}const ta=["global","local","others"];var Xb=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]]);return t};class Gb{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Dg(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=ta[0]){if(ta.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ta.join(", ")}`);try{return await U(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await U(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ns})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Xb(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await U(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Hb,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(A(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await U(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ns})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,i,r,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await U(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(r=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&r!==void 0?r:""},xform:Kb});if(c.error)throw c.error;const d=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(p=>{const m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);u[`${x}Page`]=m}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(A(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ys(e);try{return await U(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ns})}catch(t){if(A(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Ys(e);try{return await U(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ns})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){Ys(e);try{return await U(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ns})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ys(e.userId);try{const{data:t,error:n}=await U(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:n}}catch(t){if(A(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Ys(e.userId),Ys(e.id);try{return{data:await U(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}}function Od(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function Qb(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Zs={debug:!!(globalThis&&Og()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ag extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Jb extends Ag{}async function Yb(s,e,t){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,i.name);try{return await t()}finally{Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,i.name)}}else{if(e===0)throw Zs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Jb(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Zs.debug)try{const r=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(r,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}Qb();const Zb={url:ub,storageKey:cb,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hb,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dd(s,e,t){return await t()}const en={};class Vi{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vi.nextInstanceID,Vi.nextInstanceID+=1,this.instanceID>0&&at()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Zb),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Gb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Dg(i.fetch),this.lock=i.lock||Dd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:at()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Yb:this.lock=Dd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Og()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Od(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=Od(this.memoryStorage)),at()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=en[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){en[this.storageKey]=Object.assign(Object.assign({},en[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=en[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){en[this.storageKey]=Object.assign(Object.assign({},en[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rg}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=jb(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),at()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),vb(r)){const l=(e=r.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:r}}return await this._removeSession(),{error:r}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return A(t)?{error:t}:{error:new Lg("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,i;try{const r=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Mt}),{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(A(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,i;try{let r;if("email"in e){const{email:c,password:d,options:f}=e;let v=null,p=null;this.flowType==="pkce"&&([v,p]=await Js(this.storage,this.storageKey)),r=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:d,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:p},xform:Mt})}else if("phone"in e){const{phone:c,password:d,options:f}=e;r=await U(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Mt})}else throw new Lr("You must provide either an email or phone number and a password");const{data:o,error:a}=r;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(A(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:o,options:a}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zd})}else if("phone"in e){const{phone:r,password:o,options:a}=e;t=await U(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:zd})}else throw new Lr("You must provide either an email or phone number and a password");const{data:n,error:i}=t;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new $r}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,i,r;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(r=e.options)===null||r===void 0?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,i,r,o,a,l,u,c,d,f,v;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:x,wallet:g,statement:w,options:y}=e;let b;if(at())if(typeof g=="object")b=g;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))b=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=g}const S=new URL((t=y==null?void 0:y.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in b&&b.signIn){const k=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),w?{statement:w}:null));let E;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")E=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)E=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),m=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${S.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(i=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((r=y==null?void 0:y.signInWithSolana)===null||r===void 0)&&r.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(c=y==null?void 0:y.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const k=await b.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=k}}try{const{data:x,error:g}=await U(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:kb(m)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Mt});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new $r}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(A(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const t=await _s(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(t??"").split("/");try{const{data:r,error:o}=await U(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Mt});if(await Qt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!r||!r.session||!r.user?{data:{user:null,session:null,redirectType:null},error:new $r}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign(Object.assign({},r),{redirectType:i??null}),error:o})}catch(r){if(A(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:i,access_token:r,nonce:o}=e,a=await U(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:r,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Mt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new $r}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,i,r,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Js(this.storage,this.storageKey));const{error:d}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await U(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Lr("You must provide either an email or phone number.")}catch(a){if(A(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,n;try{let i,r;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,r=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:i,xform:Mt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(A(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,n,i;try{let r=null,o=null;return this.flowType==="pkce"&&([r,o]=await Js(this.storage,this.storageKey)),await U(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:o}),headers:this.headers,xform:Vb})}catch(r){if(A(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Yt;const{error:i}=await U(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(A(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:r}=e,{error:o}=await U(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},redirectTo:r==null?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:i,options:r}=e,{data:o,error:a}=await U(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Lr("You must provide either an email or phone number and a type")}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await _s(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Jl:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await _s(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=ea()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ns}):await this._useSession(async t=>{var n,i,r;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yt}:await U(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0,xform:ns})})}catch(t){if(A(t))return gb(t)&&(await this._removeSession(),await Qt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:i,error:r}=n;if(r)throw r;if(!i.session)throw new Yt;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Js(this.storage,this.storageKey));const{data:u,error:c}=await U(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ns});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(A(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Yt;const t=Date.now()/1e3;let n=t,i=!0,r=null;const{payload:o}=Zl(e.access_token);if(o.exp&&(n=o.exp,i=n<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};r=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;r={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(A(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Yt;const{session:i,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(A(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!at())throw new zr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Nd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zr("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Nd("No code detected.");const{data:w,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:r,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!r||!a||!o||!u)throw new zr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let f=c+d;l&&(f=parseInt(l));const v=f-c;v*1e3<=sn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${d}s`);const p=f-d;c-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,c):c-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,c);const{data:m,error:x}=await this._getUser(r);if(x)throw x;const g={provider_token:n,provider_refresh_token:i,access_token:r,expires_in:d,expires_at:f,refresh_token:o,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(A(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await _s(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return{error:r};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(mb(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Qt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Cb(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,i;try{const{data:{session:r},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(r){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e,t={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Js(this.storage,this.storageKey,!0));try{return await U(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(A(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(A(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:i}=await this._useSession(async r=>{var o,a,l,u,c;const{data:d,error:f}=r;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await U(this.fetch,"GET",v,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(i)throw i;return at()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(A(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:o}=t;if(o)throw o;return await U(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Pb(async i=>(i>0&&await Tb(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await U(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mt})),(i,r)=>{const o=200*Math.pow(2,i);return r&&Yl(r)&&Date.now()+o-n<sn})}catch(n){if(this._debug(t,"error",n),A(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),at()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await _s(this.storage,this.storageKey);if(i&&this.userStorage){let o=await _s(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await nn(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:ea()}else if(i&&!i.user&&!i.user){const o=await _s(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Qt(this.storage,this.storageKey+"-user"),await nn(this.storage,this.storageKey,i)):i.user=ea()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const r=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jl;if(this._debug(n,`session has${r?"":" not"} expired with margin of ${Jl}s`),r){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),Yl(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Yt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new cl;const{data:r,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!r.session)throw new Yt;await this._saveSession(r.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",r.session);const a={session:r.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(r){if(this._debug(i,"error",r),A(r)){const o={session:null,error:r};return Yl(r)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){r.push(l)}});if(await Promise.all(o),r.length>0){for(let a=0;a<r.length;a+=1)console.error(r[a]);throw r[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await nn(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const r=$d(i);await nn(this.storage,this.storageKey,r)}else{const i=$d(t);await nn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Qt(this.storage,this.storageKey),await Qt(this.storage,this.storageKey+"-code-verifier"),await Qt(this.storage,this.storageKey+"-user"),this.userStorage&&await Qt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&at()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/sn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${sn}ms, refresh threshold is ${Su} ticks`),i<=Su&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ag)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!at()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const i=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[r,o]=await Js(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(r)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(n!=null&&n.queryParams){const r=new URLSearchParams(n.queryParams);i.push(r.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;return r?{data:null,error:r}:await U(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,i;const{data:r,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await U(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(A(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;if(r)return{data:null,error:r};const{data:o,error:a}=await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:i,error:r}=t;return r?{data:null,error:r}:await U(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(A(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),r=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:i},error:r}=e;if(r)return{data:null,error:r};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Zl(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(t=i.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+fb>i)return n;const{data:r,error:o}=await U(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!r.keys||r.keys.length===0||(this.jwks=r,this.jwks_cached_at=i,n=r.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:v,error:p}=await this.getSession();if(p||!v.session)return{data:null,error:p};n=v.session.access_token}const{header:i,payload:r,signature:o,raw:{header:a,payload:l}}=Zl(n);t!=null&&t.allowExpired||Db(r.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!u){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:r,header:i,signature:o},error:null}}const c=Ab(i.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,Sb(`${a}.${l}`)))throw new Cu("Invalid JWT signature");return{data:{claims:r,header:i,signature:o},error:null}}catch(n){if(A(n))return{data:null,error:n};throw n}}}Vi.nextInstanceID=0;const e_=Vi;class t_ extends e_{constructor(e){super(e)}}var s_=function(s,e,t,n){function i(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?r(c.value):i(c.value).then(a,l)}u((n=n.apply(s,e||[])).next())})};class n_{constructor(e,t,n){var i,r,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=lb(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Zx,realtime:tb,auth:Object.assign(Object.assign({},eb),{storageKey:u}),global:Yx},d=ab(n??{},c);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=d.global.headers)!==null&&r!==void 0?r:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=rb(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new wx(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Gx(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new G1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return s_(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:r,flowType:o,lock:a,debug:l},u,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new t_({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),u),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ox(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const i_=(s,e,t)=>new n_(s,e,t);function r_(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}r_()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const o_="https://nbtdsnmjpqwtfmxhuyaw.supabase.co",l_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5idGRzbm1qcHF3dGZteGh1eWF3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ5MTA2NTksImV4cCI6MjA3MDQ4NjY1OX0.Kq_fusTyJBrTv4QOJXC3ugVcz2Iv36TTHfv8UYeY3MU",St=i_(o_,l_),Ig=_.createContext(void 0),ar=()=>{const s=_.useContext(Ig);if(s===void 0)throw new Error("useUser must be used within a UserProvider");return s},a_=({children:s})=>{const[e,t]=_.useState(null),[n,i]=_.useState(null),[r,o]=_.useState(!0);_.useEffect(()=>{St.auth.getSession().then(({data:{session:m}})=>{i(m),t((m==null?void 0:m.user)??null),o(!1)});const{data:{subscription:p}}=St.auth.onAuthStateChange((m,x)=>{i(x),t((x==null?void 0:x.user)??null),o(!1)});return()=>p.unsubscribe()},[]);const a=async(p,m)=>{o(!0);try{const{error:x}=await St.auth.signInWithOtp({email:p,options:{emailRedirectTo:`${window.location.origin}/`}});if(x)throw console.error("Magic link error:",x),x;console.log("Magic link sent successfully to:",p)}catch(x){throw console.error("SignUp error:",x),new Error(x.message||"Sign up failed")}finally{o(!1)}},l=async(p,m)=>{o(!0);try{const{error:x}=await St.auth.signInWithPassword({email:p,password:m});if(x)throw x}catch(x){throw new Error(x.message||"Sign in failed")}finally{o(!1)}},u=async p=>{o(!0);try{const{error:m}=await St.auth.signInWithOtp({email:p,options:{emailRedirectTo:`${window.location.origin}/`}});if(m)throw console.error("Magic link error:",m),m;console.log("Magic link sent successfully to:",p)}catch(m){throw console.error("SignInWithOtp error:",m),new Error(m.message||"Failed to send OTP")}finally{o(!1)}},c=async(p,m)=>Promise.resolve(),d=async p=>{o(!0);try{const{error:m}=await St.auth.resetPasswordForEmail(p,{redirectTo:`${window.location.origin}/reset-password`});if(m)throw console.error("Reset password error:",m),m;console.log("Reset password email sent successfully to:",p)}catch(m){throw console.error("ResetPassword error:",m),new Error(m.message||"Failed to send reset email")}finally{o(!1)}},f=async p=>{o(!0);try{const{error:m}=await St.auth.updateUser({password:p});if(m)throw m}catch(m){throw new Error(m.message||"Failed to update password")}finally{o(!1)}},v=async()=>{o(!0);try{const{error:p}=await St.auth.signOut();if(p)throw p}catch(p){throw new Error(p.message||"Sign out failed")}finally{o(!1)}};return h.jsx(Ig.Provider,{value:{user:e,session:n,loading:r,signUp:a,signIn:l,signInWithOtp:u,resetPassword:d,updatePassword:f,verifyOtp:c,signOut:v},children:s})},Ug=_.createContext(void 0),ur=()=>{const s=_.useContext(Ug);if(!s)throw new Error("usePositions must be used within a PositionProvider");return s},u_=({children:s})=>{const{user:e}=ar(),[t,n]=_.useState([]),[i,r]=_.useState(1e4),[o,a]=_.useState([{symbol:"USDT",balance:1e4},{symbol:"BTC",balance:0},{symbol:"ETH",balance:0},{symbol:"SOL",balance:0},{symbol:"BNB",balance:0},{symbol:"XRP",balance:0},{symbol:"ADA",balance:0},{symbol:"DOGE",balance:0},{symbol:"MATIC",balance:0},{symbol:"DOT",balance:0}]),[l,u]=_.useState(new Map);_.useEffect(()=>{e&&(r(1e4),a([{symbol:"USDT",balance:1e4},{symbol:"BTC",balance:0},{symbol:"ETH",balance:0},{symbol:"SOL",balance:0},{symbol:"BNB",balance:0},{symbol:"XRP",balance:0},{symbol:"ADA",balance:0},{symbol:"DOGE",balance:0},{symbol:"MATIC",balance:0},{symbol:"DOT",balance:0}]),n([]))},[e]),_.useEffect(()=>{const p=qs.onPriceUpdate(m=>{const x=new Map;m.forEach(g=>x.set(g.symbol,g.price)),u(x),n(g=>g.map(w=>{if(w.status==="closed")return w;const y=x.get(w.symbol);if(!y)return w;const b=w.amount*w.entryPrice/w.leverage;let S=0;w.type==="long"?S=(y-w.entryPrice)/w.entryPrice*b*w.leverage:S=(w.entryPrice-y)/w.entryPrice*b*w.leverage;const k=S/b*100;return{...w,pnl:S,pnlPercent:k}}))});return()=>p()},[]);const c=_.useCallback(p=>{const m=i+p;r(m),a(x=>x.map(g=>g.symbol==="USDT"?{...g,balance:g.balance+p}:g))},[i]),d=_.useCallback((p,m,x,g)=>{a(w=>{const y=[...w],b=y.findIndex(k=>k.symbol===p),S=y.findIndex(k=>k.symbol===m);if(b!==-1&&S!==-1){y[b]={...y[b],balance:Math.max(0,y[b].balance-x)};const k=x*g;y[S]={...y[S],balance:y[S].balance+k},p==="USDT"?r(E=>E-x):m==="USDT"&&r(E=>E+k)}return y})},[]),f=_.useCallback(p=>{if(p.amount*p.entryPrice/p.leverage>i)throw new Error("Insufficient balance to open position");const x=Math.random().toString(36).substring(7),g={...p,id:x,status:"open",openTime:new Date,initialBalance:i,pnl:0,pnlPercent:0};return n(w=>[...w,g]),g},[i]),v=_.useCallback(p=>{n(m=>{const x=m.find(S=>S.id===p);if(!x||x.status==="closed")return m;const g=l.get(x.symbol);if(!g)return m;const w=x.amount*x.entryPrice/x.leverage;let y=0;x.type==="long"?y=(g-x.entryPrice)/x.entryPrice*w*x.leverage:y=(x.entryPrice-g)/x.entryPrice*w*x.leverage;const b=y/w*100;return c(y),m.map(S=>S.id===p?{...S,status:"closed",closeTime:new Date,pnl:y,pnlPercent:b}:S)})},[l,c]);return h.jsx(Ug.Provider,{value:{positions:t,portfolioBalance:i,tokenBalances:o,openPosition:f,closePosition:v,updateUsdtBalance:c,convertTokens:d},children:s})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var c_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(s,e)=>{const t=_.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>_.createElement("svg",{ref:c,...c_,width:i,height:i,stroke:n,strokeWidth:o?Number(r)*24/Number(i):r,className:["lucide",`lucide-${h_(s)}`,a].join(" "),...u},[...e.map(([d,f])=>_.createElement(d,f)),...Array.isArray(l)?l:[l]]));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=K("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=K("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=K("ArrowUpFromLine",[["path",{d:"m18 9-6-6-6 6",key:"kcunyi"}],["path",{d:"M12 3v14",key:"7cf3v8"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=K("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=K("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wc=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=K("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=K("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=K("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=K("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=K("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=K("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=K("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Wg=({isOpen:s,onClose:e,initialMode:t="login"})=>{const{signUp:n,signIn:i,signInWithOtp:r,verifyOtp:o,resetPassword:a,loading:l}=ar(),[u,c]=_.useState(t),[d,f]=_.useState(""),[v,p]=_.useState(""),[m,x]=_.useState(""),[g,w]=_.useState(!1),[y,b]=_.useState(!1),[S,k]=_.useState(""),[E,C]=_.useState("");_.useEffect(()=>{c(t)},[t]);const $=()=>{f(""),p(""),x(""),b(!1),k(""),C(""),c("login")},M=()=>{$(),e()},I=async G=>{if(G.preventDefault(),k(""),v!==m){k("Passwords do not match");return}if(!y){k("Please agree to the Terms of Service");return}try{await n(d,v),C("Magic link sent to your email! Please check your inbox (including spam folder) and click the link to complete registration.")}catch(Q){console.error("Registration error:",Q),k(Q.message||"Registration failed")}},z=async G=>{G.preventDefault(),k("");try{await i(d,v),M()}catch(Q){k(Q.message||"Login failed")}},O=async G=>{G.preventDefault(),k("");try{await r(d),C("Magic link sent to your email! Please check your inbox (including spam folder) and click the link to log in."),c("otp-verify")}catch(Q){console.error("Magic link error:",Q),k(Q.message||"Failed to send OTP")}},H=async G=>{G.preventDefault(),k("");try{await a(d),C("Password reset link sent to your email! Please check your inbox (including spam folder) and click the link.")}catch(Q){console.error("Reset password error:",Q),k(Q.message||"Failed to send reset email")}};return s?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#0F172A] rounded-lg w-full max-w-md p-6 relative",children:[h.jsx("button",{onClick:M,className:"absolute top-4 right-4 text-gray-400 hover:text-white",children:h.jsx(zn,{size:24})}),h.jsxs("div",{className:"flex items-center mb-6",children:[(u==="register"||u==="otp-login"||u==="forgot-password")&&h.jsx("button",{onClick:()=>c("login"),className:"text-gray-400 hover:text-white mr-4",children:h.jsx(Oo,{size:24})}),h.jsx("h2",{className:"text-xl font-semibold",children:u==="login"?"TX Exchange Account Login":u==="register"?"Create TX Exchange Account":u==="forgot-password"?"Reset Password":"Login with Magic Link"})]}),h.jsx("div",{className:"text-sm text-gray-400 mb-6",children:u==="login"?"Welcome back! Sign in with your email":u==="register"?"Create your account - we'll send a verification code to your email":u==="forgot-password"?"Enter your email to receive a password reset link":"We'll send you a magic link"}),h.jsxs("form",{onSubmit:u==="login"?z:u==="register"?I:u==="forgot-password"?H:O,children:[S&&h.jsx("div",{className:"bg-red-500 bg-opacity-10 text-red-500 px-4 py-2 rounded-lg mb-4",children:S}),E&&h.jsx("div",{className:"bg-green-500 bg-opacity-10 text-green-500 px-4 py-2 rounded-lg mb-4",children:E}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"email",value:d,onChange:G=>f(G.target.value),placeholder:"Please enter your email address",className:"w-full bg-[#1E293B] text-white pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]",required:!0}),h.jsx(w_,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]})]}),u!=="otp-login"&&u!=="forgot-password"&&h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:g?"text":"password",value:v,onChange:G=>p(G.target.value),placeholder:"Please enter your password",className:"w-full bg-[#1E293B] text-white pl-10 pr-10 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]",required:!0}),h.jsx(Ad,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),h.jsx("button",{type:"button",onClick:()=>w(!g),className:"absolute right-3 top-2.5 text-gray-400",children:g?h.jsx(Bc,{size:18}):h.jsx(Wc,{size:18})})]})]}),u==="register"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:g?"text":"password",value:m,onChange:G=>x(G.target.value),placeholder:"Please enter your password again",className:"w-full bg-[#1E293B] text-white pl-10 pr-10 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]",required:!0}),h.jsx(Ad,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]})]}),h.jsxs("div",{className:"mb-6 flex items-center",children:[h.jsx("input",{type:"checkbox",checked:y,onChange:G=>b(G.target.checked),className:"mr-2",required:!0}),h.jsxs("span",{className:"text-sm text-gray-400",children:["I have read and agree to"," ",h.jsx("a",{href:"#",className:"text-[#22C55E]",children:"TX Exchange Terms of Service"})]})]})]}),h.jsx("button",{type:"submit",disabled:l,className:"w-full bg-[#22C55E] hover:bg-[#16A34A] disabled:bg-gray-600 text-white py-3 rounded-lg font-medium transition-all duration-200 mb-4",children:l?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsx(hl,{size:20,className:"animate-spin mr-2"}),"Processing..."]}):u==="login"?"Login":u==="register"?"Register & Send Magic Link":"Send Magic Link"}),u==="login"&&h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("button",{type:"button",onClick:()=>c("forgot-password"),className:"text-[#22C55E] hover:underline text-sm mr-4",children:"Forgot Password?"}),h.jsx("button",{type:"button",onClick:()=>c("otp-login"),className:"text-[#22C55E] hover:underline text-sm",children:"Login with Email Code instead"})]}),h.jsx("div",{className:"text-center",children:u==="login"?h.jsx("button",{type:"button",onClick:()=>c("register"),className:"text-[#22C55E] hover:underline",children:"Create Account"}):u==="register"?h.jsx("button",{type:"button",onClick:()=>c("login"),className:"text-[#22C55E] hover:underline",children:"Already have an account? Login"}):u==="forgot-password"?h.jsx("button",{type:"button",onClick:()=>c("login"),className:"text-[#22C55E] hover:underline",children:"Remember your password? Login"}):h.jsx("button",{type:"button",onClick:()=>c("login"),className:"text-[#22C55E] hover:underline",children:"Back to Login"})})]})]})}):null},T_=()=>{const{theme:s,toggleTheme:e}=pg(),{user:t,signOut:n}=ar(),[i,r]=_.useState(!1),[o,a]=_.useState("login"),l=async()=>{try{await n()}catch(u){console.error("Sign out error:",u)}};return h.jsxs("header",{className:"bg-[#0F172A] text-white py-4 px-6 flex items-center justify-between border-b border-gray-800",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(N_,{className:"w-8 h-8 text-[#22C55E]"}),h.jsx("h1",{className:"text-2xl font-bold",children:"TX"})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[t?h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"text-sm text-gray-400",children:["Welcome, ",t.email]}),h.jsxs("button",{onClick:l,className:"flex items-center space-x-2 bg-[#2D3748] hover:bg-[#374151] px-4 py-2 rounded-lg",children:[h.jsx(y_,{size:16}),h.jsx("span",{children:"Sign Out"})]})]}):h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("button",{className:"bg-[#2D3748] hover:bg-[#374151] text-white px-4 py-2 rounded-lg transition-all duration-200",onClick:()=>{a("login"),r(!0)},children:"Login"}),h.jsx("button",{className:"bg-[#22C55E] hover:bg-[#16A34A] text-white px-4 py-2 rounded-lg transition-all duration-200",onClick:()=>{a("register"),r(!0)},children:"Register"})]}),h.jsx("button",{onClick:e,className:"p-1.5 rounded-full hover:bg-gray-800 transition-colors",children:s==="dark"?h.jsx(k_,{size:18}):h.jsx(b_,{size:18})})]}),h.jsx(Wg,{isOpen:i,onClose:()=>r(!1),initialMode:o})]})},ie=(s,e=2)=>{const t=s<.01?6:e;return s.toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:t})},Nu=s=>{const e=s.toFixed(2).replace(/\.?0+$/,"");return(s>=0?"+":"")+e+"%"},Be={USDT:"https://assets.coingecko.com/coins/images/325/large/Tether.png",BTC:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png",ETH:"https://assets.coingecko.com/coins/images/279/large/ethereum.png",SOL:"https://assets.coingecko.com/coins/images/4128/large/solana.png",BNB:"https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png",XRP:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png",ADA:"https://assets.coingecko.com/coins/images/975/large/cardano.png",DOGE:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png",MATIC:"https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png",DOT:"https://assets.coingecko.com/coins/images/12171/large/polkadot.png",LINK:"https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png",AVAX:"https://assets.coingecko.com/coins/images/12559/large/Avalanche_Circle_RedWhite_Trans.png",SHIB:"https://assets.coingecko.com/coins/images/11939/large/shiba.png",LTC:"https://assets.coingecko.com/coins/images/2/large/litecoin.png",UNI:"https://assets.coingecko.com/coins/images/12504/large/uniswap-uni.png",ATOM:"https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png",NEAR:"https://assets.coingecko.com/coins/images/10365/large/near.jpg",ALGO:"https://assets.coingecko.com/coins/images/4380/large/download.png",ICP:"https://assets.coingecko.com/coins/images/14495/large/Internet_Computer_logo.png",FTM:"https://assets.coingecko.com/coins/images/4001/large/Fantom_round.png",TRX:"https://assets.coingecko.com/coins/images/1094/large/tron-logo.png"};var P_=Object.defineProperty,Do=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,Hg=Object.prototype.propertyIsEnumerable,Id=(s,e,t)=>e in s?P_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Hi=(s,e)=>{for(var t in e||(e={}))Vg.call(e,t)&&Id(s,t,e[t]);if(Do)for(var t of Do(e))Hg.call(e,t)&&Id(s,t,e[t]);return s},Vc=(s,e)=>{var t={};for(var n in s)Vg.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&Do)for(var n of Do(s))e.indexOf(n)<0&&Hg.call(s,n)&&(t[n]=s[n]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Is;(s=>{const e=class{constructor(l,u,c,d){if(this.version=l,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let p=0;p<this.size;p++)f.push(!1);for(let p=0;p<this.size;p++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(c);if(this.drawCodewords(v),d==-1){let p=1e9;for(let m=0;m<8;m++){this.applyMask(m),this.drawFormatBits(m);const x=this.getPenaltyScore();x<p&&(d=m,p=x),this.applyMask(m)}}r(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,u){const c=s.QrSegment.makeSegments(l);return e.encodeSegments(c,u)}static encodeBinary(l,u){const c=s.QrSegment.makeBytes(l);return e.encodeSegments([c],u)}static encodeSegments(l,u,c=1,d=40,f=-1,v=!0){if(!(e.MIN_VERSION<=c&&c<=d&&d<=e.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let p,m;for(p=c;;p++){const y=e.getNumDataCodewords(p,u)*8,b=a.getTotalBits(l,p);if(b<=y){m=b;break}if(p>=d)throw new RangeError("Data too long")}for(const y of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])v&&m<=e.getNumDataCodewords(p,y)*8&&(u=y);let x=[];for(const y of l){n(y.mode.modeBits,4,x),n(y.numChars,y.mode.numCharCountBits(p),x);for(const b of y.getData())x.push(b)}r(x.length==m);const g=e.getNumDataCodewords(p,u)*8;r(x.length<=g),n(0,Math.min(4,g-x.length),x),n(0,(8-x.length%8)%8,x),r(x.length%8==0);for(let y=236;x.length<g;y^=253)n(y,8,x);let w=[];for(;w.length*8<x.length;)w.push(0);return x.forEach((y,b)=>w[b>>>3]|=y<<7-(b&7)),new e(p,u,w,f)}getModule(l,u){return 0<=l&&l<this.size&&0<=u&&u<this.size&&this.modules[u][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let c=0;c<this.size;c++)this.setFunctionModule(6,c,c%2==0),this.setFunctionModule(c,6,c%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),u=l.length;for(let c=0;c<u;c++)for(let d=0;d<u;d++)c==0&&d==0||c==0&&d==u-1||c==u-1&&d==0||this.drawAlignmentPattern(l[c],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const u=this.errorCorrectionLevel.formatBits<<3|l;let c=u;for(let f=0;f<10;f++)c=c<<1^(c>>>9)*1335;const d=(u<<10|c)^21522;r(d>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,i(d,f));this.setFunctionModule(8,7,i(d,6)),this.setFunctionModule(8,8,i(d,7)),this.setFunctionModule(7,8,i(d,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,i(d,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,i(d,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,i(d,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let c=0;c<12;c++)l=l<<1^(l>>>11)*7973;const u=this.version<<12|l;r(u>>>18==0);for(let c=0;c<18;c++){const d=i(u,c),f=this.size-11+c%3,v=Math.floor(c/3);this.setFunctionModule(f,v,d),this.setFunctionModule(v,f,d)}}drawFinderPattern(l,u){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){const f=Math.max(Math.abs(d),Math.abs(c)),v=l+d,p=u+c;0<=v&&v<this.size&&0<=p&&p<this.size&&this.setFunctionModule(v,p,f!=2&&f!=4)}}drawAlignmentPattern(l,u){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,u+c,Math.max(Math.abs(d),Math.abs(c))!=1)}setFunctionModule(l,u,c){this.modules[u][l]=c,this.isFunction[u][l]=!0}addEccAndInterleave(l){const u=this.version,c=this.errorCorrectionLevel;if(l.length!=e.getNumDataCodewords(u,c))throw new RangeError("Invalid argument");const d=e.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u],f=e.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u],v=Math.floor(e.getNumRawDataModules(u)/8),p=d-v%d,m=Math.floor(v/d);let x=[];const g=e.reedSolomonComputeDivisor(f);for(let y=0,b=0;y<d;y++){let S=l.slice(b,b+m-f+(y<p?0:1));b+=S.length;const k=e.reedSolomonComputeRemainder(S,g);y<p&&S.push(0),x.push(S.concat(k))}let w=[];for(let y=0;y<x[0].length;y++)x.forEach((b,S)=>{(y!=m-f||S>=p)&&w.push(b[y])});return r(w.length==v),w}drawCodewords(l){if(l.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(let d=0;d<this.size;d++)for(let f=0;f<2;f++){const v=c-f,m=(c+1&2)==0?this.size-1-d:d;!this.isFunction[m][v]&&u<l.length*8&&(this.modules[m][v]=i(l[u>>>3],7-(u&7)),u++)}}r(u==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let c=0;c<this.size;c++){let d;switch(l){case 0:d=(c+u)%2==0;break;case 1:d=u%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+u)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(u/2))%2==0;break;case 5:d=c*u%2+c*u%3==0;break;case 6:d=(c*u%2+c*u%3)%2==0;break;case 7:d=((c+u)%2+c*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][c]&&d&&(this.modules[u][c]=!this.modules[u][c])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let v=!1,p=0,m=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[f][x]==v?(p++,p==5?l+=e.PENALTY_N1:p>5&&l++):(this.finderPenaltyAddHistory(p,m),v||(l+=this.finderPenaltyCountPatterns(m)*e.PENALTY_N3),v=this.modules[f][x],p=1);l+=this.finderPenaltyTerminateAndCount(v,p,m)*e.PENALTY_N3}for(let f=0;f<this.size;f++){let v=!1,p=0,m=[0,0,0,0,0,0,0];for(let x=0;x<this.size;x++)this.modules[x][f]==v?(p++,p==5?l+=e.PENALTY_N1:p>5&&l++):(this.finderPenaltyAddHistory(p,m),v||(l+=this.finderPenaltyCountPatterns(m)*e.PENALTY_N3),v=this.modules[x][f],p=1);l+=this.finderPenaltyTerminateAndCount(v,p,m)*e.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let v=0;v<this.size-1;v++){const p=this.modules[f][v];p==this.modules[f][v+1]&&p==this.modules[f+1][v]&&p==this.modules[f+1][v+1]&&(l+=e.PENALTY_N2)}let u=0;for(const f of this.modules)u=f.reduce((v,p)=>v+(p?1:0),u);const c=this.size*this.size,d=Math.ceil(Math.abs(u*20-c*10)/c)-1;return r(0<=d&&d<=9),l+=d*e.PENALTY_N4,r(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let c=[6];for(let d=this.size-7;c.length<l;d-=u)c.splice(1,0,d);return c}}static getNumRawDataModules(l){if(l<e.MIN_VERSION||l>e.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*l+128)*l+64;if(l>=2){const c=Math.floor(l/7)+2;u-=(25*c-10)*c-55,l>=7&&(u-=36)}return r(208<=u&&u<=29648),u}static getNumDataCodewords(l,u){return Math.floor(e.getNumRawDataModules(l)/8)-e.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l]*e.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let u=[];for(let d=0;d<l-1;d++)u.push(0);u.push(1);let c=1;for(let d=0;d<l;d++){for(let f=0;f<u.length;f++)u[f]=e.reedSolomonMultiply(u[f],c),f+1<u.length&&(u[f]^=u[f+1]);c=e.reedSolomonMultiply(c,2)}return u}static reedSolomonComputeRemainder(l,u){let c=u.map(d=>0);for(const d of l){const f=d^c.shift();c.push(0),u.forEach((v,p)=>c[p]^=e.reedSolomonMultiply(v,f))}return c}static reedSolomonMultiply(l,u){if(l>>>8||u>>>8)throw new RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285,c^=(u>>>d&1)*l;return r(c>>>8==0),c}finderPenaltyCountPatterns(l){const u=l[1];r(u<=this.size*3);const c=u>0&&l[2]==u&&l[3]==u*3&&l[4]==u&&l[5]==u;return(c&&l[0]>=u*4&&l[6]>=u?1:0)+(c&&l[6]>=u*4&&l[0]>=u?1:0)}finderPenaltyTerminateAndCount(l,u,c){return l&&(this.finderPenaltyAddHistory(u,c),u=0),u+=this.size,this.finderPenaltyAddHistory(u,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(l,u){u[0]==0&&(l+=this.size),u.pop(),u.unshift(l)}};let t=e;t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],s.QrCode=t;function n(l,u,c){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let d=u-1;d>=0;d--)c.push(l>>>d&1)}function i(l,u){return(l>>>u&1)!=0}function r(l){if(!l)throw new Error("Assertion error")}const o=class{constructor(l,u,c){if(this.mode=l,this.numChars=u,this.bitData=c,u<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(l){let u=[];for(const c of l)n(c,8,u);return new o(o.Mode.BYTE,l.length,u)}static makeNumeric(l){if(!o.isNumeric(l))throw new RangeError("String contains non-numeric characters");let u=[];for(let c=0;c<l.length;){const d=Math.min(l.length-c,3);n(parseInt(l.substr(c,d),10),d*3+1,u),c+=d}return new o(o.Mode.NUMERIC,l.length,u)}static makeAlphanumeric(l){if(!o.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],c;for(c=0;c+2<=l.length;c+=2){let d=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c))*45;d+=o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c+1)),n(d,11,u)}return c<l.length&&n(o.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c)),6,u),new o(o.Mode.ALPHANUMERIC,l.length,u)}static makeSegments(l){return l==""?[]:o.isNumeric(l)?[o.makeNumeric(l)]:o.isAlphanumeric(l)?[o.makeAlphanumeric(l)]:[o.makeBytes(o.toUtf8ByteArray(l))]}static makeEci(l){let u=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,u);else if(l<16384)n(2,2,u),n(l,14,u);else if(l<1e6)n(6,3,u),n(l,21,u);else throw new RangeError("ECI assignment value out of range");return new o(o.Mode.ECI,0,u)}static isNumeric(l){return o.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return o.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,u){let c=0;for(const d of l){const f=d.mode.numCharCountBits(u);if(d.numChars>=1<<f)return 1/0;c+=4+f+d.bitData.length}return c}static toUtf8ByteArray(l){l=encodeURI(l);let u=[];for(let c=0;c<l.length;c++)l.charAt(c)!="%"?u.push(l.charCodeAt(c)):(u.push(parseInt(l.substr(c+1,2),16)),c+=2);return u}};let a=o;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",s.QrSegment=a})(Is||(Is={}));(s=>{(e=>{const t=class{constructor(i,r){this.ordinal=i,this.formatBits=r}};let n=t;n.LOW=new t(0,1),n.MEDIUM=new t(1,0),n.QUARTILE=new t(2,3),n.HIGH=new t(3,2),e.Ecc=n})(s.QrCode||(s.QrCode={}))})(Is||(Is={}));(s=>{(e=>{const t=class{constructor(i,r){this.modeBits=i,this.numBitsCharCount=r}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};let n=t;n.NUMERIC=new t(1,[10,12,14]),n.ALPHANUMERIC=new t(2,[9,11,13]),n.BYTE=new t(4,[8,16,16]),n.KANJI=new t(8,[8,10,12]),n.ECI=new t(7,[0,0,0]),e.Mode=n})(s.QrSegment||(s.QrSegment={}))})(Is||(Is={}));var vn=Is;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Kg={L:vn.QrCode.Ecc.LOW,M:vn.QrCode.Ecc.MEDIUM,Q:vn.QrCode.Ecc.QUARTILE,H:vn.QrCode.Ecc.HIGH},qg=128,Xg="L",Gg="#FFFFFF",Qg="#000000",Jg=!1,Hc=4,M_=.1;function Yg(s,e=0){const t=[];return s.forEach(function(n,i){let r=null;n.forEach(function(o,a){if(!o&&r!==null){t.push(`M${r+e} ${i+e}h${a-r}v1H${r+e}z`),r=null;return}if(a===n.length-1){if(!o)return;r===null?t.push(`M${a+e},${i+e} h1v1H${a+e}z`):t.push(`M${r+e},${i+e} h${a+1-r}v1H${r+e}z`);return}o&&r===null&&(r=a)})}),t.join("")}function Zg(s,e){return s.slice().map((t,n)=>n<e.y||n>=e.y+e.h?t:t.map((i,r)=>r<e.x||r>=e.x+e.w?i:!1))}function e0(s,e,t,n){if(n==null)return null;const i=t?Hc:0,r=s.length+i*2,o=Math.floor(e*M_),a=r/e,l=(n.width||o)*a,u=(n.height||o)*a,c=n.x==null?s.length/2-l/2:n.x*a,d=n.y==null?s.length/2-u/2:n.y*a;let f=null;if(n.excavate){let v=Math.floor(c),p=Math.floor(d),m=Math.ceil(l+c-v),x=Math.ceil(u+d-p);f={x:v,y:p,w:m,h:x}}return{x:c,y:d,h:u,w:l,excavation:f}}var R_=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function $_(s){const e=s,{value:t,size:n=qg,level:i=Xg,bgColor:r=Gg,fgColor:o=Qg,includeMargin:a=Jg,style:l,imageSettings:u}=e,c=Vc(e,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),d=u==null?void 0:u.src,f=fe.useRef(null),v=fe.useRef(null),[p,m]=fe.useState(!1);fe.useEffect(()=>{if(f.current!=null){const w=f.current,y=w.getContext("2d");if(!y)return;let b=vn.QrCode.encodeText(t,Kg[i]).getModules();const S=a?Hc:0,k=b.length+S*2,E=e0(b,n,a,u),C=v.current,$=E!=null&&C!==null&&C.complete&&C.naturalHeight!==0&&C.naturalWidth!==0;$&&E.excavation!=null&&(b=Zg(b,E.excavation));const M=window.devicePixelRatio||1;w.height=w.width=n*M;const I=n/k*M;y.scale(I,I),y.fillStyle=r,y.fillRect(0,0,k,k),y.fillStyle=o,R_?y.fill(new Path2D(Yg(b,S))):b.forEach(function(z,O){z.forEach(function(H,G){H&&y.fillRect(G+S,O+S,1,1)})}),$&&y.drawImage(C,E.x+S,E.y+S,E.w,E.h)}}),fe.useEffect(()=>{m(!1)},[d]);const x=Hi({height:n,width:n},l);let g=null;return d!=null&&(g=fe.createElement("img",{src:d,key:d,style:{display:"none"},onLoad:()=>{m(!0)},ref:v})),fe.createElement(fe.Fragment,null,fe.createElement("canvas",Hi({style:x,height:n,width:n,ref:f},c)),g)}function L_(s){const e=s,{value:t,size:n=qg,level:i=Xg,bgColor:r=Gg,fgColor:o=Qg,includeMargin:a=Jg,imageSettings:l}=e,u=Vc(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let c=vn.QrCode.encodeText(t,Kg[i]).getModules();const d=a?Hc:0,f=c.length+d*2,v=e0(c,n,a,l);let p=null;l!=null&&v!=null&&(v.excavation!=null&&(c=Zg(c,v.excavation)),p=fe.createElement("image",{xlinkHref:l.src,height:v.h,width:v.w,x:v.x+d,y:v.y+d,preserveAspectRatio:"none"}));const m=Yg(c,d);return fe.createElement("svg",Hi({height:n,width:n,viewBox:`0 0 ${f} ${f}`},u),fe.createElement("path",{fill:r,d:`M0,0 h${f}v${f}H0z`,shapeRendering:"crispEdges"}),fe.createElement("path",{fill:o,d:m,shapeRendering:"crispEdges"}),p)}var z_=s=>{const e=s,{renderAs:t}=e,n=Vc(e,["renderAs"]);return t==="svg"?fe.createElement(L_,Hi({},n)):fe.createElement($_,Hi({},n))};const O_=[{name:"Ethereum (ERC20)",protocol:"ERC20",fee:"10-25 USDT",time:"10-30 mins",min:"25 USDT",address:"0xA1E3B4288366e32ffD4AECF6D512b5b18dBA5595"},{name:"Tron (TRC20)",protocol:"TRC20",fee:"1 USDT",time:"1-3 mins",min:"1 USDT",address:"TLBJwHWe2o3S5sW8MMdrRtZcuxSQNBqnC3"}],ni=[{symbol:"USDT",name:"Tether USD"},{symbol:"BTC",name:"Bitcoin"},{symbol:"ETH",name:"Ethereum"},{symbol:"SOL",name:"Solana"},{symbol:"TRX",name:"TRON"},{symbol:"USDC",name:"USD Coin"},{symbol:"BNB",name:"BNB"},{symbol:"XRP",name:"XRP"},{symbol:"ADA",name:"Cardano"},{symbol:"DOGE",name:"Dogecoin"}],t0=({isOpen:s,onClose:e})=>{const[t,n]=_.useState("crypto"),[i,r]=_.useState(""),[o,a]=_.useState(null),[l,u]=_.useState(null),[c,d]=_.useState(!1);if(!s)return null;const f=ni.filter(g=>g.symbol.toLowerCase().includes(i.toLowerCase())||g.name.toLowerCase().includes(i.toLowerCase())),v=g=>{navigator.clipboard.writeText(g),d(!0),setTimeout(()=>d(!1),2e3)},p=()=>h.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"History"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:ni.slice(0,6).map(g=>h.jsx("button",{className:"bg-[#2D3748] hover:bg-[#374151] rounded-lg py-2 text-center transition-colors",onClick:()=>a(g.symbol),children:g.symbol},g.symbol))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Hot"}),h.jsx("div",{className:"grid grid-cols-3 gap-2 mb-4",children:ni.slice(0,6).map(g=>h.jsx("button",{className:"bg-[#2D3748] hover:bg-[#374151] rounded-lg py-2 text-center transition-colors",onClick:()=>a(g.symbol),children:g.symbol},g.symbol))})]}),h.jsx("div",{className:"space-y-2",children:f.map(g=>{const w=Be[g.symbol];return h.jsxs("button",{className:"w-full flex items-center p-3 hover:bg-[#2D3748] rounded-lg transition-colors",onClick:()=>a(g.symbol),children:[w?h.jsx("img",{src:w,alt:g.symbol,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:g.symbol[0]}),h.jsxs("div",{className:"text-left",children:[h.jsx("div",{className:"font-medium",children:g.symbol}),h.jsx("div",{className:"text-sm text-gray-400",children:g.name})]})]},g.symbol)})})]}),m=()=>{const g=ni.find(b=>b.symbol===o);if(!g)return null;const w=g.symbol==="USDT"?O_:[],y=Be[g.symbol];return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white mr-3",children:h.jsx(Oo,{size:24})}),h.jsxs("div",{className:"flex items-center",children:[y?h.jsx("img",{src:y,alt:g.symbol,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:g.symbol[0]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:g.symbol}),h.jsx("div",{className:"text-sm text-gray-400",children:g.name})]})]})]}),h.jsxs("div",{className:"bg-[#2D3748] p-4 rounded-lg mb-4",children:[h.jsx("div",{className:"flex items-center text-yellow-500 mb-2",children:h.jsx("span",{className:"text-sm",children:"⚠️ Make sure you select the deposit network that corresponds to the withdrawal platform. Failure to do so may result in the loss of your funds."})}),h.jsx("a",{href:"#",className:"text-[#22C55E] text-sm hover:underline",children:"Learn How to Select Deposit Network"})]}),w.length>0?h.jsx("div",{className:"space-y-3",children:w.map(b=>h.jsxs("button",{className:"w-full bg-[#2D3748] hover:bg-[#374151] rounded-lg p-4 text-left transition-colors",onClick:()=>u(b),children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:b.protocol}),h.jsx("span",{className:"text-gray-400 ml-2",children:b.name.split("(")[0].trim()})]}),h.jsx(ju,{size:20,className:"text-gray-400"})]}),h.jsxs("div",{className:"text-sm text-gray-400",children:[h.jsxs("div",{children:["Arrival Time ≈ ",b.time]}),h.jsxs("div",{children:["Min Deposit: ",b.min]})]})]},b.protocol))}):h.jsxs("div",{className:"text-center text-gray-400 mt-8",children:["Network selection not available for ",g.symbol]})]})},x=()=>{if(!l||!o)return null;ni.find(w=>w.symbol===o);const g=Be[o];return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx("button",{onClick:()=>u(null),className:"text-gray-400 hover:text-white mr-3",children:h.jsx(Oo,{size:24})}),h.jsxs("h2",{className:"text-xl font-semibold",children:["Deposit ",o]})]}),h.jsx("div",{className:"flex justify-center mb-6",children:h.jsx(z_,{value:l.address||"",size:200,level:"H",imageSettings:{src:g||"",height:40,width:40,excavate:!0}})}),h.jsxs("div",{className:"text-center text-gray-400 mb-6",children:["For ",o," deposit only"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-[#2D3748] rounded-lg",children:[h.jsxs("div",{className:"p-4 border-b border-gray-700",children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Network"}),h.jsxs("div",{className:"font-medium",children:[l.protocol," ",l.name.split("(")[1].replace(")","")]})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Address"}),h.jsxs("div",{className:"flex items-center justify-between bg-[#374151] p-3 rounded",children:[h.jsx("div",{className:"font-mono text-sm break-all",children:l.address}),h.jsx("button",{onClick:()=>v(l.address||""),className:"ml-2 text-[#22C55E] hover:text-[#16A34A]",children:h.jsx(m_,{size:20})})]}),c&&h.jsx("div",{className:"text-[#22C55E] text-sm mt-1",children:"Address copied!"})]})]}),h.jsxs("div",{className:"bg-[#2D3748] rounded-lg p-4 space-y-3",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Deposit to"}),h.jsx("span",{children:"Trading Account"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Min Deposit"}),h.jsxs("span",{children:[l.min," ",o]})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-400",children:"Expected Arrival"}),h.jsx("span",{children:l.time})]})]})]}),h.jsxs("div",{className:"flex space-x-4 mt-6",children:[h.jsx("button",{className:"flex-1 bg-[#2D3748] text-white py-3 rounded-lg font-medium hover:bg-[#374151] transition-all duration-200",children:"Save Image"}),h.jsx("button",{className:"flex-1 bg-[#22C55E] hover:bg-[#16A34A] text-white py-3 rounded-lg font-medium transition-all duration-200",children:"Share Address"})]})]})};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md h-[80vh] flex flex-col",children:[!l&&h.jsxs("div",{className:"p-4 border-b border-gray-700",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Deposit"}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:h.jsx(zn,{size:24})})]}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("button",{className:`flex-1 py-2 text-center rounded-lg transition-colors ${t==="crypto"?"bg-[#22C55E] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>n("crypto"),children:"Crypto"}),h.jsx("button",{className:`flex-1 py-2 text-center rounded-lg transition-colors ${t==="fiat"?"bg-[#22C55E] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>n("fiat"),children:"Fiat"})]})]}),h.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:t==="crypto"?l?x():o?m():h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative mb-4",children:[h.jsx("input",{type:"text",placeholder:"Search",value:i,onChange:g=>r(g.target.value),className:"w-full bg-[#2D3748] text-white pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]"}),h.jsx(dl,{size:20,className:"absolute left-3 top-2.5 text-gray-400"})]}),p()]}):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Coming Soon"}),h.jsx("p",{className:"text-gray-400",children:"Fiat deposits will be available shortly"})]})})})]})})},D_=[{name:"Ethereum (ERC20)",protocol:"ERC20",fee:"10-25 USDT",time:"10-30 mins",min:"25 USDT"},{name:"Tron (TRC20)",protocol:"TRC20",fee:"1 USDT",time:"1-3 mins",min:"1 USDT"}],s0=({isOpen:s,onClose:e})=>{const[t,n]=_.useState("crypto"),[i,r]=_.useState(""),[o,a]=_.useState(null),[l,u]=_.useState(null),[c,d]=_.useState(!1),[f,v]=_.useState(""),[p,m]=_.useState(""),[x,g]=_.useState(!1),[w,y]=_.useState(!1),[b,S]=_.useState(null),{tokenBalances:k}=ur();if(!s)return null;const E=()=>l?l.protocol==="ERC20"?15:1:0,C=()=>{if(!l||!f||!p)return;const z={token:o,network:l.protocol,amount:parseFloat(f),address:p,fee:E(),timestamp:new Date().toISOString()};S(z),g(!0),setTimeout(()=>{g(!1),y(!0),setTimeout(()=>{y(!1),e(),a(null),u(null),v(""),m("")},2e3)},2e3)},$=()=>{const z=k.find(O=>O.symbol===o);z&&v(z.balance.toString())};if(w)return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#22C55E] rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Fc,{size:32,className:"text-white"})}),h.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Withdrawal Initiated!"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"Your withdrawal request has been submitted successfully."}),h.jsx("div",{className:"bg-[#2D3748] rounded-lg p-4 text-left",children:h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsx("div",{className:"text-gray-400",children:"Amount:"}),h.jsxs("div",{children:[b.amount," ",b.token]}),h.jsx("div",{className:"text-gray-400",children:"Network:"}),h.jsx("div",{children:b.network}),h.jsx("div",{className:"text-gray-400",children:"Fee:"}),h.jsxs("div",{children:[b.fee," ",b.token]}),h.jsx("div",{className:"text-gray-400",children:"Status:"}),h.jsx("div",{className:"text-[#22C55E]",children:"Processing"})]})})]})});if(x)return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#2D3748] rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(hl,{size:32,className:"text-[#22C55E] animate-spin"})}),h.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Processing Withdrawal"}),h.jsx("p",{className:"text-gray-400",children:"Please wait while we process your withdrawal request."})]})});const M=()=>{const z=k.filter(O=>O.balance>0&&O.symbol.toLowerCase().includes(i.toLowerCase()));return h.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"History"}),h.jsx("div",{className:"grid grid-cols-3 gap-2",children:z.slice(0,6).map(O=>h.jsx("button",{className:"bg-[#2D3748] hover:bg-[#374151] rounded-lg py-2 text-center transition-colors",onClick:()=>a(O.symbol),children:O.symbol},O.symbol))})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Available for Withdrawal"}),h.jsx("div",{className:"space-y-2",children:z.map(O=>{const H=Be[O.symbol];return h.jsxs("button",{className:"w-full flex items-center justify-between p-3 hover:bg-[#2D3748] rounded-lg transition-colors",onClick:()=>a(O.symbol),children:[h.jsxs("div",{className:"flex items-center",children:[H?h.jsx("img",{src:H,alt:O.symbol,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:O.symbol[0]}),h.jsxs("div",{className:"text-left",children:[h.jsx("div",{className:"font-medium",children:O.symbol}),h.jsx("div",{className:"text-sm text-gray-400",children:O.symbol})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{children:O.balance.toFixed(8)}),h.jsxs("div",{className:"text-sm text-gray-400",children:["$",(O.balance*(O.symbol==="USDT"?1:100)).toFixed(2)]})]})]},O.symbol)})})]})]})},I=()=>{const z=k.find(H=>H.symbol===o);if(!z)return null;const O=Be[z.symbol];return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex items-center mb-6",children:[h.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white mr-3",children:h.jsx(Oo,{size:24})}),h.jsxs("div",{className:"flex items-center",children:[O?h.jsx("img",{src:O,alt:z.symbol,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:z.symbol[0]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:z.symbol}),h.jsx("div",{className:"text-sm text-gray-400",children:"Tether"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Wallet Address"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:p,onChange:H=>m(H.target.value),placeholder:"Press and hold to paste",className:"w-full bg-[#2D3748] text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#22C55E]"}),h.jsxs("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex space-x-2",children:[h.jsx("button",{className:"text-[#22C55E] hover:text-[#16A34A] p-1",children:"Address Book"}),h.jsx("button",{className:"text-[#22C55E] hover:text-[#16A34A] p-1",children:h.jsx(p_,{size:18})})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Network"}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{className:"w-full bg-[#2D3748] hover:bg-[#374151] rounded-lg p-3 text-left flex items-center justify-between",onClick:()=>d(!c),children:[l?h.jsxs(h.Fragment,{children:[h.jsxs("span",{children:[l.protocol," ",l.name.split("(")[1].replace(")","")]}),h.jsxs("span",{className:"text-sm text-gray-400",children:["Fee: ",l.fee]})]}):h.jsx("span",{className:"text-gray-400",children:"Select a network"}),h.jsx(ju,{size:20,className:"text-gray-400"})]}),c&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#2D3748] rounded-lg shadow-lg z-10",children:D_.map(H=>h.jsxs("button",{className:"w-full p-3 hover:bg-[#374151] text-left",onClick:()=>{u(H),d(!1)},children:[h.jsx("div",{className:"flex justify-between items-center",children:h.jsxs("div",{children:[h.jsx("span",{className:"font-medium",children:H.protocol}),h.jsx("span",{className:"text-gray-400 ml-2",children:H.name.split("(")[0].trim()})]})}),h.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[h.jsxs("div",{children:["Arrival Time ≈ ",H.time]}),h.jsxs("div",{children:["Min Withdrawal: ",H.min]})]})]},H.protocol))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm text-gray-400 mb-1 block",children:"Withdrawal Amount"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"number",value:f,onChange:H=>v(H.target.value),placeholder:`Min amount 0 ${z.symbol}`,className:"w-full bg-[#2D3748] text-white px-3 py-2 rounded-lg focus:outline-none focus:ring-1 focus:ring-[#22C55E]"}),h.jsx("button",{onClick:$,className:"absolute right-2 top-1/2 -translate-y-1/2 text-[#22C55E] hover:text-[#16A34A] text-sm",children:"Max"})]}),h.jsxs("div",{className:"mt-2 text-sm",children:[h.jsxs("div",{className:"flex items-center text-gray-400",children:[h.jsxs("span",{children:["Available ",z.balance.toFixed(8)," ",z.symbol]}),h.jsx("button",{className:"ml-2 text-[#22C55E]",children:h.jsx(ju,{size:16})})]}),h.jsx("div",{className:"flex items-center mt-1",children:h.jsxs("div",{className:"flex items-center text-[#22C55E] bg-[#22C55E] bg-opacity-10 px-2 py-0.5 rounded",children:[h.jsx("span",{children:"Funding Account"}),h.jsx("span",{className:"ml-2",children:"0.00"}),h.jsx("span",{className:"ml-1",children:"Priority"})]})}),h.jsx("div",{className:"flex items-center mt-1",children:h.jsxs("div",{className:"flex items-center text-[#22C55E] bg-[#22C55E] bg-opacity-10 px-2 py-0.5 rounded",children:[h.jsx("span",{children:"Trading Account"}),h.jsx("span",{className:"ml-2",children:z.balance.toFixed(8)})]})})]})]}),h.jsxs("div",{className:"bg-[#2D3748] rounded-lg p-4",children:[h.jsx("h4",{className:"text-gray-400 mb-2",children:"Note:"}),h.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[h.jsx("li",{children:"Daily withdrawal amount: The remaining daily withdrawal amount is 999,999 USDT. The maximum withdrawal amount is 999,999 USDT."}),h.jsx("li",{children:"Do not withdraw to an ICO or crowd funding address."}),h.jsx("li",{children:"We will process your withdrawal within 30 minutes. The time it takes for the assets to transfer to your wallet depends on the selected network."}),h.jsx("li",{children:"To enhance the security of your assets, large withdrawals may be processed manually."}),h.jsx("li",{children:"Withdrawals will be deducted from your Funding Account first, then your Trading Account."})]})]})]}),h.jsxs("div",{className:"mt-6",children:[h.jsxs("div",{className:"flex justify-between items-center text-sm mb-2",children:[h.jsx("span",{className:"text-gray-400",children:"Amount Received"}),h.jsx("span",{children:f?`${(parseFloat(f)-E()).toFixed(2)} ${z.symbol}`:`-- ${z.symbol}`})]}),h.jsxs("div",{className:"flex justify-between items-center text-sm mb-4",children:[h.jsx("span",{className:"text-gray-400",children:"Fee"}),h.jsx("span",{children:l?`${E()} ${z.symbol}`:`0 ${z.symbol}`})]}),h.jsx("button",{onClick:C,disabled:!f||!p||!l,className:"w-full bg-[#22C55E] hover:bg-[#16A34A] disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-3 rounded-lg font-medium transition-all duration-200",children:"Withdraw"})]})]})};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md h-[80vh] flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b border-gray-700",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Withdraw"}),h.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:h.jsx(zn,{size:24})})]}),h.jsxs("div",{className:"flex space-x-4",children:[h.jsx("button",{className:`flex-1 py-2 text-center rounded-lg transition-colors ${t==="crypto"?"bg-[#22C55E] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>n("crypto"),children:"Crypto"}),h.jsx("button",{className:`flex-1 py-2 text-center rounded-lg transition-colors ${t==="fiat"?"bg-[#22C55E] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>n("fiat"),children:"Fiat"})]})]}),h.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:t==="crypto"?o?I():h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative mb-4",children:[h.jsx("input",{type:"text",placeholder:"Search",value:i,onChange:z=>r(z.target.value),className:"w-full bg-[#2D3748] text-white pl-10 pr-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]"}),h.jsx(dl,{size:20,className:"absolute left-3 top-2.5 text-gray-400"})]}),M()]}):h.jsx("div",{className:"flex items-center justify-center h-full",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Coming Soon"}),h.jsx("p",{className:"text-gray-400",children:"Fiat withdrawals will be available shortly"})]})})})]})})},Tu=({onSelect:s})=>{const[e,t]=_.useState([]),[n,i]=_.useState(""),[r,o]=_.useState("marketCap"),[a,l]=_.useState("desc"),[u,c]=_.useState(new Map),{selectedToken:d,setSelectedToken:f}=Wn();_.useEffect(()=>{const y=qs.onPriceUpdate(b=>{t(S=>{const k=new Map(u);return S.forEach(E=>{k.set(E.symbol,E.price)}),c(k),b})});return()=>y()},[]);const v=y=>{r===y?l(a==="asc"?"desc":"asc"):(o(y),l("desc"))},p=(y,b)=>{const S=u.get(y);return S?b>S?"text-green-500":b<S?"text-red-500":"":""},m=y=>{f(y),s&&s(y)},g=[...e].sort((y,b)=>{const S=a==="asc"?1:-1;switch(r){case"symbol":return S*y.symbol.localeCompare(b.symbol);case"price":return S*(y.price-b.price);case"priceChange":return S*(y.priceChange-b.priceChange);case"marketCap":const k=y.price*y.volume,E=b.price*b.volume;return S*(k-E);default:return 0}}).filter(y=>y.symbol.toLowerCase().includes(n.toLowerCase())),w=y=>y.replace("USDT","");return h.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[h.jsx("div",{className:"p-3 border-b border-gray-700",children:h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",placeholder:"Search",value:n,onChange:y=>i(y.target.value),className:"w-full bg-gray-700 text-white px-3 py-2 pl-9 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm"}),h.jsx(dl,{className:"absolute left-2.5 top-2.5 text-gray-400",size:16})]})}),h.jsx("div",{className:"overflow-y-auto max-h-[calc(100vh-200px)] scrollbar-thin",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{className:"bg-gray-750 sticky top-0",children:h.jsxs("tr",{className:"text-gray-400 text-xs",children:[h.jsx("th",{className:"px-3 py-2 text-left cursor-pointer hover:text-white",onClick:()=>v("symbol"),children:"Pair"}),h.jsx("th",{className:"px-3 py-2 text-right cursor-pointer hover:text-white",onClick:()=>v("price"),children:"Price"}),h.jsx("th",{className:"px-3 py-2 text-right cursor-pointer hover:text-white",onClick:()=>v("priceChange"),children:"24h"})]})}),h.jsx("tbody",{children:g.map(y=>{const b=w(y.symbol),S=Be[b];return h.jsxs("tr",{className:`border-b border-gray-700 hover:bg-gray-750 cursor-pointer transition-colors ${d===y.symbol?"bg-gray-700":""}`,onClick:()=>m(y.symbol),children:[h.jsxs("td",{className:"px-3 py-3 flex items-center",children:[S?h.jsx("img",{src:S,alt:b,className:"w-6 h-6 rounded-full mr-2"}):h.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center text-xs mr-2",children:b.substring(0,1)}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:b}),h.jsx("div",{className:"text-xs text-gray-400",children:"USDT"})]})]}),h.jsx("td",{className:`px-3 py-3 text-right ${p(y.symbol,y.price)}`,children:ie(y.price)}),h.jsx("td",{className:`px-3 py-3 text-right ${y.priceChange>0?"text-green-500":y.priceChange<0?"text-red-500":"text-gray-400"}`,children:y.priceChange!==void 0?Nu(y.priceChange):"0.00%"})]},y.symbol)})})]})})]})},n0=({isOpen:s,onClose:e,prices:t,tokenBalances:n})=>{var Xt,Je;const[i,r]=_.useState("USDT"),[o,a]=_.useState("BTCUSDT"),[l,u]=_.useState(""),[c,d]=_.useState(!1),[f,v]=_.useState(!1),[p,m]=_.useState(!1),[x,g]=_.useState(!1),[w,y]=_.useState(5),{portfolioBalance:b,convertTokens:S}=ur(),k=_.useRef(null),E=_.useRef(null);_.useEffect(()=>{const B=yt=>{k.current&&!k.current.contains(yt.target)&&d(!1),E.current&&!E.current.contains(yt.target)&&v(!1)};return document.addEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[]);const C=()=>{r("USDT"),a("BTCUSDT"),u(""),d(!1),v(!1),m(!1),g(!1),y(5),e()},$=B=>B.replace("USDT",""),M=i==="USDT"?{symbol:"USDT",price:1,priceChange:0,volume:0}:t.find(B=>B.symbol===i),I=o==="USDT"?{symbol:"USDT",price:1,priceChange:0,volume:0}:t.find(B=>B.symbol===o),z=i==="USDT"?"USDT":$(i),O=o==="USDT"?"USDT":$(o),H=Be[z],G=Be[O],Q=((Xt=n.find(B=>B.symbol===z))==null?void 0:Xt.balance)||0,Qe=((Je=n.find(B=>B.symbol===O))==null?void 0:Je.balance)||0,P=()=>!M||!I||!l?"0":z==="USDT"?(parseFloat(l)/I.price).toFixed(8):O==="USDT"?(parseFloat(l)*M.price).toFixed(2):(parseFloat(l)*M.price/I.price).toFixed(8),L=()=>!M||!I?1:z==="USDT"?1/I.price:O==="USDT"?M.price:M.price/I.price,D=()=>Q,q=()=>{u(D().toString())},se=B=>{B===o&&a(i),r(B),d(!1),u("")},Pt=B=>{B===i&&r(o),a(B),v(!1),u("")};_.useEffect(()=>{let B;if(x&&w>0)B=setInterval(()=>{y(yt=>yt-1)},1e3);else if(x&&w===0){const yt=parseFloat(l),wl=L();S(z,O,yt,wl),g(!1),m(!0),setTimeout(()=>{C()},2e3)}return()=>clearInterval(B)},[x,w]);const ot=()=>{g(!0)};return s?p?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#22C55E] rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Fc,{size:32,className:"text-white"})}),h.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Conversion Successful!"}),h.jsxs("p",{className:"text-gray-400",children:["Converted ",l," ",z," to ",P()," ",O]})]})}):x?h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#2D3748] rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(hl,{size:32,className:"text-[#22C55E] animate-spin"})}),h.jsxs("h2",{className:"text-xl font-semibold mb-2",children:["Converting ",z," to ",O]}),h.jsxs("p",{className:"text-gray-400",children:["Please wait ",w," seconds while we process your conversion at the current market rate."]}),h.jsx("div",{className:"mt-4 h-2 bg-[#2D3748] rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-[#22C55E] transition-all duration-1000",style:{width:`${(5-w)/5*100}%`}})})]})}):h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-6",children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Convert"}),h.jsx("button",{onClick:C,className:"text-gray-400 hover:text-white",children:h.jsx(zn,{size:24})})]}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"text-sm text-gray-400",children:"From"}),h.jsxs("div",{className:"text-sm text-gray-400",children:["Balance: ",z==="USDT"?ie(Q):Q.toFixed(8)," ",z]})]}),h.jsxs("div",{className:"relative",ref:k,children:[h.jsx("div",{className:"bg-[#2D3748] p-3 rounded-lg flex items-center justify-between cursor-pointer",onClick:()=>d(!0),children:h.jsxs("div",{className:"flex items-center",children:[H?h.jsx("img",{src:H,alt:z,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:z.substring(0,1)}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:z}),h.jsx("div",{className:"text-sm text-gray-400",children:M?ie(M.price):"-"})]})]})}),c&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#2D3748] rounded-lg shadow-lg z-10",children:h.jsx(Tu,{onSelect:se})})]}),h.jsxs("div",{className:"relative mt-2",children:[h.jsx("input",{type:"number",value:l,onChange:B=>u(B.target.value),placeholder:"0.00",className:"w-full bg-[#2D3748] p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]"}),h.jsx("button",{onClick:q,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-sm text-[#22C55E] hover:text-[#16A34A]",children:"MAX"})]}),h.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:["≈ ",l&&M?ie(parseFloat(l)*M.price):"$0.00"]})]}),h.jsx("button",{className:"mx-auto block p-2 rounded-full bg-[#2D3748] hover:bg-[#374151] mb-4",onClick:()=>{const B=i;r(o),a(B),u("")},children:h.jsx(Uc,{className:"text-[#22C55E]"})}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("label",{className:"text-sm text-gray-400",children:"To"}),h.jsxs("div",{className:"text-sm text-gray-400",children:["Balance: ",O==="USDT"?ie(Qe):Qe.toFixed(8)," ",O]})]}),h.jsxs("div",{className:"relative",ref:E,children:[h.jsx("div",{className:"bg-[#2D3748] p-3 rounded-lg flex items-center justify-between cursor-pointer",onClick:()=>v(!0),children:h.jsxs("div",{className:"flex items-center",children:[G?h.jsx("img",{src:G,alt:O,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:O.substring(0,1)}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:O}),h.jsx("div",{className:"text-sm text-gray-400",children:I?ie(I.price):"-"})]})]})}),f&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#2D3748] rounded-lg shadow-lg z-10",children:h.jsx(Tu,{onSelect:Pt})})]}),h.jsxs("div",{className:"bg-[#2D3748] mt-2 p-3 rounded-lg",children:[h.jsx("div",{className:"text-lg",children:P()}),h.jsxs("div",{className:"text-sm text-gray-400",children:["≈ ",l&&I?ie(parseFloat(P())*I.price):"$0.00"]})]})]}),h.jsx("button",{className:"w-full bg-[#22C55E] hover:bg-[#16A34A] text-white py-3 rounded-lg font-medium transition-all duration-200",onClick:ot,disabled:!l||parseFloat(l)<=0||parseFloat(l)>D(),children:!l||parseFloat(l)<=0?"Enter an amount":parseFloat(l)>D()?"Insufficient balance":"Convert Now"})]})}):null},A_=({onNavigateToFutures:s})=>{const[e,t]=fe.useState([]),{setSelectedToken:n}=Wn(),{tokenBalances:i}=ur(),[r,o]=_.useState(!1),[a,l]=_.useState(!1),[u,c]=_.useState(!1);fe.useEffect(()=>{const p=qs.onPriceUpdate(m=>{t(m)});return()=>p()},[]);const d=e.sort((p,m)=>m.price*m.volume-p.price*p.volume),f=p=>p.replace("USDT",""),v=p=>{n(p),s()};return h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"relative w-full h-48 overflow-hidden",children:[h.jsx("img",{src:"https://images.pexels.com/photos/7788009/pexels-photo-7788009.jpeg",alt:"Trading Banner",className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent to-[#0F172A]"}),h.jsxs("div",{className:"absolute bottom-4 left-4 right-4 text-white",children:[h.jsx("h1",{className:"text-2xl font-bold mb-2",children:"EVEX"}),h.jsx("p",{className:"text-sm text-gray-300",children:"A CRYPTO FINANCIAL INFRASTRUCTURE BUILT FOR PROFESSIONAL INVESTORS"})]})]}),h.jsxs("div",{className:"px-4 py-2",children:[h.jsx("div",{className:"grid grid-cols-3 gap-4 mb-4",children:d.slice(0,3).map(p=>{const m=f(p.symbol),x=Be[m],g=p.priceChange>=0;return h.jsxs("div",{className:`p-3 rounded-lg transition-colors ${g?"bg-[#22C55E] bg-opacity-10 border border-[#22C55E] border-opacity-20":"bg-[#EF4444] bg-opacity-10 border border-[#EF4444] border-opacity-20"}`,children:[h.jsxs("div",{className:"flex items-center mb-1",children:[x?h.jsx("img",{src:x,alt:m,className:"w-6 h-6 rounded-full mr-2"}):h.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-600 flex items-center justify-center text-xs mr-2",children:m.substring(0,1)}),h.jsx("div",{className:"text-sm font-medium",children:m})]}),h.jsx("div",{className:`text-xs ${g?"text-[#22C55E]":"text-[#EF4444]"}`,children:Nu(p.priceChange)}),h.jsx("div",{className:"font-mono text-sm mt-1",children:ie(p.price)})]},p.symbol)})}),h.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[h.jsxs("button",{onClick:()=>o(!0),className:"flex flex-col items-center justify-center bg-[#1E293B] p-4 rounded-lg",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#2D3748] flex items-center justify-center mb-2",children:h.jsx(Fg,{className:"w-5 h-5 text-[#22C55E]"})}),h.jsx("span",{className:"text-xs",children:"Deposit"})]}),h.jsxs("button",{onClick:()=>l(!0),className:"flex flex-col items-center justify-center bg-[#1E293B] p-4 rounded-lg",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#2D3748] flex items-center justify-center mb-2",children:h.jsx(Bg,{className:"w-5 h-5 text-[#EF4444]"})}),h.jsx("span",{className:"text-xs",children:"Withdraw"})]}),h.jsxs("button",{onClick:()=>c(!0),className:"flex flex-col items-center justify-center bg-[#1E293B] p-4 rounded-lg",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#2D3748] flex items-center justify-center mb-2",children:h.jsx(Uc,{className:"w-5 h-5 text-[#3B82F6]"})}),h.jsx("span",{className:"text-xs",children:"Convert"})]}),h.jsxs("button",{className:"flex flex-col items-center justify-center bg-[#1E293B] p-4 rounded-lg",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#2D3748] flex items-center justify-center mb-2",children:h.jsx(__,{className:"w-5 h-5 text-[#F59E0B]"})}),h.jsx("span",{className:"text-xs",children:"More"})]})]}),h.jsxs("div",{className:"bg-[#1E293B] rounded-lg overflow-hidden",children:[h.jsx("div",{className:"p-3 border-b border-gray-700",children:h.jsx("h2",{className:"font-medium",children:"Hot Markets"})}),h.jsx("div",{className:"divide-y divide-gray-700",children:d.map(p=>{const m=f(p.symbol),x=Be[m];return h.jsxs("div",{className:"flex items-center justify-between p-3",children:[h.jsxs("div",{className:"flex items-center",children:[x?h.jsx("img",{src:x,alt:m,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-lg mr-3",children:m.substring(0,1)}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:m}),h.jsx("div",{className:`text-sm ${p.priceChange>0?"text-[#22C55E]":"text-[#EF4444]"}`,children:Nu(p.priceChange)})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"font-mono",children:ie(p.price)}),h.jsx("button",{onClick:()=>v(p.symbol),className:"mt-1 bg-[#22C55E] hover:bg-[#16A34A] text-white px-3 py-1 rounded text-sm",children:"Trade"})]})]},p.symbol)})})]})]}),h.jsx(t0,{isOpen:r,onClose:()=>o(!1)}),h.jsx(s0,{isOpen:a,onClose:()=>l(!1)}),h.jsx(n0,{isOpen:u,onClose:()=>c(!1),prices:e,tokenBalances:i})]})};function ee(s){var e=s.width,t=s.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(t<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:t}}function $s(s,e){return s.width===e.width&&s.height===e.height}var I_=function(){function s(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return s.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(s.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),s.prototype.subscribe=function(e){var t=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){t._observers=t._observers.filter(function(i){return i!==n})}}},s.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},s.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},s.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},s.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},s}();function U_(s){return new I_(s)}var F_=function(){function s(e,t,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=ee({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=t??function(r){return r},this._allowResizeObserver=(i=n==null?void 0:n.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return s.prototype.dispose=function(){var e,t;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(t=this._devicePixelRatioObservable)===null||t===void 0||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(s.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bitmapSize",{get:function(){return ee({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),s.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=ee(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},s.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},s.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(s.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),s.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},s.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},s.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},s.prototype._resizeBitmap=function(e){var t=this.bitmapSize;$s(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},s.prototype._emitBitmapSizeChanged=function(e,t){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,t)})},s.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,n=ee(this._transformBitmapSize(e,this._canvasElementClientSize)),i=$s(this.bitmapSize,n)?null:n;t===null&&i===null||t!==null&&i!==null&&$s(t,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(t,i))},s.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,t)})},s.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}W_().then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()})},s.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var t=Ud(this._canvasElement);if(t===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=U_(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},s.prototype._invalidateBitmapSize=function(){var e,t;if(this._canvasElement!==null){var n=Ud(this._canvasElement);if(n!==null){var i=(t=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&t!==void 0?t:n.devicePixelRatio,r=this._canvasElement.getClientRects(),o=r[0]!==void 0?V_(r[0],i):ee({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},s.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var n=t.find(function(o){return o.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],r=ee({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},s}();function B_(s,e){if(e.type==="device-pixel-content-box")return new F_(s,e.transform,e.options);throw new Error("Unsupported binding target")}function Ud(s){return s.ownerDocument.defaultView}function W_(){return new Promise(function(s){var e=new ResizeObserver(function(t){s(t.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function V_(s,e){return ee({width:Math.round(s.left*e+s.width*e)-Math.round(s.left*e),height:Math.round(s.top*e+s.height*e)-Math.round(s.top*e)})}var H_=function(){function s(e,t,n){if(t.width===0||t.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return s.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},s.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(s.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),s}();function Us(s,e){var t=s.canvasElementClientSize;if(t.width===0||t.height===0)return null;var n=s.bitmapSize;if(n.width===0||n.height===0)return null;var i=s.canvasElement.getContext("2d",e);return i===null?null:new H_(i,t,n)}/*!
 * @license
 * TradingView Lightweight Charts™ v4.2.3
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const K_={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},q_={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},X_={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},G_={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Q_={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},J_={color:"#26a69a",base:0},i0={color:"#2196f3"},r0={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Fd,Bd;function Fs(s,e){const t={0:[],1:[s.lineWidth,s.lineWidth],2:[2*s.lineWidth,2*s.lineWidth],3:[6*s.lineWidth,6*s.lineWidth],4:[s.lineWidth,4*s.lineWidth]}[e];s.setLineDash(t)}function o0(s,e,t,n){s.beginPath();const i=s.lineWidth%2?.5:0;s.moveTo(t,e+i),s.lineTo(n,e+i),s.stroke()}function gs(s,e){if(!s)throw new Error("Assertion failed"+(e?": "+e:""))}function $e(s){if(s===void 0)throw new Error("Value is undefined");return s}function j(s){if(s===null)throw new Error("Value is null");return s}function yn(s){return j($e(s))}(function(s){s[s.Simple=0]="Simple",s[s.WithSteps=1]="WithSteps",s[s.Curved=2]="Curved"})(Fd||(Fd={})),function(s){s[s.Solid=0]="Solid",s[s.Dotted=1]="Dotted",s[s.Dashed=2]="Dashed",s[s.LargeDashed=3]="LargeDashed",s[s.SparseDotted=4]="SparseDotted"}(Bd||(Bd={}));const Wd={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function Ye(s){return s<0?0:s>255?255:Math.round(s)||0}function l0(s){return s<=0||s>1?Math.min(Math.max(s,0),1):Math.round(1e4*s)/1e4}const Y_=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,Z_=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,eS=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,tS=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function Ki(s){(s=s.toLowerCase())in Wd&&(s=Wd[s]);{const e=tS.exec(s)||eS.exec(s);if(e)return[Ye(parseInt(e[1],10)),Ye(parseInt(e[2],10)),Ye(parseInt(e[3],10)),l0(e.length<5?1:parseFloat(e[4]))]}{const e=Z_.exec(s);if(e)return[Ye(parseInt(e[1],16)),Ye(parseInt(e[2],16)),Ye(parseInt(e[3],16)),1]}{const e=Y_.exec(s);if(e)return[Ye(17*parseInt(e[1],16)),Ye(17*parseInt(e[2],16)),Ye(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${s}`)}function a0(s){return .199*s[0]+.687*s[1]+.114*s[2]}function fl(s){const e=Ki(s);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:a0(e)>160?"black":"white"}}class de{constructor(){this.h=[]}l(e,t,n){const i={o:e,_:t,u:n===!0};this.h.push(i)}v(e){const t=this.h.findIndex(n=>e===n.o);t>-1&&this.h.splice(t,1)}p(e){this.h=this.h.filter(t=>t._!==e)}m(e,t,n){const i=[...this.h];this.h=this.h.filter(r=>!r.u),i.forEach(r=>r.o(e,t,n))}M(){return this.h.length>0}S(){this.h=[]}}function gt(s,...e){for(const t of e)for(const n in t)t[n]!==void 0&&Object.prototype.hasOwnProperty.call(t,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof t[n]!="object"||s[n]===void 0||Array.isArray(t[n])?s[n]=t[n]:gt(s[n],t[n]));return s}function Et(s){return typeof s=="number"&&isFinite(s)}function qi(s){return typeof s=="number"&&s%1==0}function cr(s){return typeof s=="string"}function Or(s){return typeof s=="boolean"}function Dt(s){const e=s;if(!e||typeof e!="object")return e;let t,n,i;for(n in t=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&typeof i=="object"?Dt(i):i);return t}function sS(s){return s!==null}function Xi(s){return s===null?void 0:s}const Kc="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function On(s,e,t){return e===void 0&&(e=Kc),`${t=t!==void 0?`${t} `:""}${s}px ${e}`}class nS{constructor(e){this.k={C:1,T:5,P:NaN,R:"",D:"",V:"",O:"",B:0,A:0,I:0,L:0,N:0},this.F=e}W(){const e=this.k,t=this.j(),n=this.H();return e.P===t&&e.D===n||(e.P=t,e.D=n,e.R=On(t,n),e.L=2.5/12*t,e.B=e.L,e.A=t/12*e.T,e.I=t/12*e.T,e.N=0),e.V=this.$(),e.O=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class qc{constructor(){this.Y=[]}Z(e){this.Y=e}X(e,t,n){this.Y.forEach(i=>{i.X(e,t,n)})}}class vt{X(e,t,n){e.useBitmapCoordinateSpace(i=>this.K(i,t,n))}}class iS extends vt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(this.G===null||this.G.tt===null)return;const i=this.G.tt,r=this.G,o=Math.max(1,Math.floor(t))%2/2,a=l=>{e.beginPath();for(let u=i.to-1;u>=i.from;--u){const c=r.it[u],d=Math.round(c.nt*t)+o,f=c.st*n,v=l*n+o;e.moveTo(d,f),e.arc(d,f,v,0,2*Math.PI)}e.fill()};r.et>0&&(e.fillStyle=r.rt,a(r.ht+r.et)),e.fillStyle=r.lt,a(r.ht)}}function rS(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const oS={from:0,to:1};class lS{constructor(e,t){this.ut=new qc,this.ct=[],this.dt=[],this.ft=!0,this.F=e,this.vt=t,this.ut.Z(this.ct)}bt(e){const t=this.F.wt();t.length!==this.ct.length&&(this.dt=t.map(rS),this.ct=this.dt.map(n=>{const i=new iS;return i.J(n),i}),this.ut.Z(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const e=this.vt.W().mode===2,t=this.F.wt(),n=this.vt.xt(),i=this.F.St();t.forEach((r,o)=>{var a;const l=this.dt[o],u=r.kt(n);if(e||u===null||!r.yt())return void(l.tt=null);const c=j(r.Ct());l.lt=u.Tt,l.ht=u.ht,l.et=u.Pt,l.it[0]._t=u._t,l.it[0].st=r.Dt().Rt(u._t,c.Vt),l.rt=(a=u.Ot)!==null&&a!==void 0?a:this.F.Bt(l.it[0].st/r.Dt().At()),l.it[0].ot=n,l.it[0].nt=i.It(n),l.tt=oS})}}class aS extends vt{constructor(e){super(),this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const r=this.zt.Lt.yt,o=this.zt.Et.yt;if(!r&&!o)return;const a=Math.round(this.zt.nt*n),l=Math.round(this.zt.st*i);e.lineCap="butt",r&&a>=0&&(e.lineWidth=Math.floor(this.zt.Lt.et*n),e.strokeStyle=this.zt.Lt.V,e.fillStyle=this.zt.Lt.V,Fs(e,this.zt.Lt.Nt),function(u,c,d,f){u.beginPath();const v=u.lineWidth%2?.5:0;u.moveTo(c+v,d),u.lineTo(c+v,f),u.stroke()}(e,a,0,t.height)),o&&l>=0&&(e.lineWidth=Math.floor(this.zt.Et.et*i),e.strokeStyle=this.zt.Et.V,e.fillStyle=this.zt.Et.V,Fs(e,this.zt.Et.Nt),o0(e,l,0,t.width))}}class uS{constructor(e){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,V:"",yt:!1},Et:{et:1,Nt:0,V:"",yt:!1},nt:0,st:0},this.Wt=new aS(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.yt(),t=j(this.jt.Ht()),n=t.$t().W().crosshair,i=this.Ft;if(n.mode===2)return i.Et.yt=!1,void(i.Lt.yt=!1);i.Et.yt=e&&this.jt.Ut(t),i.Lt.yt=e&&this.jt.qt(),i.Et.et=n.horzLine.width,i.Et.Nt=n.horzLine.style,i.Et.V=n.horzLine.color,i.Lt.et=n.vertLine.width,i.Lt.Nt=n.vertLine.style,i.Lt.V=n.vertLine.color,i.nt=this.jt.Yt(),i.st=this.jt.Zt()}}function cS(s,e,t,n,i,r){s.fillRect(e+r,t,n-2*r,r),s.fillRect(e+r,t+i-r,n-2*r,r),s.fillRect(e,t,r,i),s.fillRect(e+n-r,t,r,i)}function pl(s,e,t,n,i,r){s.save(),s.globalCompositeOperation="copy",s.fillStyle=r,s.fillRect(e,t,n,i),s.restore()}function Vd(s,e,t,n,i,r){s.beginPath(),s.roundRect?s.roundRect(e,t,n,i,r):(s.lineTo(e+n-r[1],t),r[1]!==0&&s.arcTo(e+n,t,e+n,t+r[1],r[1]),s.lineTo(e+n,t+i-r[2]),r[2]!==0&&s.arcTo(e+n,t+i,e+n-r[2],t+i,r[2]),s.lineTo(e+r[3],t+i),r[3]!==0&&s.arcTo(e,t+i,e,t+i-r[3],r[3]),s.lineTo(e,t+r[0]),r[0]!==0&&s.arcTo(e,t,e+r[0],t,r[0]))}function Hd(s,e,t,n,i,r,o=0,a=[0,0,0,0],l=""){if(s.save(),!o||!l||l===r)return Vd(s,e,t,n,i,a),s.fillStyle=r,s.fill(),void s.restore();const u=o/2;var c;Vd(s,e+u,t+u,n-o,i-o,(c=-u,a.map(d=>d===0?d:d+c))),r!=="transparent"&&(s.fillStyle=r,s.fill()),l!=="transparent"&&(s.lineWidth=o,s.strokeStyle=l,s.closePath(),s.stroke()),s.restore()}function u0(s,e,t,n,i,r,o){s.save(),s.globalCompositeOperation="copy";const a=s.createLinearGradient(0,0,0,i);a.addColorStop(0,r),a.addColorStop(1,o),s.fillStyle=a,s.fillRect(e,t,n,i),s.restore()}class Kd{constructor(e,t){this.J(e,t)}J(e,t){this.zt=e,this.Xt=t}At(e,t){return this.zt.yt?e.P+e.L+e.B:0}X(e,t,n,i){if(!this.zt.yt||this.zt.Kt.length===0)return;const r=this.zt.V,o=this.Xt.t,a=e.useBitmapCoordinateSpace(l=>{const u=l.context;u.font=t.R;const c=this.Gt(l,t,n,i),d=c.Jt;return c.Qt?Hd(u,d.ti,d.ii,d.ni,d.si,o,d.ei,[d.ht,0,0,d.ht],o):Hd(u,d.ri,d.ii,d.ni,d.si,o,d.ei,[0,d.ht,d.ht,0],o),this.zt.hi&&(u.fillStyle=r,u.fillRect(d.ri,d.li,d.ai-d.ri,d.oi)),this.zt._i&&(u.fillStyle=t.O,u.fillRect(c.Qt?d.ui-d.ei:0,d.ii,d.ei,d.ci-d.ii)),c});e.useMediaCoordinateSpace(({context:l})=>{const u=a.di;l.font=t.R,l.textAlign=a.Qt?"right":"left",l.textBaseline="middle",l.fillStyle=r,l.fillText(this.zt.Kt,u.fi,(u.ii+u.ci)/2+u.pi)})}Gt(e,t,n,i){var r;const{context:o,bitmapSize:a,mediaSize:l,horizontalPixelRatio:u,verticalPixelRatio:c}=e,d=this.zt.hi||!this.zt.mi?t.T:0,f=this.zt.bi?t.C:0,v=t.L+this.Xt.wi,p=t.B+this.Xt.gi,m=t.A,x=t.I,g=this.zt.Kt,w=t.P,y=n.Mi(o,g),b=Math.ceil(n.xi(o,g)),S=w+v+p,k=t.C+m+x+b+d,E=Math.max(1,Math.floor(c));let C=Math.round(S*c);C%2!=E%2&&(C+=1);const $=f>0?Math.max(1,Math.floor(f*u)):0,M=Math.round(k*u),I=Math.round(d*u),z=(r=this.Xt.Si)!==null&&r!==void 0?r:this.Xt.ki,O=Math.round(z*c)-Math.floor(.5*c),H=Math.floor(O+E/2-C/2),G=H+C,Q=i==="right",Qe=Q?l.width-f:f,P=Q?a.width-$:$;let L,D,q;return Q?(L=P-M,D=P-I,q=Qe-d-m-f):(L=P+M,D=P+I,q=Qe+d+m),{Qt:Q,Jt:{ii:H,li:O,ci:G,ni:M,si:C,ht:2*u,ei:$,ti:L,ri:P,ai:D,oi:E,ui:a.width},di:{ii:H/c,ci:G/c,fi:q,pi:y}}}}class ml{constructor(e){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Kt:"",yt:!1,hi:!0,mi:!1,Ot:"",V:"#FFF",_i:!1,bi:!1},this.Ti={Kt:"",yt:!1,hi:!1,mi:!0,Ot:"",V:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(e||Kd)(this.Ci,this.yi),this.Ri=new(e||Kd)(this.Ti,this.yi)}Kt(){return this.Di(),this.Ci.Kt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}At(e,t=!1){return Math.max(this.Pi.At(e,t),this.Ri.At(e,t))}Vi(){return this.yi.Si||0}Oi(e){this.yi.Si=e}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Ai(){return this.Di(),this.Ci.yt}gt(e){return this.Di(),this.Ci.hi=this.Ci.hi&&e.W().ticksVisible,this.Ti.hi=this.Ti.hi&&e.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class hS extends ml{constructor(e,t,n){super(),this.jt=e,this.Li=t,this.Ei=n}zi(e,t,n){if(e.yt=!1,this.jt.W().mode===2)return;const i=this.jt.W().horzLine;if(!i.labelVisible)return;const r=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||r===null)return;const o=fl(i.labelBackgroundColor);n.t=o.t,e.V=o.i;const a=2/12*this.Li.P();n.wi=a,n.gi=a;const l=this.Ei(this.Li);n.ki=l.ki,e.Kt=this.Li.Fi(l._t,r),e.yt=!0}}const dS=/[1-9]/g;class c0{constructor(){this.zt=null}J(e){this.zt=e}X(e,t){if(this.zt===null||this.zt.yt===!1||this.zt.Kt.length===0)return;const n=e.useMediaCoordinateSpace(({context:f})=>(f.font=t.R,Math.round(t.Wi.xi(f,j(this.zt).Kt,dS))));if(n<=0)return;const i=t.ji,r=n+2*i,o=r/2,a=this.zt.Hi;let l=this.zt.ki,u=Math.floor(l-o)+.5;u<0?(l+=Math.abs(0-u),u=Math.floor(l-o)+.5):u+r>a&&(l-=Math.abs(a-(u+r)),u=Math.floor(l-o)+.5);const c=u+r,d=Math.ceil(0+t.C+t.T+t.L+t.P+t.B);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:v,verticalPixelRatio:p})=>{const m=j(this.zt);f.fillStyle=m.t;const x=Math.round(u*v),g=Math.round(0*p),w=Math.round(c*v),y=Math.round(d*p),b=Math.round(2*v);if(f.beginPath(),f.moveTo(x,g),f.lineTo(x,y-b),f.arcTo(x,y,x+b,y,b),f.lineTo(w-b,y),f.arcTo(w,y,w,y-b,b),f.lineTo(w,g),f.fill(),m.hi){const S=Math.round(m.ki*v),k=g,E=Math.round((k+t.T)*p);f.fillStyle=m.V;const C=Math.max(1,Math.floor(v)),$=Math.floor(.5*v);f.fillRect(S-$,k,C,E-k)}}),e.useMediaCoordinateSpace(({context:f})=>{const v=j(this.zt),p=0+t.C+t.T+t.L+t.P/2;f.font=t.R,f.textAlign="left",f.textBaseline="middle",f.fillStyle=v.V;const m=t.Wi.Mi(f,"Apr0");f.translate(u+i,p+m),f.fillText(v.Kt,0,0)})}}class fS{constructor(e,t,n){this.ft=!0,this.Wt=new c0,this.Ft={yt:!1,t:"#4c525e",V:"white",Kt:"",Hi:0,ki:NaN,hi:!0},this.vt=e,this.$i=t,this.Ei=n}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const e=this.Ft;if(e.yt=!1,this.vt.W().mode===2)return;const t=this.vt.W().vertLine;if(!t.labelVisible)return;const n=this.$i.St();if(n.Ni())return;e.Hi=n.Hi();const i=this.Ei();if(i===null)return;e.ki=i.ki;const r=n.Ui(this.vt.xt());e.Kt=n.qi(j(r)),e.yt=!0;const o=fl(t.labelBackgroundColor);e.t=o.t,e.V=o.i,e.hi=n.W().ticksVisible}}class Xc{constructor(){this.Yi=null,this.Zi=0}Xi(){return this.Zi}Ki(e){this.Zi=e}Dt(){return this.Yi}Gi(e){this.Yi=e}Ji(e){return[]}Qi(){return[]}yt(){return!0}}var qd;(function(s){s[s.Normal=0]="Normal",s[s.Magnet=1]="Magnet",s[s.Hidden=2]="Hidden"})(qd||(qd={}));class pS extends Xc{constructor(e,t){super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=e,this.cn=t,this.dn=new lS(e,this),this.fn=((i,r)=>o=>{const a=r(),l=i();if(o===j(this.tn).vn())return{_t:l,ki:a};{const u=j(o.Ct());return{_t:o.pn(a,u),ki:a}}})(()=>this.nn,()=>this.an);const n=((i,r)=>()=>{const o=this.$i.St().mn(i()),a=r();return o&&Number.isFinite(a)?{ot:o,ki:a}:null})(()=>this.sn,()=>this.Yt());this.bn=new fS(this,e,n),this.wn=new uS(this)}W(){return this.cn}gn(e,t){this._n=e,this.un=t}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(e,t,n){this.hn||(this.hn=!0),this.en=!0,this.yn(e,t,n)}xt(){return this.sn}Yt(){return this.ln}Zt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(e){return this.tn!==null?[this.wn,this.dn]:[]}Ut(e){return e===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(e,t){this.en&&this.tn===e||this.rn.clear();const n=[];return this.tn===e&&n.push(this.Dn(this.rn,t,this.fn)),n}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}Vn(){this.wn.bt(),this.rn.forEach(e=>e.bt()),this.bn.bt(),this.dn.bt()}On(e){return e&&!e.vn().Ni()?e.vn():null}yn(e,t,n){this.Bn(e,t,n)&&this.Vn()}Bn(e,t,n){const i=this.ln,r=this.an,o=this.nn,a=this.sn,l=this.tn,u=this.On(n);this.sn=e,this.ln=isNaN(e)?NaN:this.$i.St().It(e),this.tn=n;const c=u!==null?u.Ct():null;return u!==null&&c!==null?(this.nn=t,this.an=u.Rt(t,c)):(this.nn=NaN,this.an=NaN),i!==this.ln||r!==this.an||a!==this.sn||o!==this.nn||l!==this.tn}Tn(){const e=this.$i.wt().map(n=>n.In().An()).filter(sS),t=e.length===0?null:Math.max(...e);this.sn=t!==null?t:NaN}Dn(e,t,n){let i=e.get(t);return i===void 0&&(i=new hS(this,t,n),e.set(t,i)),i}}function gl(s){return s==="left"||s==="right"}class Se{constructor(e){this.zn=new Map,this.Ln=[],this.En=e}Nn(e,t){const n=function(i,r){return i===void 0?r:{Fn:Math.max(i.Fn,r.Fn),Wn:i.Wn||r.Wn}}(this.zn.get(e),t);this.zn.set(e,n)}jn(){return this.En}Hn(e){const t=this.zn.get(e);return t===void 0?{Fn:this.En}:{Fn:Math.max(this.En,t.Fn),Wn:t.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(e){this.Un(),this.Ln=[{qn:1,Vt:e}]}Zn(e){this.Xn(),this.Ln.push({qn:5,Vt:e})}Un(){this.Xn(),this.Ln.push({qn:6})}Kn(){this.Un(),this.Ln=[{qn:4}]}Gn(e){this.Un(),this.Ln.push({qn:2,Vt:e})}Jn(e){this.Un(),this.Ln.push({qn:3,Vt:e})}Qn(){return this.Ln}ts(e){for(const t of e.Ln)this.ns(t);this.En=Math.max(this.En,e.En),e.zn.forEach((t,n)=>{this.Nn(n,t)})}static ss(){return new Se(2)}static es(){return new Se(3)}ns(e){switch(e.qn){case 0:this.$n();break;case 1:this.Yn(e.Vt);break;case 2:this.Gn(e.Vt);break;case 3:this.Jn(e.Vt);break;case 4:this.Kn();break;case 5:this.Zn(e.Vt);break;case 6:this.Xn()}}Xn(){const e=this.Ln.findIndex(t=>t.qn===5);e!==-1&&this.Ln.splice(e,1)}}const Xd=".";function At(s,e){if(!Et(s))return"n/a";if(!qi(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?s.toString():("0000000000000000"+s.toString()).slice(-e)}class vl{constructor(e,t){if(t||(t=1),Et(e)&&qi(e)||(e=100),e<0)throw new TypeError("invalid base");this.Li=e,this.rs=t,this.hs()}format(e){const t=e<0?"−":"";return e=Math.abs(e),t+this.ls(e)}hs(){if(this._s=0,this.Li>0&&this.rs>0){let e=this.Li;for(;e>1;)e/=10,this._s++}}ls(e){const t=this.Li/this.rs;let n=Math.floor(e),i="";const r=this._s!==void 0?this._s:NaN;if(t>1){let o=+(Math.round(e*t)-n*t).toFixed(this._s);o>=t&&(o-=t,n+=1),i=Xd+At(+o.toFixed(this._s)*this.rs,r)}else n=Math.round(n*t)/t,r>0&&(i=Xd+At(0,r));return n.toFixed(0)+i}}class h0 extends vl{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class mS{constructor(e){this.us=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.cs(e):e<999995?t+this.cs(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.cs(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.cs(e/1e9)+"B")}cs(e){let t;const n=Math.pow(10,this.us);return t=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.us).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(i,r)=>r)}}function d0(s,e,t,n,i,r,o){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:a,horizontalPixelRatio:l,verticalPixelRatio:u}=s,c=e[n.from];let d=r(s,c),f=c;if(n.to-n.from<2){const v=i/2;a.beginPath();const p={nt:c.nt-v,st:c.st},m={nt:c.nt+v,st:c.st};a.moveTo(p.nt*l,p.st*u),a.lineTo(m.nt*l,m.st*u),o(s,d,p,m)}else{const v=(m,x)=>{o(s,d,f,x),a.beginPath(),d=m,f=x};let p=f;a.beginPath(),a.moveTo(c.nt*l,c.st*u);for(let m=n.from+1;m<n.to;++m){p=e[m];const x=r(s,p);switch(t){case 0:a.lineTo(p.nt*l,p.st*u);break;case 1:a.lineTo(p.nt*l,e[m-1].st*u),x!==d&&(v(x,p),a.lineTo(p.nt*l,e[m-1].st*u)),a.lineTo(p.nt*l,p.st*u);break;case 2:{const[g,w]=gS(e,m-1,m);a.bezierCurveTo(g.nt*l,g.st*u,w.nt*l,w.st*u,p.nt*l,p.st*u);break}}t!==1&&x!==d&&(v(x,p),a.moveTo(p.nt*l,p.st*u))}(f!==p||f===p&&t===1)&&o(s,d,f,p)}}const Gd=6;function sa(s,e){return{nt:s.nt-e.nt,st:s.st-e.st}}function Qd(s,e){return{nt:s.nt/e,st:s.st/e}}function gS(s,e,t){const n=Math.max(0,e-1),i=Math.min(s.length-1,t+1);var r,o;return[(r=s[e],o=Qd(sa(s[t],s[n]),Gd),{nt:r.nt+o.nt,st:r.st+o.st}),sa(s[t],Qd(sa(s[i],s[e]),Gd))]}function vS(s,e,t,n,i){const{context:r,horizontalPixelRatio:o,verticalPixelRatio:a}=e;r.lineTo(i.nt*o,s*a),r.lineTo(n.nt*o,s*a),r.closePath(),r.fillStyle=t,r.fill()}class f0 extends vt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){var t;if(this.G===null)return;const{it:n,tt:i,ds:r,et:o,Nt:a,fs:l}=this.G,u=(t=this.G.vs)!==null&&t!==void 0?t:this.G.ps?0:e.mediaSize.height;if(i===null)return;const c=e.context;c.lineCap="butt",c.lineJoin="round",c.lineWidth=o,Fs(c,a),c.lineWidth=1,d0(e,n,l,i,r,this.bs.bind(this),vS.bind(null,u))}}function Pu(s,e,t){return Math.min(Math.max(s,e),t)}function Dr(s,e,t){return e-s<=t}function p0(s){const e=Math.ceil(s);return e%2==0?e-1:e}class Gc{ws(e,t){const n=this.gs,{Ms:i,xs:r,Ss:o,ks:a,ys:l,vs:u}=t;if(this.Cs===void 0||n===void 0||n.Ms!==i||n.xs!==r||n.Ss!==o||n.ks!==a||n.vs!==u||n.ys!==l){const c=e.context.createLinearGradient(0,0,0,l);if(c.addColorStop(0,i),u!=null){const d=Pu(u*e.verticalPixelRatio/l,0,1);c.addColorStop(d,r),c.addColorStop(d,o)}c.addColorStop(1,a),this.Cs=c,this.gs=t}return this.Cs}}class yS extends f0{constructor(){super(...arguments),this.Ts=new Gc}bs(e,t){return this.Ts.ws(e,{Ms:t.Ps,xs:"",Ss:"",ks:t.Rs,ys:e.bitmapSize.height})}}function wS(s,e){const t=s.context;t.strokeStyle=e,t.stroke()}class m0 extends vt{constructor(){super(...arguments),this.G=null}J(e){this.G=e}K(e){if(this.G===null)return;const{it:t,tt:n,ds:i,fs:r,et:o,Nt:a,Ds:l}=this.G;if(n===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=o*e.verticalPixelRatio,Fs(u,a),u.lineJoin="round";const c=this.Vs.bind(this);r!==void 0&&d0(e,t,r,n,i,c,wS),l&&function(d,f,v,p,m){const{horizontalPixelRatio:x,verticalPixelRatio:g,context:w}=d;let y=null;const b=Math.max(1,Math.floor(x))%2/2,S=v*g+b;for(let k=p.to-1;k>=p.from;--k){const E=f[k];if(E){const C=m(d,E);C!==y&&(w.beginPath(),y!==null&&w.fill(),w.fillStyle=C,y=C);const $=Math.round(E.nt*x)+b,M=E.st*g;w.moveTo($,M),w.arc($,M,S,0,2*Math.PI)}}w.fill()}(e,t,l,n,c)}}class g0 extends m0{Vs(e,t){return t.lt}}function v0(s,e,t,n,i=0,r=e.length){let o=r-i;for(;0<o;){const a=o>>1,l=i+a;n(e[l],t)===s?(i=l+1,o-=a+1):o=a}return i}const hr=v0.bind(null,!0),y0=v0.bind(null,!1);function xS(s,e){return s.ot<e}function bS(s,e){return e<s.ot}function w0(s,e,t){const n=e.Os(),i=e.ui(),r=hr(s,n,xS),o=y0(s,i,bS);if(!t)return{from:r,to:o};let a=r,l=o;return r>0&&r<s.length&&s[r].ot>=n&&(a=r-1),o>0&&o<s.length&&s[o-1].ot<=i&&(l=o+1),{from:a,to:l}}class Qc{constructor(e,t,n){this.Bs=!0,this.As=!0,this.Is=!0,this.zs=[],this.Ls=null,this.Es=e,this.Ns=t,this.Fs=n}bt(e){this.Bs=!0,e==="data"&&(this.As=!0),e==="options"&&(this.Is=!0)}gt(){return this.Es.yt()?(this.Ws(),this.Ls===null?null:this.js):null}Hs(){this.zs=this.zs.map(e=>Object.assign(Object.assign({},e),this.Es.Us().$s(e.ot)))}qs(){this.Ls=null}Ws(){this.As&&(this.Ys(),this.As=!1),this.Is&&(this.Hs(),this.Is=!1),this.Bs&&(this.Zs(),this.Bs=!1)}Zs(){const e=this.Es.Dt(),t=this.Ns.St();if(this.qs(),t.Ni()||e.Ni())return;const n=t.Xs();if(n===null||this.Es.In().Ks()===0)return;const i=this.Es.Ct();i!==null&&(this.Ls=w0(this.zs,n,this.Fs),this.Gs(e,t,i.Vt),this.Js())}}class yl extends Qc{constructor(e,t){super(e,t,!0)}Gs(e,t,n){t.Qs(this.zs,Xi(this.Ls)),e.te(this.zs,n,Xi(this.Ls))}ie(e,t){return{ot:e,_t:t,nt:NaN,st:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>{const n=t.Vt[3];return this.se(t.ee,n,e)})}}class _S extends yl{constructor(e,t){super(e,t),this.js=new qc,this.re=new yS,this.he=new g0,this.js.Z([this.re,this.he])}se(e,t,n){return Object.assign(Object.assign({},this.ie(e,t)),n.$s(e))}Js(){const e=this.Es.W();this.re.J({fs:e.lineType,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,vs:null,ps:e.invertFilledArea,tt:this.Ls,ds:this.Ns.St().le()}),this.he.J({fs:e.lineVisible?e.lineType:void 0,it:this.zs,Nt:e.lineStyle,et:e.lineWidth,tt:this.Ls,ds:this.Ns.St().le(),Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}class SS extends vt{constructor(){super(...arguments),this.zt=null,this.ae=0,this.oe=0}J(e){this.zt=e}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;this.ae=this._e(t),this.ae>=2&&Math.max(1,Math.floor(t))%2!=this.ae%2&&this.ae--,this.oe=this.zt.ue?Math.min(this.ae,Math.floor(t)):this.ae;let i=null;const r=this.oe<=this.ae&&this.zt.le>=Math.floor(1.5*t);for(let o=this.zt.tt.from;o<this.zt.tt.to;++o){const a=this.zt.In[o];i!==a.ce&&(e.fillStyle=a.ce,i=a.ce);const l=Math.floor(.5*this.oe),u=Math.round(a.nt*t),c=u-l,d=this.oe,f=c+d-1,v=Math.min(a.de,a.fe),p=Math.max(a.de,a.fe),m=Math.round(v*n)-l,x=Math.round(p*n)+l,g=Math.max(x-m,this.oe);e.fillRect(c,m,d,g);const w=Math.ceil(1.5*this.ae);if(r){if(this.zt.ve){const k=u-w;let E=Math.max(m,Math.round(a.pe*n)-l),C=E+d-1;C>m+g-1&&(C=m+g-1,E=C-d+1),e.fillRect(k,E,c-k,C-E+1)}const y=u+w;let b=Math.max(m,Math.round(a.me*n)-l),S=b+d-1;S>m+g-1&&(S=m+g-1,b=S-d+1),e.fillRect(f+1,b,y-f,S-b+1)}}}_e(e){const t=Math.floor(e);return Math.max(t,Math.floor(function(n,i){return Math.floor(.3*n*i)}(j(this.zt).le,e)))}}class x0 extends Qc{constructor(e,t){super(e,t,!1)}Gs(e,t,n){t.Qs(this.zs,Xi(this.Ls)),e.be(this.zs,n,Xi(this.Ls))}we(e,t,n){return{ot:e,ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3],nt:NaN,pe:NaN,de:NaN,fe:NaN,me:NaN}}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>this.se(t.ee,t,e))}}class kS extends x0{constructor(){super(...arguments),this.js=new SS}se(e,t,n){return Object.assign(Object.assign({},this.we(e,t,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),ve:e.openVisible,ue:e.thinBars,tt:this.Ls})}}class ES extends f0{constructor(){super(...arguments),this.Ts=new Gc}bs(e,t){const n=this.G;return this.Ts.ws(e,{Ms:t.ke,xs:t.ye,Ss:t.Ce,ks:t.Te,ys:e.bitmapSize.height,vs:n.vs})}}class CS extends m0{constructor(){super(...arguments),this.Pe=new Gc}Vs(e,t){const n=this.G;return this.Pe.ws(e,{Ms:t.Re,xs:t.Re,Ss:t.De,ks:t.De,ys:e.bitmapSize.height,vs:n.vs})}}class jS extends yl{constructor(e,t){super(e,t),this.js=new qc,this.Ve=new ES,this.Oe=new CS,this.js.Z([this.Ve,this.Oe])}se(e,t,n){return Object.assign(Object.assign({},this.ie(e,t)),n.$s(e))}Js(){const e=this.Es.Ct();if(e===null)return;const t=this.Es.W(),n=this.Es.Dt().Rt(t.baseValue.price,e.Vt),i=this.Ns.St().le();this.Ve.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineType,vs:n,ps:!1,tt:this.Ls,ds:i}),this.Oe.J({it:this.zs,et:t.lineWidth,Nt:t.lineStyle,fs:t.lineVisible?t.lineType:void 0,Ds:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,vs:n,tt:this.Ls,ds:i})}}class NS extends vt{constructor(){super(...arguments),this.zt=null,this.ae=0}J(e){this.zt=e}K(e){if(this.zt===null||this.zt.In.length===0||this.zt.tt===null)return;const{horizontalPixelRatio:t}=e;this.ae=function(r,o){if(r>=2.5&&r<=4)return Math.floor(3*o);const a=1-.2*Math.atan(Math.max(4,r)-4)/(.5*Math.PI),l=Math.floor(r*a*o),u=Math.floor(r*o),c=Math.min(l,u);return Math.max(Math.floor(o),c)}(this.zt.le,t),this.ae>=2&&Math.floor(t)%2!=this.ae%2&&this.ae--;const n=this.zt.In;this.zt.Be&&this.Ae(e,n,this.zt.tt),this.zt._i&&this.Ie(e,n,this.zt.tt);const i=this.ze(t);(!this.zt._i||this.ae>2*i)&&this.Le(e,n,this.zt.tt)}Ae(e,t,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="",l=Math.min(Math.floor(r),Math.floor(this.zt.le*r));l=Math.max(Math.floor(r),Math.min(l,this.ae));const u=Math.floor(.5*l);let c=null;for(let d=n.from;d<n.to;d++){const f=t[d];f.Ee!==a&&(i.fillStyle=f.Ee,a=f.Ee);const v=Math.round(Math.min(f.pe,f.me)*o),p=Math.round(Math.max(f.pe,f.me)*o),m=Math.round(f.de*o),x=Math.round(f.fe*o);let g=Math.round(r*f.nt)-u;const w=g+l-1;c!==null&&(g=Math.max(c+1,g),g=Math.min(g,w));const y=w-g+1;i.fillRect(g,m,y,v-m),i.fillRect(g,p+1,y,x-p),c=w}}ze(e){let t=Math.floor(1*e);this.ae<=2*t&&(t=Math.floor(.5*(this.ae-1)));const n=Math.max(Math.floor(e),t);return this.ae<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}Ie(e,t,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const l=this.ze(r);let u=null;for(let c=n.from;c<n.to;c++){const d=t[c];d.Ne!==a&&(i.fillStyle=d.Ne,a=d.Ne);let f=Math.round(d.nt*r)-Math.floor(.5*this.ae);const v=f+this.ae-1,p=Math.round(Math.min(d.pe,d.me)*o),m=Math.round(Math.max(d.pe,d.me)*o);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,v)),this.zt.le*r>2*l)cS(i,f,p,v-f+1,m-p+1,l);else{const x=v-f+1;i.fillRect(f,p,x,m-p+1)}u=v}}Le(e,t,n){if(this.zt===null)return;const{context:i,horizontalPixelRatio:r,verticalPixelRatio:o}=e;let a="";const l=this.ze(r);for(let u=n.from;u<n.to;u++){const c=t[u];let d=Math.round(Math.min(c.pe,c.me)*o),f=Math.round(Math.max(c.pe,c.me)*o),v=Math.round(c.nt*r)-Math.floor(.5*this.ae),p=v+this.ae-1;if(c.ce!==a){const m=c.ce;i.fillStyle=m,a=m}this.zt._i&&(v+=l,d+=l,p-=l,f-=l),d>f||i.fillRect(v,d,p-v+1,f-d+1)}}}class TS extends x0{constructor(){super(...arguments),this.js=new NS}se(e,t,n){return Object.assign(Object.assign({},this.we(e,t,n)),n.$s(e))}Js(){const e=this.Es.W();this.js.J({In:this.zs,le:this.Ns.St().le(),Be:e.wickVisible,_i:e.borderVisible,tt:this.Ls})}}class PS{constructor(e,t){this.Fe=e,this.Li=t}X(e,t,n){this.Fe.draw(e,this.Li,t,n)}}class na extends Qc{constructor(e,t,n){super(e,t,!1),this.wn=n,this.js=new PS(this.wn.renderer(),i=>{const r=e.Ct();return r===null?null:e.Dt().Rt(i,r.Vt)})}We(e){return this.wn.priceValueBuilder(e)}je(e){return this.wn.isWhitespace(e)}Ys(){const e=this.Es.Us();this.zs=this.Es.In().ne().map(t=>Object.assign(Object.assign({ot:t.ee,nt:NaN},e.$s(t.ee)),{He:t.$e}))}Gs(e,t){t.Qs(this.zs,Xi(this.Ls))}Js(){this.wn.update({bars:this.zs.map(MS),barSpacing:this.Ns.St().le(),visibleRange:this.Ls},this.Es.W())}}function MS(s){return{x:s.nt,time:s.ot,originalData:s.He,barColor:s.ce}}class RS extends vt{constructor(){super(...arguments),this.zt=null,this.Ue=[]}J(e){this.zt=e,this.Ue=[]}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return;this.Ue.length||this.qe(t);const i=Math.max(1,Math.floor(n)),r=Math.round(this.zt.Ye*n)-Math.floor(i/2),o=r+i;for(let a=this.zt.tt.from;a<this.zt.tt.to;a++){const l=this.zt.it[a],u=this.Ue[a-this.zt.tt.from],c=Math.round(l.st*n);let d,f;e.fillStyle=l.ce,c<=r?(d=c,f=o):(d=r,f=c-Math.floor(i/2)+i),e.fillRect(u.Os,d,u.ui-u.Os+1,f-d)}}qe(e){if(this.zt===null||this.zt.it.length===0||this.zt.tt===null)return void(this.Ue=[]);const t=Math.ceil(this.zt.le*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.zt.le*e)-t;this.Ue=new Array(this.zt.tt.to-this.zt.tt.from);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const o=this.zt.it[r],a=Math.round(o.nt*e);let l,u;if(n%2){const c=(n-1)/2;l=a-c,u=a+c}else{const c=n/2;l=a-c,u=a+c-1}this.Ue[r-this.zt.tt.from]={Os:l,ui:u,Ze:a,Xe:o.nt*e,ot:o.ot}}for(let r=this.zt.tt.from+1;r<this.zt.tt.to;r++){const o=this.Ue[r-this.zt.tt.from],a=this.Ue[r-this.zt.tt.from-1];o.ot===a.ot+1&&o.Os-a.ui!==t+1&&(a.Ze>a.Xe?a.ui=o.Os-t-1:o.Os=a.ui+t+1)}let i=Math.ceil(this.zt.le*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const o=this.Ue[r-this.zt.tt.from];o.ui<o.Os&&(o.ui=o.Os);const a=o.ui-o.Os+1;i=Math.min(a,i)}if(t>0&&i<4)for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const o=this.Ue[r-this.zt.tt.from];o.ui-o.Os+1>i&&(o.Ze>o.Xe?o.ui-=1:o.Os+=1)}}}class $S extends yl{constructor(){super(...arguments),this.js=new RS}se(e,t,n){return Object.assign(Object.assign({},this.ie(e,t)),n.$s(e))}Js(){const e={it:this.zs,le:this.Ns.St().le(),tt:this.Ls,Ye:this.Es.Dt().Rt(this.Es.W().base,j(this.Es.Ct()).Vt)};this.js.J(e)}}class LS extends yl{constructor(){super(...arguments),this.js=new g0}se(e,t,n){return Object.assign(Object.assign({},this.ie(e,t)),n.$s(e))}Js(){const e=this.Es.W(),t={it:this.zs,Nt:e.lineStyle,fs:e.lineVisible?e.lineType:void 0,et:e.lineWidth,Ds:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,tt:this.Ls,ds:this.Ns.St().le()};this.js.J(t)}}const zS=/[2-9]/g;class Gi{constructor(e=50){this.Ke=0,this.Ge=1,this.Je=1,this.Qe={},this.tr=new Map,this.ir=e}nr(){this.Ke=0,this.tr.clear(),this.Ge=1,this.Je=1,this.Qe={}}xi(e,t,n){return this.sr(e,t,n).width}Mi(e,t,n){const i=this.sr(e,t,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}sr(e,t,n){const i=n||zS,r=String(t).replace(i,"0");if(this.tr.has(r))return $e(this.tr.get(r)).er;if(this.Ke===this.ir){const a=this.Qe[this.Je];delete this.Qe[this.Je],this.tr.delete(a),this.Je++,this.Ke--}e.save(),e.textBaseline="middle";const o=e.measureText(r);return e.restore(),o.width===0&&t.length||(this.tr.set(r,{er:o,rr:this.Ge}),this.Qe[this.Ge]=r,this.Ke++,this.Ge++),o}}class OS{constructor(e){this.hr=null,this.k=null,this.lr="right",this.ar=e}_r(e,t,n){this.hr=e,this.k=t,this.lr=n}X(e){this.k!==null&&this.hr!==null&&this.hr.X(e,this.k,this.ar,this.lr)}}class b0{constructor(e,t,n){this.ur=e,this.ar=new Gi(50),this.cr=t,this.F=n,this.j=-1,this.Wt=new OS(this.ar)}gt(){const e=this.F.dr(this.cr);if(e===null)return null;const t=e.vr(this.cr)?e.pr():this.cr.Dt();if(t===null)return null;const n=e.mr(t);if(n==="overlay")return null;const i=this.F.br();return i.P!==this.j&&(this.j=i.P,this.ar.nr()),this.Wt._r(this.ur.Ii(),i,n),this.Wt}}class DS extends vt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}wr(e,t){var n;if(!(!((n=this.zt)===null||n===void 0)&&n.yt))return null;const{st:i,et:r,gr:o}=this.zt;return t>=i-r-7&&t<=i+r+7?{Mr:this.zt,gr:o}:null}K({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null||this.zt.yt===!1)return;const r=Math.round(this.zt.st*i);r<0||r>t.height||(e.lineCap="butt",e.strokeStyle=this.zt.V,e.lineWidth=Math.floor(this.zt.et*n),Fs(e,this.zt.Nt),o0(e,r,0,t.width))}}class Jc{constructor(e){this.Sr={st:0,V:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.kr=new DS,this.ft=!0,this.Es=e,this.Ns=e.$t(),this.kr.J(this.Sr)}bt(){this.ft=!0}gt(){return this.Es.yt()?(this.ft&&(this.yr(),this.ft=!1),this.kr):null}}class AS extends Jc{constructor(e){super(e)}yr(){this.Sr.yt=!1;const e=this.Es.Dt(),t=e.Cr().Cr;if(t!==2&&t!==3)return;const n=this.Es.W();if(!n.baseLineVisible||!this.Es.yt())return;const i=this.Es.Ct();i!==null&&(this.Sr.yt=!0,this.Sr.st=e.Rt(i.Vt,i.Vt),this.Sr.V=n.baseLineColor,this.Sr.et=n.baseLineWidth,this.Sr.Nt=n.baseLineStyle)}}class IS extends vt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}$e(){return this.zt}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){const i=this.zt;if(i===null)return;const r=Math.max(1,Math.floor(t)),o=r%2/2,a=Math.round(i.Xe.x*t)+o,l=i.Xe.y*n;e.fillStyle=i.Tr,e.beginPath();const u=Math.max(2,1.5*i.Pr)*t;e.arc(a,l,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.Rr,e.beginPath(),e.arc(a,l,i.ht*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=r,e.strokeStyle=i.Dr,e.beginPath(),e.arc(a,l,i.ht*t+r/2,0,2*Math.PI,!1),e.stroke()}}const US=[{Vr:0,Or:.25,Br:4,Ar:10,Ir:.25,zr:0,Lr:.4,Er:.8},{Vr:.25,Or:.525,Br:10,Ar:14,Ir:0,zr:0,Lr:.8,Er:0},{Vr:.525,Or:1,Br:14,Ar:14,Ir:0,zr:0,Lr:0,Er:0}];function Jd(s,e,t,n){return function(i,r){if(i==="transparent")return i;const o=Ki(i),a=o[3];return`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${r*a})`}(s,t+(n-t)*e)}function Yd(s,e){const t=s%2600/2600;let n;for(const l of US)if(t>=l.Vr&&t<=l.Or){n=l;break}gs(n!==void 0,"Last price animation internal logic error");const i=(t-n.Vr)/(n.Or-n.Vr);return{Rr:Jd(e,i,n.Ir,n.zr),Dr:Jd(e,i,n.Lr,n.Er),ht:(r=i,o=n.Br,a=n.Ar,o+(a-o)*r)};var r,o,a}class FS{constructor(e){this.Wt=new IS,this.ft=!0,this.Nr=!0,this.Fr=performance.now(),this.Wr=this.Fr-1,this.jr=e}Hr(){this.Wr=this.Fr-1,this.bt()}$r(){if(this.bt(),this.jr.W().lastPriceAnimation===2){const e=performance.now(),t=this.Wr-e;if(t>0)return void(t<650&&(this.Wr+=2600));this.Fr=e,this.Wr=e+2600}}bt(){this.ft=!0}Ur(){this.Nr=!0}yt(){return this.jr.W().lastPriceAnimation!==0}qr(){switch(this.jr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Wr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Nr=!1):this.Nr&&(this.Yr(),this.Nr=!1),this.Wt}Mt(){this.Wt.J(null);const e=this.jr.$t().St(),t=e.Xs(),n=this.jr.Ct();if(t===null||n===null)return;const i=this.jr.Zr(!0);if(i.Xr||!t.Kr(i.ee))return;const r={x:e.It(i.ee),y:this.jr.Dt().Rt(i._t,n.Vt)},o=i.V,a=this.jr.W().lineWidth,l=Yd(this.Gr(),o);this.Wt.J({Tr:o,Pr:a,Rr:l.Rr,Dr:l.Dr,ht:l.ht,Xe:r})}Yr(){const e=this.Wt.$e();if(e!==null){const t=Yd(this.Gr(),e.Tr);e.Rr=t.Rr,e.Dr=t.Dr,e.ht=t.ht}}Gr(){return this.qr()?performance.now()-this.Fr:2599}}function _i(s,e){return p0(Math.min(Math.max(s,12),30)*e)}function Qi(s,e){switch(s){case"arrowDown":case"arrowUp":return _i(e,1);case"circle":return _i(e,.8);case"square":return _i(e,.7)}}function _0(s){return function(e){const t=Math.ceil(e);return t%2!=0?t-1:t}(_i(s,1))}function Zd(s){return Math.max(_i(s,.1),3)}function ef(s,e,t){return e?s:t?Math.ceil(s/2):0}function S0(s,e,t,n,i){const r=Qi("square",t),o=(r-1)/2,a=s-o,l=e-o;return n>=a&&n<=a+r&&i>=l&&i<=l+r}function tf(s,e,t,n){const i=(Qi("arrowUp",n)-1)/2*t.Jr,r=(p0(n/2)-1)/2*t.Jr;e.beginPath(),s?(e.moveTo(t.nt-i,t.st),e.lineTo(t.nt,t.st-i),e.lineTo(t.nt+i,t.st),e.lineTo(t.nt+r,t.st),e.lineTo(t.nt+r,t.st+i),e.lineTo(t.nt-r,t.st+i),e.lineTo(t.nt-r,t.st)):(e.moveTo(t.nt-i,t.st),e.lineTo(t.nt,t.st+i),e.lineTo(t.nt+i,t.st),e.lineTo(t.nt+r,t.st),e.lineTo(t.nt+r,t.st-i),e.lineTo(t.nt-r,t.st-i),e.lineTo(t.nt-r,t.st)),e.fill()}function BS(s,e,t,n,i,r){return S0(e,t,n,i,r)}class WS extends vt{constructor(){super(...arguments),this.zt=null,this.ar=new Gi,this.j=-1,this.H="",this.Qr=""}J(e){this.zt=e}_r(e,t){this.j===e&&this.H===t||(this.j=e,this.H=t,this.Qr=On(e,t),this.ar.nr())}wr(e,t){if(this.zt===null||this.zt.tt===null)return null;for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){const i=this.zt.it[n];if(HS(i,e,t))return{Mr:i.th,gr:i.gr}}return null}K({context:e,horizontalPixelRatio:t,verticalPixelRatio:n},i,r){if(this.zt!==null&&this.zt.tt!==null){e.textBaseline="middle",e.font=this.Qr;for(let o=this.zt.tt.from;o<this.zt.tt.to;o++){const a=this.zt.it[o];a.Kt!==void 0&&(a.Kt.Hi=this.ar.xi(e,a.Kt.ih),a.Kt.At=this.j,a.Kt.nt=a.nt-a.Kt.Hi/2),VS(a,e,t,n)}}}}function VS(s,e,t,n){e.fillStyle=s.V,s.Kt!==void 0&&function(i,r,o,a,l,u){i.save(),i.scale(l,u),i.fillText(r,o,a),i.restore()}(e,s.Kt.ih,s.Kt.nt,s.Kt.st,t,n),function(i,r,o){if(i.Ks!==0){switch(i.nh){case"arrowDown":return void tf(!1,r,o,i.Ks);case"arrowUp":return void tf(!0,r,o,i.Ks);case"circle":return void function(a,l,u){const c=(Qi("circle",u)-1)/2;a.beginPath(),a.arc(l.nt,l.st,c*l.Jr,0,2*Math.PI,!1),a.fill()}(r,o,i.Ks);case"square":return void function(a,l,u){const c=Qi("square",u),d=(c-1)*l.Jr/2,f=l.nt-d,v=l.st-d;a.fillRect(f,v,c*l.Jr,c*l.Jr)}(r,o,i.Ks)}i.nh}}(s,e,function(i,r,o){const a=Math.max(1,Math.floor(r))%2/2;return{nt:Math.round(i.nt*r)+a,st:i.st*o,Jr:r}}(s,t,n))}function HS(s,e,t){return!(s.Kt===void 0||!function(n,i,r,o,a,l){const u=o/2;return a>=n&&a<=n+r&&l>=i-u&&l<=i+u}(s.Kt.nt,s.Kt.st,s.Kt.Hi,s.Kt.At,e,t))||function(n,i,r){if(n.Ks===0)return!1;switch(n.nh){case"arrowDown":case"arrowUp":return BS(0,n.nt,n.st,n.Ks,i,r);case"circle":return function(o,a,l,u,c){const d=2+Qi("circle",l)/2,f=o-u,v=a-c;return Math.sqrt(f*f+v*v)<=d}(n.nt,n.st,n.Ks,i,r);case"square":return S0(n.nt,n.st,n.Ks,i,r)}}(s,e,t)}function KS(s,e,t,n,i,r,o,a,l){const u=Et(t)?t:t.Se,c=Et(t)?t:t.Me,d=Et(t)?t:t.xe,f=Et(e.size)?Math.max(e.size,0):1,v=_0(a.le())*f,p=v/2;switch(s.Ks=v,e.position){case"inBar":return s.st=o.Rt(u,l),void(s.Kt!==void 0&&(s.Kt.st=s.st+p+r+.6*i));case"aboveBar":return s.st=o.Rt(c,l)-p-n.sh,s.Kt!==void 0&&(s.Kt.st=s.st-p-.6*i,n.sh+=1.2*i),void(n.sh+=v+r);case"belowBar":return s.st=o.Rt(d,l)+p+n.eh,s.Kt!==void 0&&(s.Kt.st=s.st+p+r+.6*i,n.eh+=1.2*i),void(n.eh+=v+r)}e.position}class qS{constructor(e,t){this.ft=!0,this.rh=!0,this.hh=!0,this.ah=null,this.oh=null,this.Wt=new WS,this.jr=e,this.$i=t,this.zt={it:[],tt:null}}bt(e){this.ft=!0,this.hh=!0,e==="data"&&(this.rh=!0,this.oh=null)}gt(e){if(!this.jr.yt())return null;this.ft&&this._h();const t=this.$i.W().layout;return this.Wt._r(t.fontSize,t.fontFamily),this.Wt.J(this.zt),this.Wt}uh(){if(this.hh){if(this.jr.dh().length>0){const e=this.$i.St().le(),t=Zd(e),n=1.5*_0(e)+2*t,i=this.fh();this.ah={above:ef(n,i.aboveBar,i.inBar),below:ef(n,i.belowBar,i.inBar)}}else this.ah=null;this.hh=!1}return this.ah}fh(){return this.oh===null&&(this.oh=this.jr.dh().reduce((e,t)=>(e[t.position]||(e[t.position]=!0),e),{inBar:!1,aboveBar:!1,belowBar:!1})),this.oh}_h(){const e=this.jr.Dt(),t=this.$i.St(),n=this.jr.dh();this.rh&&(this.zt.it=n.map(c=>({ot:c.time,nt:0,st:0,Ks:0,nh:c.shape,V:c.color,th:c.th,gr:c.id,Kt:void 0})),this.rh=!1);const i=this.$i.W().layout;this.zt.tt=null;const r=t.Xs();if(r===null)return;const o=this.jr.Ct();if(o===null||this.zt.it.length===0)return;let a=NaN;const l=Zd(t.le()),u={sh:l,eh:l};this.zt.tt=w0(this.zt.it,r,!0);for(let c=this.zt.tt.from;c<this.zt.tt.to;c++){const d=n[c];d.time!==a&&(u.sh=l,u.eh=l,a=d.time);const f=this.zt.it[c];f.nt=t.It(d.time),d.text!==void 0&&d.text.length>0&&(f.Kt={ih:d.text,nt:0,st:0,Hi:0,At:0});const v=this.jr.ph(d.time);v!==null&&KS(f,d,v,u,i.fontSize,l,e,t,o.Vt)}this.ft=!1}}class XS extends Jc{constructor(e){super(e)}yr(){const e=this.Sr;e.yt=!1;const t=this.Es.W();if(!t.priceLineVisible||!this.Es.yt())return;const n=this.Es.Zr(t.priceLineSource===0);n.Xr||(e.yt=!0,e.st=n.ki,e.V=this.Es.mh(n.V),e.et=t.priceLineWidth,e.Nt=t.priceLineStyle)}}class GS extends ml{constructor(e){super(),this.jt=e}zi(e,t,n){e.yt=!1,t.yt=!1;const i=this.jt;if(!i.yt())return;const r=i.W(),o=r.lastValueVisible,a=i.bh()!=="",l=r.seriesLastValueMode===0,u=i.Zr(!1);if(u.Xr)return;o&&(e.Kt=this.wh(u,o,l),e.yt=e.Kt.length!==0),(a||l)&&(t.Kt=this.gh(u,o,a,l),t.yt=t.Kt.length>0);const c=i.mh(u.V),d=fl(c);n.t=d.t,n.ki=u.ki,t.Ot=i.$t().Bt(u.ki/i.Dt().At()),e.Ot=c,e.V=d.i,t.V=d.i}gh(e,t,n,i){let r="";const o=this.jt.bh();return n&&o.length!==0&&(r+=`${o} `),t&&i&&(r+=this.jt.Dt().Mh()?e.xh:e.Sh),r.trim()}wh(e,t,n){return t?n?this.jt.Dt().Mh()?e.Sh:e.xh:e.Kt:""}}function sf(s,e,t,n){const i=Number.isFinite(e),r=Number.isFinite(t);return i&&r?s(e,t):i||r?i?e:t:n}class We{constructor(e,t){this.kh=e,this.yh=t}Ch(e){return e!==null&&this.kh===e.kh&&this.yh===e.yh}Th(){return new We(this.kh,this.yh)}Ph(){return this.kh}Rh(){return this.yh}Dh(){return this.yh-this.kh}Ni(){return this.yh===this.kh||Number.isNaN(this.yh)||Number.isNaN(this.kh)}ts(e){return e===null?this:new We(sf(Math.min,this.Ph(),e.Ph(),-1/0),sf(Math.max,this.Rh(),e.Rh(),1/0))}Vh(e){if(!Et(e)||this.yh-this.kh===0)return;const t=.5*(this.yh+this.kh);let n=this.yh-t,i=this.kh-t;n*=e,i*=e,this.yh=t+n,this.kh=t+i}Oh(e){Et(e)&&(this.yh+=e,this.kh+=e)}Bh(){return{minValue:this.kh,maxValue:this.yh}}static Ah(e){return e===null?null:new We(e.minValue,e.maxValue)}}class Ao{constructor(e,t){this.Ih=e,this.zh=t||null}Lh(){return this.Ih}Eh(){return this.zh}Bh(){return this.Ih===null?null:{priceRange:this.Ih.Bh(),margins:this.zh||void 0}}static Ah(e){return e===null?null:new Ao(We.Ah(e.priceRange),e.margins)}}class QS extends Jc{constructor(e,t){super(e),this.Nh=t}yr(){const e=this.Sr;e.yt=!1;const t=this.Nh.W();if(!this.Es.yt()||!t.lineVisible)return;const n=this.Nh.Fh();n!==null&&(e.yt=!0,e.st=n,e.V=t.color,e.et=t.lineWidth,e.Nt=t.lineStyle,e.gr=this.Nh.W().id)}}class JS extends ml{constructor(e,t){super(),this.jr=e,this.Nh=t}zi(e,t,n){e.yt=!1,t.yt=!1;const i=this.Nh.W(),r=i.axisLabelVisible,o=i.title!=="",a=this.jr;if(!r||!a.yt())return;const l=this.Nh.Fh();if(l===null)return;o&&(t.Kt=i.title,t.yt=!0),t.Ot=a.$t().Bt(l/a.Dt().At()),e.Kt=this.Wh(i.price),e.yt=!0;const u=fl(i.axisLabelColor||i.color);n.t=u.t;const c=i.axisLabelTextColor||u.i;e.V=c,t.V=c,n.ki=l}Wh(e){const t=this.jr.Ct();return t===null?"":this.jr.Dt().Fi(e,t.Vt)}}class YS{constructor(e,t){this.jr=e,this.cn=t,this.jh=new QS(e,this),this.ur=new JS(e,this),this.Hh=new b0(this.ur,e,e.$t())}$h(e){gt(this.cn,e),this.bt(),this.jr.$t().Uh()}W(){return this.cn}qh(){return this.jh}Yh(){return this.Hh}Zh(){return this.ur}bt(){this.jh.bt(),this.ur.bt()}Fh(){const e=this.jr,t=e.Dt();if(e.$t().St().Ni()||t.Ni())return null;const n=e.Ct();return n===null?null:t.Rt(this.cn.price,n.Vt)}}class ZS extends Xc{constructor(e){super(),this.$i=e}$t(){return this.$i}}const ek={Bar:(s,e,t,n)=>{var i;const r=e.upColor,o=e.downColor,a=j(s(t,n)),l=yn(a.Vt[0])<=yn(a.Vt[3]);return{ce:(i=a.V)!==null&&i!==void 0?i:l?r:o}},Candlestick:(s,e,t,n)=>{var i,r,o;const a=e.upColor,l=e.downColor,u=e.borderUpColor,c=e.borderDownColor,d=e.wickUpColor,f=e.wickDownColor,v=j(s(t,n)),p=yn(v.Vt[0])<=yn(v.Vt[3]);return{ce:(i=v.V)!==null&&i!==void 0?i:p?a:l,Ne:(r=v.Ot)!==null&&r!==void 0?r:p?u:c,Ee:(o=v.Xh)!==null&&o!==void 0?o:p?d:f}},Custom:(s,e,t,n)=>{var i;return{ce:(i=j(s(t,n)).V)!==null&&i!==void 0?i:e.color}},Area:(s,e,t,n)=>{var i,r,o,a;const l=j(s(t,n));return{ce:(i=l.lt)!==null&&i!==void 0?i:e.lineColor,lt:(r=l.lt)!==null&&r!==void 0?r:e.lineColor,Ps:(o=l.Ps)!==null&&o!==void 0?o:e.topColor,Rs:(a=l.Rs)!==null&&a!==void 0?a:e.bottomColor}},Baseline:(s,e,t,n)=>{var i,r,o,a,l,u;const c=j(s(t,n));return{ce:c.Vt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Re:(i=c.Re)!==null&&i!==void 0?i:e.topLineColor,De:(r=c.De)!==null&&r!==void 0?r:e.bottomLineColor,ke:(o=c.ke)!==null&&o!==void 0?o:e.topFillColor1,ye:(a=c.ye)!==null&&a!==void 0?a:e.topFillColor2,Ce:(l=c.Ce)!==null&&l!==void 0?l:e.bottomFillColor1,Te:(u=c.Te)!==null&&u!==void 0?u:e.bottomFillColor2}},Line:(s,e,t,n)=>{var i,r;const o=j(s(t,n));return{ce:(i=o.V)!==null&&i!==void 0?i:e.color,lt:(r=o.V)!==null&&r!==void 0?r:e.color}},Histogram:(s,e,t,n)=>{var i;return{ce:(i=j(s(t,n)).V)!==null&&i!==void 0?i:e.color}}};class tk{constructor(e){this.Kh=(t,n)=>n!==void 0?n.Vt:this.jr.In().Gh(t),this.jr=e,this.Jh=ek[e.Qh()]}$s(e,t){return this.Jh(this.Kh,this.jr.W(),e,t)}}var nf;(function(s){s[s.NearestLeft=-1]="NearestLeft",s[s.None=0]="None",s[s.NearestRight=1]="NearestRight"})(nf||(nf={}));const Jt=30;class sk{constructor(){this.tl=[],this.il=new Map,this.nl=new Map}sl(){return this.Ks()>0?this.tl[this.tl.length-1]:null}el(){return this.Ks()>0?this.rl(0):null}An(){return this.Ks()>0?this.rl(this.tl.length-1):null}Ks(){return this.tl.length}Ni(){return this.Ks()===0}Kr(e){return this.hl(e,0)!==null}Gh(e){return this.ll(e)}ll(e,t=0){const n=this.hl(e,t);return n===null?null:Object.assign(Object.assign({},this.al(n)),{ee:this.rl(n)})}ne(){return this.tl}ol(e,t,n){if(this.Ni())return null;let i=null;for(const r of n)i=Ar(i,this._l(e,t,r));return i}J(e){this.nl.clear(),this.il.clear(),this.tl=e}rl(e){return this.tl[e].ee}al(e){return this.tl[e]}hl(e,t){const n=this.ul(e);if(n===null&&t!==0)switch(t){case-1:return this.cl(e);case 1:return this.dl(e);default:throw new TypeError("Unknown search mode")}return n}cl(e){let t=this.fl(e);return t>0&&(t-=1),t!==this.tl.length&&this.rl(t)<e?t:null}dl(e){const t=this.vl(e);return t!==this.tl.length&&e<this.rl(t)?t:null}ul(e){const t=this.fl(e);return t===this.tl.length||e<this.tl[t].ee?null:t}fl(e){return hr(this.tl,e,(t,n)=>t.ee<n)}vl(e){return y0(this.tl,e,(t,n)=>t.ee>n)}pl(e,t,n){let i=null;for(let r=e;r<t;r++){const o=this.tl[r].Vt[n];Number.isNaN(o)||(i===null?i={ml:o,bl:o}:(o<i.ml&&(i.ml=o),o>i.bl&&(i.bl=o)))}return i}_l(e,t,n){if(this.Ni())return null;let i=null;const r=j(this.el()),o=j(this.An()),a=Math.max(e,r),l=Math.min(t,o),u=Math.ceil(a/Jt)*Jt,c=Math.max(u,Math.floor(l/Jt)*Jt);{const f=this.fl(a),v=this.vl(Math.min(l,u,t));i=Ar(i,this.pl(f,v,n))}let d=this.il.get(n);d===void 0&&(d=new Map,this.il.set(n,d));for(let f=Math.max(u+1,a);f<c;f+=Jt){const v=Math.floor(f/Jt);let p=d.get(v);if(p===void 0){const m=this.fl(v*Jt),x=this.vl((v+1)*Jt-1);p=this.pl(m,x,n),d.set(v,p)}i=Ar(i,p)}{const f=this.fl(c),v=this.vl(l);i=Ar(i,this.pl(f,v,n))}return i}}function Ar(s,e){return s===null?e:e===null?s:{ml:Math.min(s.ml,e.ml),bl:Math.max(s.bl,e.bl)}}class nk{constructor(e){this.wl=e}X(e,t,n){this.wl.draw(e)}gl(e,t,n){var i,r;(r=(i=this.wl).drawBackground)===null||r===void 0||r.call(i,e)}}class ia{constructor(e){this.tr=null,this.wn=e}gt(){var e;const t=this.wn.renderer();if(t===null)return null;if(((e=this.tr)===null||e===void 0?void 0:e.Ml)===t)return this.tr.xl;const n=new nk(t);return this.tr={Ml:t,xl:n},n}Sl(){var e,t,n;return(n=(t=(e=this.wn).zOrder)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:"normal"}}function k0(s){var e,t,n,i,r;return{Kt:s.text(),ki:s.coordinate(),Si:(e=s.fixedCoordinate)===null||e===void 0?void 0:e.call(s),V:s.textColor(),t:s.backColor(),yt:(n=(t=s.visible)===null||t===void 0?void 0:t.call(s))===null||n===void 0||n,hi:(r=(i=s.tickVisible)===null||i===void 0?void 0:i.call(s))===null||r===void 0||r}}class ik{constructor(e,t){this.Wt=new c0,this.kl=e,this.yl=t}gt(){return this.Wt.J(Object.assign({Hi:this.yl.Hi()},k0(this.kl))),this.Wt}}class rk extends ml{constructor(e,t){super(),this.kl=e,this.Li=t}zi(e,t,n){const i=k0(this.kl);n.t=i.t,e.V=i.V;const r=2/12*this.Li.P();n.wi=r,n.gi=r,n.ki=i.ki,n.Si=i.Si,e.Kt=i.Kt,e.yt=i.yt,e.hi=i.hi}}class ok{constructor(e,t){this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=null,this.Vl=e,this.jr=t}Ol(){return this.Vl}Vn(){var e,t;(t=(e=this.Vl).updateAllViews)===null||t===void 0||t.call(e)}Pn(){var e,t,n,i;const r=(n=(t=(e=this.Vl).paneViews)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:[];if(((i=this.Cl)===null||i===void 0?void 0:i.Ml)===r)return this.Cl.xl;const o=r.map(a=>new ia(a));return this.Cl={Ml:r,xl:o},o}Qi(){var e,t,n,i;const r=(n=(t=(e=this.Vl).timeAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:[];if(((i=this.Tl)===null||i===void 0?void 0:i.Ml)===r)return this.Tl.xl;const o=this.jr.$t().St(),a=r.map(l=>new ik(l,o));return this.Tl={Ml:r,xl:a},a}Rn(){var e,t,n,i;const r=(n=(t=(e=this.Vl).priceAxisViews)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:[];if(((i=this.Pl)===null||i===void 0?void 0:i.Ml)===r)return this.Pl.xl;const o=this.jr.Dt(),a=r.map(l=>new rk(l,o));return this.Pl={Ml:r,xl:a},a}Bl(){var e,t,n,i;const r=(n=(t=(e=this.Vl).priceAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:[];if(((i=this.Rl)===null||i===void 0?void 0:i.Ml)===r)return this.Rl.xl;const o=r.map(a=>new ia(a));return this.Rl={Ml:r,xl:o},o}Al(){var e,t,n,i;const r=(n=(t=(e=this.Vl).timeAxisPaneViews)===null||t===void 0?void 0:t.call(e))!==null&&n!==void 0?n:[];if(((i=this.Dl)===null||i===void 0?void 0:i.Ml)===r)return this.Dl.xl;const o=r.map(a=>new ia(a));return this.Dl={Ml:r,xl:o},o}Il(e,t){var n,i,r;return(r=(i=(n=this.Vl).autoscaleInfo)===null||i===void 0?void 0:i.call(n,e,t))!==null&&r!==void 0?r:null}wr(e,t){var n,i,r;return(r=(i=(n=this.Vl).hitTest)===null||i===void 0?void 0:i.call(n,e,t))!==null&&r!==void 0?r:null}}function ra(s,e,t,n){s.forEach(i=>{e(i).forEach(r=>{r.Sl()===t&&n.push(r)})})}function oa(s){return s.Pn()}function lk(s){return s.Bl()}function ak(s){return s.Al()}class Yc extends ZS{constructor(e,t,n,i,r){super(e),this.zt=new sk,this.jh=new XS(this),this.zl=[],this.Ll=new AS(this),this.El=null,this.Nl=null,this.Fl=[],this.Wl=[],this.jl=null,this.Hl=[],this.cn=t,this.$l=n;const o=new GS(this);this.rn=[o],this.Hh=new b0(o,this,e),n!=="Area"&&n!=="Line"&&n!=="Baseline"||(this.El=new FS(this)),this.Ul(),this.ql(r)}S(){this.jl!==null&&clearTimeout(this.jl)}mh(e){return this.cn.priceLineColor||e}Zr(e){const t={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return t;const i=this.$t().St().Xs(),r=this.Ct();if(i===null||r===null)return t;let o,a;if(e){const d=this.zt.sl();if(d===null)return t;o=d,a=d.ee}else{const d=this.zt.ll(i.ui(),-1);if(d===null||(o=this.zt.Gh(d.ee),o===null))return t;a=d.ee}const l=o.Vt[3],u=this.Us().$s(a,{Vt:o}),c=n.Rt(l,r.Vt);return{Xr:!1,_t:l,Kt:n.Fi(l,r.Vt),xh:n.Yl(l),Sh:n.Zl(l,r.Vt),V:u.ce,ki:c,ee:a}}Us(){return this.Nl!==null||(this.Nl=new tk(this)),this.Nl}W(){return this.cn}$h(e){const t=e.priceScaleId;t!==void 0&&t!==this.cn.priceScaleId&&this.$t().Xl(this,t),gt(this.cn,e),e.priceFormat!==void 0&&(this.Ul(),this.$t().Kl()),this.$t().Gl(this),this.$t().Jl(),this.wn.bt("options")}J(e,t){this.zt.J(e),this.Ql(),this.wn.bt("data"),this.dn.bt("data"),this.El!==null&&(t&&t.ta?this.El.$r():e.length===0&&this.El.Hr());const n=this.$t().dr(this);this.$t().ia(n),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}na(e){this.Fl=e,this.Ql();const t=this.$t().dr(this);this.dn.bt("data"),this.$t().ia(t),this.$t().Gl(this),this.$t().Jl(),this.$t().Uh()}sa(){return this.Fl}dh(){return this.Wl}ea(e){const t=new YS(this,e);return this.zl.push(t),this.$t().Gl(this),t}ra(e){const t=this.zl.indexOf(e);t!==-1&&this.zl.splice(t,1),this.$t().Gl(this)}Qh(){return this.$l}Ct(){const e=this.ha();return e===null?null:{Vt:e.Vt[3],la:e.ot}}ha(){const e=this.$t().St().Xs();if(e===null)return null;const t=e.Os();return this.zt.ll(t,1)}In(){return this.zt}ph(e){const t=this.zt.Gh(e);return t===null?null:this.$l==="Bar"||this.$l==="Candlestick"||this.$l==="Custom"?{ge:t.Vt[0],Me:t.Vt[1],xe:t.Vt[2],Se:t.Vt[3]}:t.Vt[3]}aa(e){const t=[];ra(this.Hl,oa,"top",t);const n=this.El;return n!==null&&n.yt()&&(this.jl===null&&n.qr()&&(this.jl=setTimeout(()=>{this.jl=null,this.$t().oa()},0)),n.Ur(),t.unshift(n)),t}Pn(){const e=[];this._a()||e.push(this.Ll),e.push(this.wn,this.jh,this.dn);const t=this.zl.map(n=>n.qh());return e.push(...t),ra(this.Hl,oa,"normal",e),e}ua(){return this.ca(oa,"bottom")}da(e){return this.ca(lk,e)}fa(e){return this.ca(ak,e)}va(e,t){return this.Hl.map(n=>n.wr(e,t)).filter(n=>n!==null)}Ji(e){return[this.Hh,...this.zl.map(t=>t.Yh())]}Rn(e,t){if(t!==this.Yi&&!this._a())return[];const n=[...this.rn];for(const i of this.zl)n.push(i.Zh());return this.Hl.forEach(i=>{n.push(...i.Rn())}),n}Qi(){const e=[];return this.Hl.forEach(t=>{e.push(...t.Qi())}),e}Il(e,t){if(this.cn.autoscaleInfoProvider!==void 0){const n=this.cn.autoscaleInfoProvider(()=>{const i=this.pa(e,t);return i===null?null:i.Bh()});return Ao.Ah(n)}return this.pa(e,t)}ma(){return this.cn.priceFormat.minMove}ba(){return this.wa}Vn(){var e;this.wn.bt(),this.dn.bt();for(const t of this.rn)t.bt();for(const t of this.zl)t.bt();this.jh.bt(),this.Ll.bt(),(e=this.El)===null||e===void 0||e.bt(),this.Hl.forEach(t=>t.Vn())}Dt(){return j(super.Dt())}kt(e){if(!((this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline")&&this.cn.crosshairMarkerVisible))return null;const t=this.zt.Gh(e);return t===null?null:{_t:t.Vt[3],ht:this.ga(),Ot:this.Ma(),Pt:this.xa(),Tt:this.Sa(e)}}bh(){return this.cn.title}yt(){return this.cn.visible}ka(e){this.Hl.push(new ok(e,this))}ya(e){this.Hl=this.Hl.filter(t=>t.Ol()!==e)}Ca(){if(this.wn instanceof na)return e=>this.wn.We(e)}Ta(){if(this.wn instanceof na)return e=>this.wn.je(e)}_a(){return!gl(this.Dt().Pa())}pa(e,t){if(!qi(e)||!qi(t)||this.zt.Ni())return null;const n=this.$l==="Line"||this.$l==="Area"||this.$l==="Baseline"||this.$l==="Histogram"?[3]:[2,1],i=this.zt.ol(e,t,n);let r=i!==null?new We(i.ml,i.bl):null;if(this.Qh()==="Histogram"){const a=this.cn.base,l=new We(a,a);r=r!==null?r.ts(l):l}let o=this.dn.uh();return this.Hl.forEach(a=>{const l=a.Il(e,t);if(l!=null&&l.priceRange){const v=new We(l.priceRange.minValue,l.priceRange.maxValue);r=r!==null?r.ts(v):v}var u,c,d,f;l!=null&&l.margins&&(u=o,c=l.margins,o={above:Math.max((d=u==null?void 0:u.above)!==null&&d!==void 0?d:0,c.above),below:Math.max((f=u==null?void 0:u.below)!==null&&f!==void 0?f:0,c.below)})}),new Ao(r,o)}ga(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}Ma(){switch(this.$l){case"Line":case"Area":case"Baseline":{const e=this.cn.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}xa(){switch(this.$l){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}Sa(e){switch(this.$l){case"Line":case"Area":case"Baseline":{const t=this.cn.crosshairMarkerBackgroundColor;if(t.length!==0)return t}}return this.Us().$s(e).ce}Ul(){switch(this.cn.priceFormat.type){case"custom":this.wa={format:this.cn.priceFormat.formatter};break;case"volume":this.wa=new mS(this.cn.priceFormat.precision);break;case"percent":this.wa=new h0(this.cn.priceFormat.precision);break;default:{const e=Math.pow(10,this.cn.priceFormat.precision);this.wa=new vl(e,this.cn.priceFormat.minMove*e)}}this.Yi!==null&&this.Yi.Ra()}Ql(){const e=this.$t().St();if(!e.Da()||this.zt.Ni())return void(this.Wl=[]);const t=j(this.zt.el());this.Wl=this.Fl.map((n,i)=>{const r=j(e.Va(n.time,!0)),o=r<t?1:-1;return{time:j(this.zt.ll(r,o)).ee,position:n.position,shape:n.shape,color:n.color,id:n.id,th:i,text:n.text,size:n.size,originalTime:n.originalTime}})}ql(e){switch(this.dn=new qS(this,this.$t()),this.$l){case"Bar":this.wn=new kS(this,this.$t());break;case"Candlestick":this.wn=new TS(this,this.$t());break;case"Line":this.wn=new LS(this,this.$t());break;case"Custom":this.wn=new na(this,this.$t(),$e(e));break;case"Area":this.wn=new _S(this,this.$t());break;case"Baseline":this.wn=new jS(this,this.$t());break;case"Histogram":this.wn=new $S(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.$l)}}ca(e,t){const n=[];return ra(this.Hl,e,t,n),n}}class uk{constructor(e){this.cn=e}Oa(e,t,n){let i=e;if(this.cn.mode===0)return i;const r=n.vn(),o=r.Ct();if(o===null)return i;const a=r.Rt(e,o),l=n.Ba().filter(c=>c instanceof Yc).reduce((c,d)=>{if(n.vr(d)||!d.yt())return c;const f=d.Dt(),v=d.In();if(f.Ni()||!v.Kr(t))return c;const p=v.Gh(t);if(p===null)return c;const m=yn(d.Ct());return c.concat([f.Rt(p.Vt[3],m.Vt)])},[]);if(l.length===0)return i;l.sort((c,d)=>Math.abs(c-a)-Math.abs(d-a));const u=l[0];return i=r.pn(u,o),i}}class ck extends vt{constructor(){super(...arguments),this.zt=null}J(e){this.zt=e}K({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.zt===null)return;const r=Math.max(1,Math.floor(n));e.lineWidth=r,function(o,a){o.save(),o.lineWidth%2&&o.translate(.5,.5),a(),o.restore()}(e,()=>{const o=j(this.zt);if(o.Aa){e.strokeStyle=o.Ia,Fs(e,o.za),e.beginPath();for(const a of o.La){const l=Math.round(a.Ea*n);e.moveTo(l,-r),e.lineTo(l,t.height+r)}e.stroke()}if(o.Na){e.strokeStyle=o.Fa,Fs(e,o.Wa),e.beginPath();for(const a of o.ja){const l=Math.round(a.Ea*i);e.moveTo(-r,l),e.lineTo(t.width+r,l)}e.stroke()}})}}class hk{constructor(e){this.Wt=new ck,this.ft=!0,this.tn=e}bt(){this.ft=!0}gt(){if(this.ft){const e=this.tn.$t().W().grid,t={Na:e.horzLines.visible,Aa:e.vertLines.visible,Fa:e.horzLines.color,Ia:e.vertLines.color,Wa:e.horzLines.style,za:e.vertLines.style,ja:this.tn.vn().Ha(),La:(this.tn.$t().St().Ha()||[]).map(n=>({Ea:n.coord}))};this.Wt.J(t),this.ft=!1}return this.Wt}}class dk{constructor(e){this.wn=new hk(e)}qh(){return this.wn}}const la={$a:4,Ua:1e-4};function wn(s,e){const t=100*(s-e)/e;return e<0?-t:t}function fk(s,e){const t=wn(s.Ph(),e),n=wn(s.Rh(),e);return new We(t,n)}function Si(s,e){const t=100*(s-e)/e+100;return e<0?-t:t}function pk(s,e){const t=Si(s.Ph(),e),n=Si(s.Rh(),e);return new We(t,n)}function Io(s,e){const t=Math.abs(s);if(t<1e-15)return 0;const n=Math.log10(t+e.Ua)+e.$a;return s<0?-n:n}function ki(s,e){const t=Math.abs(s);if(t<1e-15)return 0;const n=Math.pow(10,t-e.$a)-e.Ua;return s<0?-n:n}function ii(s,e){if(s===null)return null;const t=Io(s.Ph(),e),n=Io(s.Rh(),e);return new We(t,n)}function Ir(s,e){if(s===null)return null;const t=ki(s.Ph(),e),n=ki(s.Rh(),e);return new We(t,n)}function aa(s){if(s===null)return la;const e=Math.abs(s.Rh()-s.Ph());if(e>=1||e<1e-15)return la;const t=Math.ceil(Math.abs(Math.log10(e))),n=la.$a+t;return{$a:n,Ua:1/Math.pow(10,n)}}class ua{constructor(e,t){if(this.qa=e,this.Ya=t,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.qa))this.Za=[2,2.5,2];else{this.Za=[];for(let n=this.qa;n!==1;){if(n%2==0)this.Za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Za.push(2,2.5),n/=5}if(this.Za.length>100)throw new Error("something wrong with base")}}}Xa(e,t,n){const i=this.qa===0?0:1/this.qa;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),o=0,a=this.Ya[0];for(;;){const d=Dr(r,i,1e-14)&&r>i+1e-14,f=Dr(r,n*a,1e-14),v=Dr(r,1,1e-14);if(!(d&&f&&v))break;r/=a,a=this.Ya[++o%this.Ya.length]}if(r<=i+1e-14&&(r=i),r=Math.max(1,r),this.Za.length>0&&(l=r,u=1,c=1e-14,Math.abs(l-u)<c))for(o=0,a=this.Za[0];Dr(r,n*a,1e-14)&&r>i+1e-14;)r/=a,a=this.Za[++o%this.Za.length];var l,u,c;return r}}class rf{constructor(e,t,n,i){this.Ka=[],this.Li=e,this.qa=t,this.Ga=n,this.Ja=i}Xa(e,t){if(e<t)throw new Error("high < low");const n=this.Li.At(),i=(e-t)*this.Qa()/n,r=new ua(this.qa,[2,2.5,2]),o=new ua(this.qa,[2,2,2.5]),a=new ua(this.qa,[2.5,2,2]),l=[];return l.push(r.Xa(e,t,i),o.Xa(e,t,i),a.Xa(e,t,i)),function(u){if(u.length<1)throw Error("array is empty");let c=u[0];for(let d=1;d<u.length;++d)u[d]<c&&(c=u[d]);return c}(l)}io(){const e=this.Li,t=e.Ct();if(t===null)return void(this.Ka=[]);const n=e.At(),i=this.Ga(n-1,t),r=this.Ga(0,t),o=this.Li.W().entireTextOnly?this.no()/2:0,a=o,l=n-1-o,u=Math.max(i,r),c=Math.min(i,r);if(u===c)return void(this.Ka=[]);let d=this.Xa(u,c),f=u%d;f+=f<0?d:0;const v=u>=c?1:-1;let p=null,m=0;for(let x=u-f;x>c;x-=d){const g=this.Ja(x,t,!0);p!==null&&Math.abs(g-p)<this.Qa()||g<a||g>l||(m<this.Ka.length?(this.Ka[m].Ea=g,this.Ka[m].so=e.eo(x)):this.Ka.push({Ea:g,so:e.eo(x)}),m++,p=g,e.ro()&&(d=this.Xa(x*v,c)))}this.Ka.length=m}Ha(){return this.Ka}no(){return this.Li.P()}Qa(){return Math.ceil(2.5*this.no())}}function E0(s){return s.slice().sort((e,t)=>j(e.Xi())-j(t.Xi()))}var of;(function(s){s[s.Normal=0]="Normal",s[s.Logarithmic=1]="Logarithmic",s[s.Percentage=2]="Percentage",s[s.IndexedTo100=3]="IndexedTo100"})(of||(of={}));const lf=new h0,af=new vl(100,1);class mk{constructor(e,t,n,i){this.ho=0,this.lo=null,this.Ih=null,this.ao=null,this.oo={_o:!1,uo:null},this.co=0,this.do=0,this.fo=new de,this.vo=new de,this.po=[],this.mo=null,this.bo=null,this.wo=null,this.Mo=null,this.wa=af,this.xo=aa(null),this.So=e,this.cn=t,this.ko=n,this.yo=i,this.Co=new rf(this,100,this.To.bind(this),this.Po.bind(this))}Pa(){return this.So}W(){return this.cn}$h(e){if(gt(this.cn,e),this.Ra(),e.mode!==void 0&&this.Ro({Cr:e.mode}),e.scaleMargins!==void 0){const t=$e(e.scaleMargins.top),n=$e(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(t+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+n}`);this.Do(),this.bo=null}}Vo(){return this.cn.autoScale}ro(){return this.cn.mode===1}Mh(){return this.cn.mode===2}Oo(){return this.cn.mode===3}Cr(){return{Wn:this.cn.autoScale,Bo:this.cn.invertScale,Cr:this.cn.mode}}Ro(e){const t=this.Cr();let n=null;e.Wn!==void 0&&(this.cn.autoScale=e.Wn),e.Cr!==void 0&&(this.cn.mode=e.Cr,e.Cr!==2&&e.Cr!==3||(this.cn.autoScale=!0),this.oo._o=!1),t.Cr===1&&e.Cr!==t.Cr&&(function(r,o){if(r===null)return!1;const a=ki(r.Ph(),o),l=ki(r.Rh(),o);return isFinite(a)&&isFinite(l)}(this.Ih,this.xo)?(n=Ir(this.Ih,this.xo),n!==null&&this.Ao(n)):this.cn.autoScale=!0),e.Cr===1&&e.Cr!==t.Cr&&(n=ii(this.Ih,this.xo),n!==null&&this.Ao(n));const i=t.Cr!==this.cn.mode;i&&(t.Cr===2||this.Mh())&&this.Ra(),i&&(t.Cr===3||this.Oo())&&this.Ra(),e.Bo!==void 0&&t.Bo!==e.Bo&&(this.cn.invertScale=e.Bo,this.Io()),this.vo.m(t,this.Cr())}zo(){return this.vo}P(){return this.ko.fontSize}At(){return this.ho}Lo(e){this.ho!==e&&(this.ho=e,this.Do(),this.bo=null)}Eo(){if(this.lo)return this.lo;const e=this.At()-this.No()-this.Fo();return this.lo=e,e}Lh(){return this.Wo(),this.Ih}Ao(e,t){const n=this.Ih;(t||n===null&&e!==null||n!==null&&!n.Ch(e))&&(this.bo=null,this.Ih=e)}Ni(){return this.Wo(),this.ho===0||!this.Ih||this.Ih.Ni()}jo(e){return this.Bo()?e:this.At()-1-e}Rt(e,t){return this.Mh()?e=wn(e,t):this.Oo()&&(e=Si(e,t)),this.Po(e,t)}te(e,t,n){this.Wo();const i=this.Fo(),r=j(this.Lh()),o=r.Ph(),a=r.Rh(),l=this.Eo()-1,u=this.Bo(),c=l/(a-o),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,v=this.Ho();for(let p=d;p<f;p++){const m=e[p],x=m._t;if(isNaN(x))continue;let g=x;v!==null&&(g=v(m._t,t));const w=i+c*(g-o),y=u?w:this.ho-1-w;m.st=y}}be(e,t,n){this.Wo();const i=this.Fo(),r=j(this.Lh()),o=r.Ph(),a=r.Rh(),l=this.Eo()-1,u=this.Bo(),c=l/(a-o),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,v=this.Ho();for(let p=d;p<f;p++){const m=e[p];let x=m.ge,g=m.Me,w=m.xe,y=m.Se;v!==null&&(x=v(m.ge,t),g=v(m.Me,t),w=v(m.xe,t),y=v(m.Se,t));let b=i+c*(x-o),S=u?b:this.ho-1-b;m.pe=S,b=i+c*(g-o),S=u?b:this.ho-1-b,m.de=S,b=i+c*(w-o),S=u?b:this.ho-1-b,m.fe=S,b=i+c*(y-o),S=u?b:this.ho-1-b,m.me=S}}pn(e,t){const n=this.To(e,t);return this.$o(n,t)}$o(e,t){let n=e;return this.Mh()?n=function(i,r){return r<0&&(i=-i),i/100*r+r}(n,t):this.Oo()&&(n=function(i,r){return i-=100,r<0&&(i=-i),i/100*r+r}(n,t)),n}Ba(){return this.po}Uo(){if(this.mo)return this.mo;let e=[];for(let t=0;t<this.po.length;t++){const n=this.po[t];n.Xi()===null&&n.Ki(t+1),e.push(n)}return e=E0(e),this.mo=e,this.mo}qo(e){this.po.indexOf(e)===-1&&(this.po.push(e),this.Ra(),this.Yo())}Zo(e){const t=this.po.indexOf(e);if(t===-1)throw new Error("source is not attached to scale");this.po.splice(t,1),this.po.length===0&&(this.Ro({Wn:!0}),this.Ao(null)),this.Ra(),this.Yo()}Ct(){let e=null;for(const t of this.po){const n=t.Ct();n!==null&&(e===null||n.la<e.la)&&(e=n)}return e===null?null:e.Vt}Bo(){return this.cn.invertScale}Ha(){const e=this.Ct()===null;if(this.bo!==null&&(e||this.bo.Xo===e))return this.bo.Ha;this.Co.io();const t=this.Co.Ha();return this.bo={Ha:t,Xo:e},this.fo.m(),t}Ko(){return this.fo}Go(e){this.Mh()||this.Oo()||this.wo===null&&this.ao===null&&(this.Ni()||(this.wo=this.ho-e,this.ao=j(this.Lh()).Th()))}Jo(e){if(this.Mh()||this.Oo()||this.wo===null)return;this.Ro({Wn:!1}),(e=this.ho-e)<0&&(e=0);let t=(this.wo+.2*(this.ho-1))/(e+.2*(this.ho-1));const n=j(this.ao).Th();t=Math.max(t,.1),n.Vh(t),this.Ao(n)}Qo(){this.Mh()||this.Oo()||(this.wo=null,this.ao=null)}t_(e){this.Vo()||this.Mo===null&&this.ao===null&&(this.Ni()||(this.Mo=e,this.ao=j(this.Lh()).Th()))}i_(e){if(this.Vo()||this.Mo===null)return;const t=j(this.Lh()).Dh()/(this.Eo()-1);let n=e-this.Mo;this.Bo()&&(n*=-1);const i=n*t,r=j(this.ao).Th();r.Oh(i),this.Ao(r,!0),this.bo=null}n_(){this.Vo()||this.Mo!==null&&(this.Mo=null,this.ao=null)}ba(){return this.wa||this.Ra(),this.wa}Fi(e,t){switch(this.cn.mode){case 2:return this.s_(wn(e,t));case 3:return this.ba().format(Si(e,t));default:return this.Wh(e)}}eo(e){switch(this.cn.mode){case 2:return this.s_(e);case 3:return this.ba().format(e);default:return this.Wh(e)}}Yl(e){return this.Wh(e,j(this.e_()).ba())}Zl(e,t){return e=wn(e,t),this.s_(e,lf)}r_(){return this.po}h_(e){this.oo={uo:e,_o:!1}}Vn(){this.po.forEach(e=>e.Vn())}Ra(){this.bo=null;const e=this.e_();let t=100;e!==null&&(t=Math.round(1/e.ma())),this.wa=af,this.Mh()?(this.wa=lf,t=100):this.Oo()?(this.wa=new vl(100,1),t=100):e!==null&&(this.wa=e.ba()),this.Co=new rf(this,t,this.To.bind(this),this.Po.bind(this)),this.Co.io()}Yo(){this.mo=null}e_(){return this.po[0]||null}No(){return this.Bo()?this.cn.scaleMargins.bottom*this.At()+this.do:this.cn.scaleMargins.top*this.At()+this.co}Fo(){return this.Bo()?this.cn.scaleMargins.top*this.At()+this.co:this.cn.scaleMargins.bottom*this.At()+this.do}Wo(){this.oo._o||(this.oo._o=!0,this.l_())}Do(){this.lo=null}Po(e,t){if(this.Wo(),this.Ni())return 0;e=this.ro()&&e?Io(e,this.xo):e;const n=j(this.Lh()),i=this.Fo()+(this.Eo()-1)*(e-n.Ph())/n.Dh();return this.jo(i)}To(e,t){if(this.Wo(),this.Ni())return 0;const n=this.jo(e),i=j(this.Lh()),r=i.Ph()+i.Dh()*((n-this.Fo())/(this.Eo()-1));return this.ro()?ki(r,this.xo):r}Io(){this.bo=null,this.Co.io()}l_(){const e=this.oo.uo;if(e===null)return;let t=null;const n=this.r_();let i=0,r=0;for(const l of n){if(!l.yt())continue;const u=l.Ct();if(u===null)continue;const c=l.Il(e.Os(),e.ui());let d=c&&c.Lh();if(d!==null){switch(this.cn.mode){case 1:d=ii(d,this.xo);break;case 2:d=fk(d,u.Vt);break;case 3:d=pk(d,u.Vt)}if(t=t===null?d:t.ts(j(d)),c!==null){const f=c.Eh();f!==null&&(i=Math.max(i,f.above),r=Math.max(r,f.below))}}}if(i===this.co&&r===this.do||(this.co=i,this.do=r,this.bo=null,this.Do()),t!==null){if(t.Ph()===t.Rh()){const l=this.e_(),u=5*(l===null||this.Mh()||this.Oo()?1:l.ma());this.ro()&&(t=Ir(t,this.xo)),t=new We(t.Ph()-u,t.Rh()+u),this.ro()&&(t=ii(t,this.xo))}if(this.ro()){const l=Ir(t,this.xo),u=aa(l);if(o=u,a=this.xo,o.$a!==a.$a||o.Ua!==a.Ua){const c=this.ao!==null?Ir(this.ao,this.xo):null;this.xo=u,t=ii(l,u),c!==null&&(this.ao=ii(c,u))}}this.Ao(t)}else this.Ih===null&&(this.Ao(new We(-.5,.5)),this.xo=aa(null));var o,a;this.oo._o=!0}Ho(){return this.Mh()?wn:this.Oo()?Si:this.ro()?e=>Io(e,this.xo):null}a_(e,t,n){return t===void 0?(n===void 0&&(n=this.ba()),n.format(e)):t(e)}Wh(e,t){return this.a_(e,this.yo.priceFormatter,t)}s_(e,t){return this.a_(e,this.yo.percentageFormatter,t)}}class gk{constructor(e,t){this.po=[],this.o_=new Map,this.ho=0,this.__=0,this.u_=1e3,this.mo=null,this.c_=new de,this.yl=e,this.$i=t,this.d_=new dk(this);const n=t.W();this.f_=this.v_("left",n.leftPriceScale),this.p_=this.v_("right",n.rightPriceScale),this.f_.zo().l(this.m_.bind(this,this.f_),this),this.p_.zo().l(this.m_.bind(this,this.p_),this),this.b_(n)}b_(e){if(e.leftPriceScale&&this.f_.$h(e.leftPriceScale),e.rightPriceScale&&this.p_.$h(e.rightPriceScale),e.localization&&(this.f_.Ra(),this.p_.Ra()),e.overlayPriceScales){const t=Array.from(this.o_.values());for(const n of t){const i=j(n[0].Dt());i.$h(e.overlayPriceScales),e.localization&&i.Ra()}}}w_(e){switch(e){case"left":return this.f_;case"right":return this.p_}return this.o_.has(e)?$e(this.o_.get(e))[0].Dt():null}S(){this.$t().g_().p(this),this.f_.zo().p(this),this.p_.zo().p(this),this.po.forEach(e=>{e.S&&e.S()}),this.c_.m()}M_(){return this.u_}x_(e){this.u_=e}$t(){return this.$i}Hi(){return this.__}At(){return this.ho}S_(e){this.__=e,this.k_()}Lo(e){this.ho=e,this.f_.Lo(e),this.p_.Lo(e),this.po.forEach(t=>{if(this.vr(t)){const n=t.Dt();n!==null&&n.Lo(e)}}),this.k_()}Ba(){return this.po}vr(e){const t=e.Dt();return t===null||this.f_!==t&&this.p_!==t}qo(e,t,n){const i=n!==void 0?n:this.C_().y_+1;this.T_(e,t,i)}Zo(e){const t=this.po.indexOf(e);gs(t!==-1,"removeDataSource: invalid data source"),this.po.splice(t,1);const n=j(e.Dt()).Pa();if(this.o_.has(n)){const r=$e(this.o_.get(n)),o=r.indexOf(e);o!==-1&&(r.splice(o,1),r.length===0&&this.o_.delete(n))}const i=e.Dt();i&&i.Ba().indexOf(e)>=0&&i.Zo(e),i!==null&&(i.Yo(),this.P_(i)),this.mo=null}mr(e){return e===this.f_?"left":e===this.p_?"right":"overlay"}R_(){return this.f_}D_(){return this.p_}V_(e,t){e.Go(t)}O_(e,t){e.Jo(t),this.k_()}B_(e){e.Qo()}A_(e,t){e.t_(t)}I_(e,t){e.i_(t),this.k_()}z_(e){e.n_()}k_(){this.po.forEach(e=>{e.Vn()})}vn(){let e=null;return this.$i.W().rightPriceScale.visible&&this.p_.Ba().length!==0?e=this.p_:this.$i.W().leftPriceScale.visible&&this.f_.Ba().length!==0?e=this.f_:this.po.length!==0&&(e=this.po[0].Dt()),e===null&&(e=this.p_),e}pr(){let e=null;return this.$i.W().rightPriceScale.visible?e=this.p_:this.$i.W().leftPriceScale.visible&&(e=this.f_),e}P_(e){e!==null&&e.Vo()&&this.L_(e)}E_(e){const t=this.yl.Xs();e.Ro({Wn:!0}),t!==null&&e.h_(t),this.k_()}N_(){this.L_(this.f_),this.L_(this.p_)}F_(){this.P_(this.f_),this.P_(this.p_),this.po.forEach(e=>{this.vr(e)&&this.P_(e.Dt())}),this.k_(),this.$i.Uh()}Uo(){return this.mo===null&&(this.mo=E0(this.po)),this.mo}W_(){return this.c_}j_(){return this.d_}L_(e){const t=e.r_();if(t&&t.length>0&&!this.yl.Ni()){const n=this.yl.Xs();n!==null&&e.h_(n)}e.Vn()}C_(){const e=this.Uo();if(e.length===0)return{H_:0,y_:0};let t=0,n=0;for(let i=0;i<e.length;i++){const r=e[i].Xi();r!==null&&(r<t&&(t=r),r>n&&(n=r))}return{H_:t,y_:n}}T_(e,t,n){let i=this.w_(t);if(i===null&&(i=this.v_(t,this.$i.W().overlayPriceScales)),this.po.push(e),!gl(t)){const r=this.o_.get(t)||[];r.push(e),this.o_.set(t,r)}i.qo(e),e.Gi(i),e.Ki(n),this.P_(i),this.mo=null}m_(e,t,n){t.Cr!==n.Cr&&this.L_(e)}v_(e,t){const n=Object.assign({visible:!0,autoScale:!0},Dt(t)),i=new mk(e,n,this.$i.W().layout,this.$i.W().localization);return i.Lo(this.At()),i}}class vk{constructor(e,t,n=50){this.Ke=0,this.Ge=1,this.Je=1,this.tr=new Map,this.Qe=new Map,this.U_=e,this.q_=t,this.ir=n}Y_(e){const t=e.time,n=this.q_.cacheKey(t),i=this.tr.get(n);if(i!==void 0)return i.Z_;if(this.Ke===this.ir){const o=this.Qe.get(this.Je);this.Qe.delete(this.Je),this.tr.delete($e(o)),this.Je++,this.Ke--}const r=this.U_(e);return this.tr.set(n,{Z_:r,rr:this.Ge}),this.Qe.set(this.Ge,n),this.Ke++,this.Ge++,r}}class Ei{constructor(e,t){gs(e<=t,"right should be >= left"),this.X_=e,this.K_=t}Os(){return this.X_}ui(){return this.K_}G_(){return this.K_-this.X_+1}Kr(e){return this.X_<=e&&e<=this.K_}Ch(e){return this.X_===e.Os()&&this.K_===e.ui()}}function uf(s,e){return s===null||e===null?s===e:s.Ch(e)}class yk{constructor(){this.J_=new Map,this.tr=null,this.Q_=!1}tu(e){this.Q_=e,this.tr=null}iu(e,t){this.nu(t),this.tr=null;for(let n=t;n<e.length;++n){const i=e[n];let r=this.J_.get(i.timeWeight);r===void 0&&(r=[],this.J_.set(i.timeWeight,r)),r.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}su(e,t){const n=Math.ceil(t/e);return this.tr!==null&&this.tr.eu===n||(this.tr={Ha:this.ru(n),eu:n}),this.tr.Ha}nu(e){if(e===0)return void this.J_.clear();const t=[];this.J_.forEach((n,i)=>{e<=n[0].index?t.push(i):n.splice(hr(n,e,r=>r.index<e),1/0)});for(const n of t)this.J_.delete(n)}ru(e){let t=[];for(const n of Array.from(this.J_.keys()).sort((i,r)=>r-i)){if(!this.J_.get(n))continue;const i=t;t=[];const r=i.length;let o=0;const a=$e(this.J_.get(n)),l=a.length;let u=1/0,c=-1/0;for(let d=0;d<l;d++){const f=a[d],v=f.index;for(;o<r;){const p=i[o],m=p.index;if(!(m<v)){u=m;break}o++,t.push(p),c=m,u=1/0}if(u-v>=e&&v-c>=e)t.push(f),c=v;else if(this.Q_)return i}for(;o<r;o++)t.push(i[o])}return t}}class Cn{constructor(e){this.hu=e}lu(){return this.hu===null?null:new Ei(Math.floor(this.hu.Os()),Math.ceil(this.hu.ui()))}au(){return this.hu}static ou(){return new Cn(null)}}function wk(s,e){return s.weight>e.weight?s:e}class xk{constructor(e,t,n,i){this.__=0,this._u=null,this.uu=[],this.Mo=null,this.wo=null,this.cu=new yk,this.du=new Map,this.fu=Cn.ou(),this.vu=!0,this.pu=new de,this.mu=new de,this.bu=new de,this.wu=null,this.gu=null,this.Mu=[],this.cn=t,this.yo=n,this.xu=t.rightOffset,this.Su=t.barSpacing,this.$i=e,this.q_=i,this.ku(),this.cu.tu(t.uniformDistribution)}W(){return this.cn}yu(e){gt(this.yo,e),this.Cu(),this.ku()}$h(e,t){var n;gt(this.cn,e),this.cn.fixLeftEdge&&this.Tu(),this.cn.fixRightEdge&&this.Pu(),e.barSpacing!==void 0&&this.$i.Gn(e.barSpacing),e.rightOffset!==void 0&&this.$i.Jn(e.rightOffset),e.minBarSpacing!==void 0&&this.$i.Gn((n=e.barSpacing)!==null&&n!==void 0?n:this.Su),this.Cu(),this.ku(),this.bu.m()}mn(e){var t,n;return(n=(t=this.uu[e])===null||t===void 0?void 0:t.time)!==null&&n!==void 0?n:null}Ui(e){var t;return(t=this.uu[e])!==null&&t!==void 0?t:null}Va(e,t){if(this.uu.length<1)return null;if(this.q_.key(e)>this.q_.key(this.uu[this.uu.length-1].time))return t?this.uu.length-1:null;const n=hr(this.uu,this.q_.key(e),(i,r)=>this.q_.key(i.time)<r);return this.q_.key(e)<this.q_.key(this.uu[n].time)?t?n:null:n}Ni(){return this.__===0||this.uu.length===0||this._u===null}Da(){return this.uu.length>0}Xs(){return this.Ru(),this.fu.lu()}Du(){return this.Ru(),this.fu.au()}Vu(){const e=this.Xs();if(e===null)return null;const t={from:e.Os(),to:e.ui()};return this.Ou(t)}Ou(e){const t=Math.round(e.from),n=Math.round(e.to),i=j(this.Bu()),r=j(this.Au());return{from:j(this.Ui(Math.max(i,t))),to:j(this.Ui(Math.min(r,n)))}}Iu(e){return{from:j(this.Va(e.from,!0)),to:j(this.Va(e.to,!0))}}Hi(){return this.__}S_(e){if(!isFinite(e)||e<=0||this.__===e)return;const t=this.Du(),n=this.__;if(this.__=e,this.vu=!0,this.cn.lockVisibleTimeRangeOnResize&&n!==0){const i=this.Su*e/n;this.Su=i}if(this.cn.fixLeftEdge&&t!==null&&t.Os()<=0){const i=n-e;this.xu-=Math.round(i/this.Su)+1,this.vu=!0}this.zu(),this.Lu()}It(e){if(this.Ni()||!qi(e))return 0;const t=this.Eu()+this.xu-e;return this.__-(t+.5)*this.Su-1}Qs(e,t){const n=this.Eu(),i=t===void 0?0:t.from,r=t===void 0?e.length:t.to;for(let o=i;o<r;o++){const a=e[o].ot,l=n+this.xu-a,u=this.__-(l+.5)*this.Su-1;e[o].nt=u}}Nu(e){return Math.ceil(this.Fu(e))}Jn(e){this.vu=!0,this.xu=e,this.Lu(),this.$i.Wu(),this.$i.Uh()}le(){return this.Su}Gn(e){this.ju(e),this.Lu(),this.$i.Wu(),this.$i.Uh()}Hu(){return this.xu}Ha(){if(this.Ni())return null;if(this.gu!==null)return this.gu;const e=this.Su,t=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),n=Math.round(t/e),i=j(this.Xs()),r=Math.max(i.Os(),i.Os()-n),o=Math.max(i.ui(),i.ui()-n),a=this.cu.su(e,t),l=this.Bu()+n,u=this.Au()-n,c=this.$u(),d=this.cn.fixLeftEdge||c,f=this.cn.fixRightEdge||c;let v=0;for(const p of a){if(!(r<=p.index&&p.index<=o))continue;let m;v<this.Mu.length?(m=this.Mu[v],m.coord=this.It(p.index),m.label=this.Uu(p),m.weight=p.weight):(m={needAlignCoordinate:!1,coord:this.It(p.index),label:this.Uu(p),weight:p.weight},this.Mu.push(m)),this.Su>t/2&&!c?m.needAlignCoordinate=!1:m.needAlignCoordinate=d&&p.index<=l||f&&p.index>=u,v++}return this.Mu.length=v,this.gu=this.Mu,this.Mu}qu(){this.vu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}Yu(e){this.vu=!0,this._u=e,this.Lu(),this.Tu()}Zu(e,t){const n=this.Fu(e),i=this.le(),r=i+t*(i/10);this.Gn(r),this.cn.rightBarStaysOnScroll||this.Jn(this.Hu()+(n-this.Fu(e)))}Go(e){this.Mo&&this.n_(),this.wo===null&&this.wu===null&&(this.Ni()||(this.wo=e,this.Xu()))}Jo(e){if(this.wu===null)return;const t=Pu(this.__-e,0,this.__),n=Pu(this.__-j(this.wo),0,this.__);t!==0&&n!==0&&this.Gn(this.wu.le*t/n)}Qo(){this.wo!==null&&(this.wo=null,this.Ku())}t_(e){this.Mo===null&&this.wu===null&&(this.Ni()||(this.Mo=e,this.Xu()))}i_(e){if(this.Mo===null)return;const t=(this.Mo-e)/this.le();this.xu=j(this.wu).Hu+t,this.vu=!0,this.Lu()}n_(){this.Mo!==null&&(this.Mo=null,this.Ku())}Gu(){this.Ju(this.cn.rightOffset)}Ju(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.xu,i=performance.now();this.$i.Zn({Qu:r=>(r-i)/t>=1,tc:r=>{const o=(r-i)/t;return o>=1?e:n+(e-n)*o}})}bt(e,t){this.vu=!0,this.uu=e,this.cu.iu(e,t),this.Lu()}nc(){return this.pu}sc(){return this.mu}ec(){return this.bu}Eu(){return this._u||0}rc(e){const t=e.G_();this.ju(this.__/t),this.xu=e.ui()-this.Eu(),this.Lu(),this.vu=!0,this.$i.Wu(),this.$i.Uh()}hc(){const e=this.Bu(),t=this.Au();e!==null&&t!==null&&this.rc(new Ei(e,t+this.cn.rightOffset))}lc(e){const t=new Ei(e.from,e.to);this.rc(t)}qi(e){return this.yo.timeFormatter!==void 0?this.yo.timeFormatter(e.originalTime):this.q_.formatHorzItem(e.time)}$u(){const{handleScroll:e,handleScale:t}=this.$i.W();return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}Bu(){return this.uu.length===0?null:0}Au(){return this.uu.length===0?null:this.uu.length-1}ac(e){return(this.__-1-e)/this.Su}Fu(e){const t=this.ac(e),n=this.Eu()+this.xu-t;return Math.round(1e6*n)/1e6}ju(e){const t=this.Su;this.Su=e,this.zu(),t!==this.Su&&(this.vu=!0,this.oc())}Ru(){if(!this.vu)return;if(this.vu=!1,this.Ni())return void this._c(Cn.ou());const e=this.Eu(),t=this.__/this.Su,n=this.xu+e,i=new Ei(n-t+1,n);this._c(new Cn(i))}zu(){const e=this.uc();if(this.Su<e&&(this.Su=e,this.vu=!0),this.__!==0){const t=.5*this.__;this.Su>t&&(this.Su=t,this.vu=!0)}}uc(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&this.uu.length!==0?this.__/this.uu.length:this.cn.minBarSpacing}Lu(){const e=this.cc();e!==null&&this.xu<e&&(this.xu=e,this.vu=!0);const t=this.dc();this.xu>t&&(this.xu=t,this.vu=!0)}cc(){const e=this.Bu(),t=this._u;return e===null||t===null?null:e-t-1+(this.cn.fixLeftEdge?this.__/this.Su:Math.min(2,this.uu.length))}dc(){return this.cn.fixRightEdge?0:this.__/this.Su-Math.min(2,this.uu.length)}Xu(){this.wu={le:this.le(),Hu:this.Hu()}}Ku(){this.wu=null}Uu(e){let t=this.du.get(e.weight);return t===void 0&&(t=new vk(n=>this.fc(n),this.q_),this.du.set(e.weight,t)),t.Y_(e)}fc(e){return this.q_.formatTickmark(e,this.yo)}_c(e){const t=this.fu;this.fu=e,uf(t.lu(),this.fu.lu())||this.pu.m(),uf(t.au(),this.fu.au())||this.mu.m(),this.oc()}oc(){this.gu=null}Cu(){this.oc(),this.du.clear()}ku(){this.q_.updateFormatter(this.yo)}Tu(){if(!this.cn.fixLeftEdge)return;const e=this.Bu();if(e===null)return;const t=this.Xs();if(t===null)return;const n=t.Os()-e;if(n<0){const i=this.xu-n-1;this.Jn(i)}this.zu()}Pu(){this.Lu(),this.zu()}}class bk{X(e,t,n){e.useMediaCoordinateSpace(i=>this.K(i,t,n))}gl(e,t,n){e.useMediaCoordinateSpace(i=>this.vc(i,t,n))}vc(e,t,n){}}class _k extends bk{constructor(e){super(),this.mc=new Map,this.zt=e}K(e){}vc(e){if(!this.zt.yt)return;const{context:t,mediaSize:n}=e;let i=0;for(const o of this.zt.bc){if(o.Kt.length===0)continue;t.font=o.R;const a=this.wc(t,o.Kt);a>n.width?o.Zu=n.width/a:o.Zu=1,i+=o.gc*o.Zu}let r=0;switch(this.zt.Mc){case"top":r=0;break;case"center":r=Math.max((n.height-i)/2,0);break;case"bottom":r=Math.max(n.height-i,0)}t.fillStyle=this.zt.V;for(const o of this.zt.bc){t.save();let a=0;switch(this.zt.xc){case"left":t.textAlign="left",a=o.gc/2;break;case"center":t.textAlign="center",a=n.width/2;break;case"right":t.textAlign="right",a=n.width-1-o.gc/2}t.translate(a,r),t.textBaseline="top",t.font=o.R,t.scale(o.Zu,o.Zu),t.fillText(o.Kt,0,o.Sc),t.restore(),r+=o.gc*o.Zu}}wc(e,t){const n=this.kc(e.font);let i=n.get(t);return i===void 0&&(i=e.measureText(t).width,n.set(t,i)),i}kc(e){let t=this.mc.get(e);return t===void 0&&(t=new Map,this.mc.set(e,t)),t}}class Sk{constructor(e){this.ft=!0,this.Ft={yt:!1,V:"",bc:[],Mc:"center",xc:"center"},this.Wt=new _k(this.Ft),this.jt=e}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const e=this.jt.W(),t=this.Ft;t.yt=e.visible,t.yt&&(t.V=e.color,t.xc=e.horzAlign,t.Mc=e.vertAlign,t.bc=[{Kt:e.text,R:On(e.fontSize,e.fontFamily,e.fontStyle),gc:1.2*e.fontSize,Sc:0,Zu:0}])}}class kk extends Xc{constructor(e,t){super(),this.cn=t,this.wn=new Sk(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}Vn(){this.wn.bt()}}var cf,hf,df,ff,pf;(function(s){s[s.OnTouchEnd=0]="OnTouchEnd",s[s.OnNextTap=1]="OnNextTap"})(cf||(cf={}));class Ek{constructor(e,t,n){this.yc=[],this.Cc=[],this.__=0,this.Tc=null,this.Pc=new de,this.Rc=new de,this.Dc=null,this.Vc=e,this.cn=t,this.q_=n,this.Oc=new nS(this),this.yl=new xk(this,t.timeScale,this.cn.localization,n),this.vt=new pS(this,t.crosshair),this.Bc=new uk(t.crosshair),this.Ac=new kk(this,t.watermark),this.Ic(),this.yc[0].x_(2e3),this.zc=this.Lc(0),this.Ec=this.Lc(1)}Kl(){this.Nc(Se.es())}Uh(){this.Nc(Se.ss())}oa(){this.Nc(new Se(1))}Gl(e){const t=this.Fc(e);this.Nc(t)}Wc(){return this.Tc}jc(e){const t=this.Tc;this.Tc=e,t!==null&&this.Gl(t.Hc),e!==null&&this.Gl(e.Hc)}W(){return this.cn}$h(e){gt(this.cn,e),this.yc.forEach(t=>t.b_(e)),e.timeScale!==void 0&&this.yl.$h(e.timeScale),e.localization!==void 0&&this.yl.yu(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.Pc.m(),this.zc=this.Lc(0),this.Ec=this.Lc(1),this.Kl()}$c(e,t){if(e==="left")return void this.$h({leftPriceScale:t});if(e==="right")return void this.$h({rightPriceScale:t});const n=this.Uc(e);n!==null&&(n.Dt.$h(t),this.Pc.m())}Uc(e){for(const t of this.yc){const n=t.w_(e);if(n!==null)return{Ht:t,Dt:n}}return null}St(){return this.yl}qc(){return this.yc}Yc(){return this.Ac}Zc(){return this.vt}Xc(){return this.Rc}Kc(e,t){e.Lo(t),this.Wu()}S_(e){this.__=e,this.yl.S_(this.__),this.yc.forEach(t=>t.S_(e)),this.Wu()}Ic(e){const t=new gk(this.yl,this);e!==void 0?this.yc.splice(e,0,t):this.yc.push(t);const n=e===void 0?this.yc.length-1:e,i=Se.es();return i.Nn(n,{Fn:0,Wn:!0}),this.Nc(i),t}V_(e,t,n){e.V_(t,n)}O_(e,t,n){e.O_(t,n),this.Jl(),this.Nc(this.Gc(e,2))}B_(e,t){e.B_(t),this.Nc(this.Gc(e,2))}A_(e,t,n){t.Vo()||e.A_(t,n)}I_(e,t,n){t.Vo()||(e.I_(t,n),this.Jl(),this.Nc(this.Gc(e,2)))}z_(e,t){t.Vo()||(e.z_(t),this.Nc(this.Gc(e,2)))}E_(e,t){e.E_(t),this.Nc(this.Gc(e,2))}Jc(e){this.yl.Go(e)}Qc(e,t){const n=this.St();if(n.Ni()||t===0)return;const i=n.Hi();e=Math.max(1,Math.min(e,i)),n.Zu(e,t),this.Wu()}td(e){this.nd(0),this.sd(e),this.ed()}rd(e){this.yl.Jo(e),this.Wu()}hd(){this.yl.Qo(),this.Uh()}nd(e){this.yl.t_(e)}sd(e){this.yl.i_(e),this.Wu()}ed(){this.yl.n_(),this.Uh()}wt(){return this.Cc}ld(e,t,n,i,r){this.vt.gn(e,t);let o=NaN,a=this.yl.Nu(e);const l=this.yl.Xs();l!==null&&(a=Math.min(Math.max(l.Os(),a),l.ui()));const u=i.vn(),c=u.Ct();c!==null&&(o=u.pn(t,c)),o=this.Bc.Oa(o,a,i),this.vt.kn(a,o,i),this.oa(),r||this.Rc.m(this.vt.xt(),{x:e,y:t},n)}ad(e,t,n){const i=n.vn(),r=i.Ct(),o=i.Rt(e,j(r)),a=this.yl.Va(t,!0),l=this.yl.It(j(a));this.ld(l,o,null,n,!0)}od(e){this.Zc().Cn(),this.oa(),e||this.Rc.m(null,null,null)}Jl(){const e=this.vt.Ht();if(e!==null){const t=this.vt.xn(),n=this.vt.Sn();this.ld(t,n,null,e)}this.vt.Vn()}_d(e,t,n){const i=this.yl.mn(0);t!==void 0&&n!==void 0&&this.yl.bt(t,n);const r=this.yl.mn(0),o=this.yl.Eu(),a=this.yl.Xs();if(a!==null&&i!==null&&r!==null){const l=a.Kr(o),u=this.q_.key(i)>this.q_.key(r),c=e!==null&&e>o&&!u,d=this.yl.W().allowShiftVisibleRangeOnWhitespaceReplacement,f=l&&(n!==void 0||d)&&this.yl.W().shiftVisibleRangeOnNewBar;if(c&&!f){const v=e-o;this.yl.Jn(this.yl.Hu()-v)}}this.yl.Yu(e)}ia(e){e!==null&&e.F_()}dr(e){const t=this.yc.find(n=>n.Uo().includes(e));return t===void 0?null:t}Wu(){this.Ac.Vn(),this.yc.forEach(e=>e.F_()),this.Jl()}S(){this.yc.forEach(e=>e.S()),this.yc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}ud(){return this.Oc}br(){return this.Oc.W()}g_(){return this.Pc}dd(e,t,n){const i=this.yc[0],r=this.fd(t,e,i,n);return this.Cc.push(r),this.Cc.length===1?this.Kl():this.Uh(),r}vd(e){const t=this.dr(e),n=this.Cc.indexOf(e);gs(n!==-1,"Series not found"),this.Cc.splice(n,1),j(t).Zo(e),e.S&&e.S()}Xl(e,t){const n=j(this.dr(e));n.Zo(e);const i=this.Uc(t);if(i===null){const r=e.Xi();n.qo(e,t,r)}else{const r=i.Ht===n?e.Xi():void 0;i.Ht.qo(e,t,r)}}hc(){const e=Se.ss();e.$n(),this.Nc(e)}pd(e){const t=Se.ss();t.Yn(e),this.Nc(t)}Kn(){const e=Se.ss();e.Kn(),this.Nc(e)}Gn(e){const t=Se.ss();t.Gn(e),this.Nc(t)}Jn(e){const t=Se.ss();t.Jn(e),this.Nc(t)}Zn(e){const t=Se.ss();t.Zn(e),this.Nc(t)}Un(){const e=Se.ss();e.Un(),this.Nc(e)}md(){return this.cn.rightPriceScale.visible?"right":"left"}bd(){return this.Ec}q(){return this.zc}Bt(e){const t=this.Ec,n=this.zc;if(t===n)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Dc===null||this.Dc.Ps!==n||this.Dc.Rs!==t)this.Dc={Ps:n,Rs:t,wd:new Map};else{const r=this.Dc.wd.get(e);if(r!==void 0)return r}const i=function(r,o,a){const[l,u,c,d]=Ki(r),[f,v,p,m]=Ki(o),x=[Ye(l+a*(f-l)),Ye(u+a*(v-u)),Ye(c+a*(p-c)),l0(d+a*(m-d))];return`rgba(${x[0]}, ${x[1]}, ${x[2]}, ${x[3]})`}(n,t,e/100);return this.Dc.wd.set(e,i),i}Gc(e,t){const n=new Se(t);if(e!==null){const i=this.yc.indexOf(e);n.Nn(i,{Fn:t})}return n}Fc(e,t){return t===void 0&&(t=2),this.Gc(this.dr(e),t)}Nc(e){this.Vc&&this.Vc(e),this.yc.forEach(t=>t.j_().qh().bt())}fd(e,t,n,i){const r=new Yc(this,e,t,n,i),o=e.priceScaleId!==void 0?e.priceScaleId:this.md();return n.qo(r,o),gl(o)||r.$h(e),r}Lc(e){const t=this.cn.layout;return t.background.type==="gradient"?e===0?t.background.topColor:t.background.bottomColor:t.background.color}}function Mu(s){return!Et(s)&&!cr(s)}function C0(s){return Et(s)}(function(s){s[s.Disabled=0]="Disabled",s[s.Continuous=1]="Continuous",s[s.OnDataUpdate=2]="OnDataUpdate"})(hf||(hf={})),function(s){s[s.LastBar=0]="LastBar",s[s.LastVisible=1]="LastVisible"}(df||(df={})),function(s){s.Solid="solid",s.VerticalGradient="gradient"}(ff||(ff={})),function(s){s[s.Year=0]="Year",s[s.Month=1]="Month",s[s.DayOfMonth=2]="DayOfMonth",s[s.Time=3]="Time",s[s.TimeWithSeconds=4]="TimeWithSeconds"}(pf||(pf={}));const mf=s=>s.getUTCFullYear();function Ck(s,e,t){return e.replace(/yyyy/g,(n=>At(mf(n),4))(s)).replace(/yy/g,(n=>At(mf(n)%100,2))(s)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(s,t)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(s,t)).replace(/MM/g,(n=>At((i=>i.getUTCMonth()+1)(n),2))(s)).replace(/dd/g,(n=>At((i=>i.getUTCDate())(n),2))(s))}class j0{constructor(e="yyyy-MM-dd",t="default"){this.gd=e,this.Md=t}Y_(e){return Ck(e,this.gd,this.Md)}}class jk{constructor(e){this.xd=e||"%h:%m:%s"}Y_(e){return this.xd.replace("%h",At(e.getUTCHours(),2)).replace("%m",At(e.getUTCMinutes(),2)).replace("%s",At(e.getUTCSeconds(),2))}}const Nk={Sd:"yyyy-MM-dd",kd:"%h:%m:%s",yd:" ",Cd:"default"};class Tk{constructor(e={}){const t=Object.assign(Object.assign({},Nk),e);this.Td=new j0(t.Sd,t.Cd),this.Pd=new jk(t.kd),this.Rd=t.yd}Y_(e){return`${this.Td.Y_(e)}${this.Rd}${this.Pd.Y_(e)}`}}function Ur(s){return 60*s*60*1e3}function ca(s){return 60*s*1e3}const Fr=[{Dd:(gf=1,1e3*gf),Vd:10},{Dd:ca(1),Vd:20},{Dd:ca(5),Vd:21},{Dd:ca(30),Vd:22},{Dd:Ur(1),Vd:30},{Dd:Ur(3),Vd:31},{Dd:Ur(6),Vd:32},{Dd:Ur(12),Vd:33}];var gf;function vf(s,e){if(s.getUTCFullYear()!==e.getUTCFullYear())return 70;if(s.getUTCMonth()!==e.getUTCMonth())return 60;if(s.getUTCDate()!==e.getUTCDate())return 50;for(let t=Fr.length-1;t>=0;--t)if(Math.floor(e.getTime()/Fr[t].Dd)!==Math.floor(s.getTime()/Fr[t].Dd))return Fr[t].Vd;return 0}function ha(s){let e=s;if(cr(s)&&(e=Zc(s)),!Mu(e))throw new Error("time must be of type BusinessDay");const t=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Od:Math.round(t.getTime()/1e3),Bd:e}}function yf(s){if(!C0(s))throw new Error("time must be of type isUTCTimestamp");return{Od:s}}function Zc(s){const e=new Date(s);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${s}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function wf(s){cr(s.time)&&(s.time=Zc(s.time))}class xf{options(){return this.cn}setOptions(e){this.cn=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(t){t.forEach(wf)}(e):wf(e)}createConverterToInternalObj(e){return j(function(t){return t.length===0?null:Mu(t[0].time)||cr(t[0].time)?ha:yf}(e))}key(e){return typeof e=="object"&&"Od"in e?e.Od:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return t.Bd===void 0?new Date(1e3*t.Od).getTime():new Date(Date.UTC(t.Bd.year,t.Bd.month-1,t.Bd.day)).getTime()}convertHorzItemToInternal(e){return C0(t=e)?yf(t):Mu(t)?ha(t):ha(Zc(t));var t}updateFormatter(e){if(!this.cn)return;const t=e.dateFormat;this.cn.timeScale.timeVisible?this.Ad=new Tk({Sd:t,kd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",yd:"   ",Cd:e.locale}):this.Ad=new j0(t,e.locale)}formatHorzItem(e){const t=e;return this.Ad.Y_(new Date(1e3*t.Od))}formatTickmark(e,t){const n=function(r,o,a){switch(r){case 0:case 10:return o?a?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),i=this.cn.timeScale;if(i.tickMarkFormatter!==void 0){const r=i.tickMarkFormatter(e.originalTime,n,t.locale);if(r!==null)return r}return function(r,o,a){const l={};switch(o){case 0:l.year="numeric";break;case 1:l.month="short";break;case 2:l.day="numeric";break;case 3:l.hour12=!1,l.hour="2-digit",l.minute="2-digit";break;case 4:l.hour12=!1,l.hour="2-digit",l.minute="2-digit",l.second="2-digit"}const u=r.Bd===void 0?new Date(1e3*r.Od):new Date(Date.UTC(r.Bd.year,r.Bd.month-1,r.Bd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(a,l)}(e.time,n,t.locale)}maxTickMarkWeight(e){let t=e.reduce(wk,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){(function(n,i=0){if(n.length===0)return;let r=i===0?null:n[i-1].time.Od,o=r!==null?new Date(1e3*r):null,a=0;for(let l=i;l<n.length;++l){const u=n[l],c=new Date(1e3*u.time.Od);o!==null&&(u.timeWeight=vf(c,o)),a+=u.time.Od-(r||u.time.Od),r=u.time.Od,o=c}if(i===0&&n.length>1){const l=Math.ceil(a/(n.length-1)),u=new Date(1e3*(n[0].time.Od-l));n[0].timeWeight=vf(new Date(1e3*n[0].time.Od),u)}})(e,t)}static Id(e){return gt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Dn=typeof window<"u";function bf(){return!!Dn&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function da(){return!!Dn&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ru(s){return s+s%2}function fa(s,e){return s.zd-e.zd}function pa(s,e,t){const n=(s.zd-e.zd)/(s.ot-e.ot);return Math.sign(n)*Math.min(Math.abs(n),t)}class Pk{constructor(e,t,n,i){this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=null,this.jd=0,this.Hd=0,this.$d=e,this.Ud=t,this.qd=n,this.rs=i}Yd(e,t){if(this.Ld!==null){if(this.Ld.ot===t)return void(this.Ld.zd=e);if(Math.abs(this.Ld.zd-e)<this.rs)return}this.Fd=this.Nd,this.Nd=this.Ed,this.Ed=this.Ld,this.Ld={ot:t,zd:e}}Vr(e,t){if(this.Ld===null||this.Ed===null||t-this.Ld.ot>50)return;let n=0;const i=pa(this.Ld,this.Ed,this.Ud),r=fa(this.Ld,this.Ed),o=[i],a=[r];if(n+=r,this.Nd!==null){const u=pa(this.Ed,this.Nd,this.Ud);if(Math.sign(u)===Math.sign(i)){const c=fa(this.Ed,this.Nd);if(o.push(u),a.push(c),n+=c,this.Fd!==null){const d=pa(this.Nd,this.Fd,this.Ud);if(Math.sign(d)===Math.sign(i)){const f=fa(this.Nd,this.Fd);o.push(d),a.push(f),n+=f}}}}let l=0;for(let u=0;u<o.length;++u)l+=a[u]/n*o[u];Math.abs(l)<this.$d||(this.Wd={zd:e,ot:t},this.Hd=l,this.jd=function(u,c){const d=Math.log(c);return Math.log(1*d/-u)/d}(Math.abs(l),this.qd))}tc(e){const t=j(this.Wd),n=e-t.ot;return t.zd+this.Hd*(Math.pow(this.qd,n)-1)/Math.log(this.qd)}Qu(e){return this.Wd===null||this.Zd(e)===this.jd}Zd(e){const t=e-j(this.Wd).ot;return Math.min(t,this.jd)}}class Mk{constructor(e,t){this.Xd=void 0,this.Kd=void 0,this.Gd=void 0,this.en=!1,this.Jd=e,this.Qd=t,this.tf()}bt(){this.tf()}if(){this.Xd&&this.Jd.removeChild(this.Xd),this.Kd&&this.Jd.removeChild(this.Kd),this.Xd=void 0,this.Kd=void 0}nf(){return this.en!==this.sf()||this.Gd!==this.ef()}ef(){return a0(Ki(this.Qd.W().layout.textColor))>160?"dark":"light"}sf(){return this.Qd.W().layout.attributionLogo}rf(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}tf(){this.nf()&&(this.if(),this.en=this.sf(),this.en&&(this.Gd=this.ef(),this.Kd=document.createElement("style"),this.Kd.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.Xd=document.createElement("a"),this.Xd.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.rf()}`,this.Xd.title="Charting by TradingView",this.Xd.id="tv-attr-logo",this.Xd.target="_blank",this.Xd.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35 19" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.Xd.toggleAttribute("data-dark",this.Gd==="dark"),this.Jd.appendChild(this.Kd),this.Jd.appendChild(this.Xd)))}}function Bs(s,e){const t=j(s.ownerDocument).createElement("canvas");s.appendChild(t);const n=B_(t,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(i,r)=>({width:Math.max(i.width,r.width),height:Math.max(i.height,r.height)})});return n.resizeCanvasElement(e),n}function Ws(s){var e;s.width=1,s.height=1,(e=s.getContext("2d"))===null||e===void 0||e.clearRect(0,0,1,1)}function $u(s,e,t,n){s.gl&&s.gl(e,t,n)}function lo(s,e,t,n){s.X(e,t,n)}function Lu(s,e,t,n){const i=s(t,n);for(const r of i){const o=r.gt();o!==null&&e(o)}}function Rk(s){Dn&&window.chrome!==void 0&&s.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class eh{constructor(e,t,n){this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.df=null,this.ff=!1,this.vf=null,this.pf=null,this.mf=!1,this.bf=!1,this.wf=!1,this.gf=null,this.Mf=null,this.xf=null,this.Sf=null,this.kf=null,this.yf=null,this.Cf=null,this.Tf=0,this.Pf=!1,this.Rf=!1,this.Df=!1,this.Vf=0,this.Of=null,this.Bf=!da(),this.Af=i=>{this.If(i)},this.zf=i=>{if(this.Lf(i)){const r=this.Ef(i);if(++this._f,this.uf&&this._f>1){const{Nf:o}=this.Ff(xt(i),this.cf);o<30&&!this.wf&&this.Wf(r,this.Hf.jf),this.$f()}}else{const r=this.Ef(i);if(++this.hf,this.lf&&this.hf>1){const{Nf:o}=this.Ff(xt(i),this.af);o<5&&!this.bf&&this.Uf(r,this.Hf.qf),this.Yf()}}},this.Zf=e,this.Hf=t,this.cn=n,this.Xf()}S(){this.gf!==null&&(this.gf(),this.gf=null),this.Mf!==null&&(this.Mf(),this.Mf=null),this.Sf!==null&&(this.Sf(),this.Sf=null),this.kf!==null&&(this.kf(),this.kf=null),this.yf!==null&&(this.yf(),this.yf=null),this.xf!==null&&(this.xf(),this.xf=null),this.Kf(),this.Yf()}Gf(e){this.Sf&&this.Sf();const t=this.Jf.bind(this);if(this.Sf=()=>{this.Zf.removeEventListener("mousemove",t)},this.Zf.addEventListener("mousemove",t),this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.Qf),this.Bf=!0}Yf(){this.lf!==null&&clearTimeout(this.lf),this.hf=0,this.lf=null,this.af={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}$f(){this.uf!==null&&clearTimeout(this.uf),this._f=0,this.uf=null,this.cf={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Jf(e){if(this.Df||this.pf!==null||this.Lf(e))return;const t=this.Ef(e);this.Uf(t,this.Hf.tv),this.Bf=!0}iv(e){const t=ma(e.changedTouches,j(this.Of));if(t===null||(this.Vf=Br(e),this.Cf!==null)||this.Rf)return;this.Pf=!0;const n=this.Ff(xt(t),j(this.pf)),{nv:i,sv:r,Nf:o}=n;if(this.mf||!(o<5)){if(!this.mf){const a=.5*i,l=r>=a&&!this.cn.ev(),u=a>r&&!this.cn.rv();l||u||(this.Rf=!0),this.mf=!0,this.wf=!0,this.Kf(),this.$f()}if(!this.Rf){const a=this.Ef(e,t);this.Wf(a,this.Hf.hv),tn(e)}}}lv(e){if(e.button!==0)return;const t=this.Ff(xt(e),j(this.vf)),{Nf:n}=t;if(n>=5&&(this.bf=!0,this.Yf()),this.bf){const i=this.Ef(e);this.Uf(i,this.Hf.av)}}Ff(e,t){const n=Math.abs(t.nt-e.nt),i=Math.abs(t.st-e.st);return{nv:n,sv:i,Nf:n+i}}ov(e){let t=ma(e.changedTouches,j(this.Of));if(t===null&&e.touches.length===0&&(t=e.changedTouches[0]),t===null)return;this.Of=null,this.Vf=Br(e),this.Kf(),this.pf=null,this.yf&&(this.yf(),this.yf=null);const n=this.Ef(e,t);if(this.Wf(n,this.Hf._v),++this._f,this.uf&&this._f>1){const{Nf:i}=this.Ff(xt(t),this.cf);i<30&&!this.wf&&this.Wf(n,this.Hf.jf),this.$f()}else this.wf||(this.Wf(n,this.Hf.uv),this.Hf.uv&&tn(e));this._f===0&&tn(e),e.touches.length===0&&this.ff&&(this.ff=!1,tn(e))}If(e){if(e.button!==0)return;const t=this.Ef(e);if(this.vf=null,this.Df=!1,this.kf&&(this.kf(),this.kf=null),bf()&&this.Zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.Af),!this.Lf(e))if(this.Uf(t,this.Hf.cv),++this.hf,this.lf&&this.hf>1){const{Nf:n}=this.Ff(xt(e),this.af);n<5&&!this.bf&&this.Uf(t,this.Hf.qf),this.Yf()}else this.bf||this.Uf(t,this.Hf.dv)}Kf(){this.df!==null&&(clearTimeout(this.df),this.df=null)}fv(e){if(this.Of!==null)return;const t=e.changedTouches[0];this.Of=t.identifier,this.Vf=Br(e);const n=this.Zf.ownerDocument.documentElement;this.wf=!1,this.mf=!1,this.Rf=!1,this.pf=xt(t),this.yf&&(this.yf(),this.yf=null);{const r=this.iv.bind(this),o=this.ov.bind(this);this.yf=()=>{n.removeEventListener("touchmove",r),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",r,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this.Kf(),this.df=setTimeout(this.vv.bind(this,e),240)}const i=this.Ef(e,t);this.Wf(i,this.Hf.pv),this.uf||(this._f=0,this.uf=setTimeout(this.$f.bind(this),500),this.cf=xt(t))}mv(e){if(e.button!==0)return;const t=this.Zf.ownerDocument.documentElement;bf()&&t.addEventListener("mouseleave",this.Af),this.bf=!1,this.vf=xt(e),this.kf&&(this.kf(),this.kf=null);{const i=this.lv.bind(this),r=this.If.bind(this);this.kf=()=>{t.removeEventListener("mousemove",i),t.removeEventListener("mouseup",r)},t.addEventListener("mousemove",i),t.addEventListener("mouseup",r)}if(this.Df=!0,this.Lf(e))return;const n=this.Ef(e);this.Uf(n,this.Hf.bv),this.lf||(this.hf=0,this.lf=setTimeout(this.Yf.bind(this),500),this.af=xt(e))}Xf(){this.Zf.addEventListener("mouseenter",this.Gf.bind(this)),this.Zf.addEventListener("touchcancel",this.Kf.bind(this));{const e=this.Zf.ownerDocument,t=n=>{this.Hf.wv&&(n.composed&&this.Zf.contains(n.composedPath()[0])||n.target&&this.Zf.contains(n.target)||this.Hf.wv())};this.Mf=()=>{e.removeEventListener("touchstart",t)},this.gf=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}da()&&(this.xf=()=>{this.Zf.removeEventListener("dblclick",this.zf)},this.Zf.addEventListener("dblclick",this.zf)),this.Zf.addEventListener("mouseleave",this.gv.bind(this)),this.Zf.addEventListener("touchstart",this.fv.bind(this),{passive:!0}),Rk(this.Zf),this.Zf.addEventListener("mousedown",this.mv.bind(this)),this.Mv(),this.Zf.addEventListener("touchmove",()=>{},{passive:!1})}Mv(){this.Hf.xv===void 0&&this.Hf.Sv===void 0&&this.Hf.kv===void 0||(this.Zf.addEventListener("touchstart",e=>this.yv(e.touches),{passive:!0}),this.Zf.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Cf!==null&&this.Hf.Sv!==void 0){const t=_f(e.touches[0],e.touches[1])/this.Tf;this.Hf.Sv(this.Cf,t),tn(e)}},{passive:!1}),this.Zf.addEventListener("touchend",e=>{this.yv(e.touches)}))}yv(e){e.length===1&&(this.Pf=!1),e.length!==2||this.Pf||this.ff?this.Cv():this.Tv(e)}Tv(e){const t=this.Zf.getBoundingClientRect()||{left:0,top:0};this.Cf={nt:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,st:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Tf=_f(e[0],e[1]),this.Hf.xv!==void 0&&this.Hf.xv(),this.Kf()}Cv(){this.Cf!==null&&(this.Cf=null,this.Hf.kv!==void 0&&this.Hf.kv())}gv(e){if(this.Sf&&this.Sf(),this.Lf(e)||!this.Bf)return;const t=this.Ef(e);this.Uf(t,this.Hf.Pv),this.Bf=!da()}vv(e){const t=ma(e.touches,j(this.Of));if(t===null)return;const n=this.Ef(e,t);this.Wf(n,this.Hf.Rv),this.wf=!0,this.ff=!0}Lf(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Br(e)<this.Vf+500}Wf(e,t){t&&t.call(this.Hf,e)}Uf(e,t){t&&t.call(this.Hf,e)}Ef(e,t){const n=t||e,i=this.Zf.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Dv:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Vv:e.type,Ov:n.target,Bv:e.view,Av:()=>{e.type!=="touchstart"&&tn(e)}}}}function _f(s,e){const t=s.clientX-e.clientX,n=s.clientY-e.clientY;return Math.sqrt(t*t+n*n)}function tn(s){s.cancelable&&s.preventDefault()}function xt(s){return{nt:s.pageX,st:s.pageY}}function Br(s){return s.timeStamp||performance.now()}function ma(s,e){for(let t=0;t<s.length;++t)if(s[t].identifier===e)return s[t];return null}function Wr(s){return{Hc:s.Hc,Iv:{gr:s.zv.externalId},Lv:s.zv.cursorStyle}}function $k(s,e,t){for(const n of s){const i=n.gt();if(i!==null&&i.wr){const r=i.wr(e,t);if(r!==null)return{Bv:n,Iv:r}}}return null}function ga(s,e){return t=>{var n,i,r,o;return((i=(n=t.Dt())===null||n===void 0?void 0:n.Pa())!==null&&i!==void 0?i:"")!==e?[]:(o=(r=t.da)===null||r===void 0?void 0:r.call(t,s))!==null&&o!==void 0?o:[]}}function Sf(s,e,t,n){if(!s.length)return;let i=0;const r=t/2,o=s[0].At(n,!0);let a=e===1?r-(s[0].Vi()-o/2):s[0].Vi()-o/2-r;a=Math.max(0,a);for(let l=1;l<s.length;l++){const u=s[l],c=s[l-1],d=c.At(n,!1),f=u.Vi(),v=c.Vi();if(e===1?f>v-d:f<v+d){const p=v-d*e;u.Oi(p);const m=p-e*d/2;if((e===1?m<0:m>t)&&a>0){const x=e===1?-1-m:m-t,g=Math.min(x,a);for(let w=i;w<s.length;w++)s[w].Oi(s[w].Vi()+e*g);a-=g}}else i=l,a=e===1?v-d-f:f-(v+d)}}class kf{constructor(e,t,n,i){this.Li=null,this.Ev=null,this.Nv=!1,this.Fv=new Gi(200),this.Qr=null,this.Wv=0,this.jv=!1,this.Hv=()=>{this.jv||this.tn.$v().$t().Uh()},this.Uv=()=>{this.jv||this.tn.$v().$t().Uh()},this.tn=e,this.cn=t,this.ko=t.layout,this.Oc=n,this.qv=i==="left",this.Yv=ga("normal",i),this.Zv=ga("top",i),this.Xv=ga("bottom",i),this.Kv=document.createElement("div"),this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Kv.style.width="25px",this.Kv.style.left="0",this.Kv.style.position="relative",this.Gv=Bs(this.Kv,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const r=this.Gv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Jv=Bs(this.Kv,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const o=this.Jv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={bv:this.Qv.bind(this),pv:this.Qv.bind(this),av:this.tp.bind(this),hv:this.tp.bind(this),wv:this.ip.bind(this),cv:this.np.bind(this),_v:this.np.bind(this),qf:this.sp.bind(this),jf:this.sp.bind(this),Qf:this.ep.bind(this),Pv:this.rp.bind(this)};this.hp=new eh(this.Jv.canvasElement,a,{ev:()=>!this.cn.handleScroll.vertTouchDrag,rv:()=>!0})}S(){this.hp.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ws(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ws(this.Gv.canvasElement),this.Gv.dispose(),this.Li!==null&&this.Li.Ko().p(this),this.Li=null}lp(){return this.Kv}P(){return this.ko.fontSize}ap(){const e=this.Oc.W();return this.Qr!==e.R&&(this.Fv.nr(),this.Qr=e.R),e}op(){if(this.Li===null)return 0;let e=0;const t=this.ap(),n=j(this.Gv.canvasElement.getContext("2d"));n.save();const i=this.Li.Ha();n.font=this._p(),i.length>0&&(e=Math.max(this.Fv.xi(n,i[0].so),this.Fv.xi(n,i[i.length-1].so)));const r=this.up();for(let u=r.length;u--;){const c=this.Fv.xi(n,r[u].Kt());c>e&&(e=c)}const o=this.Li.Ct();if(o!==null&&this.Ev!==null&&(a=this.cn.crosshair).mode!==2&&a.horzLine.visible&&a.horzLine.labelVisible){const u=this.Li.pn(1,o),c=this.Li.pn(this.Ev.height-2,o);e=Math.max(e,this.Fv.xi(n,this.Li.Fi(Math.floor(Math.min(u,c))+.11111111111111,o)),this.Fv.xi(n,this.Li.Fi(Math.ceil(Math.max(u,c))-.11111111111111,o)))}var a;n.restore();const l=e||34;return Ru(Math.ceil(t.C+t.T+t.A+t.I+5+l))}cp(e){this.Ev!==null&&$s(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`)}dp(){return j(this.Ev).width}Gi(e){this.Li!==e&&(this.Li!==null&&this.Li.Ko().p(this),this.Li=e,e.Ko().l(this.fo.bind(this),this))}Dt(){return this.Li}nr(){const e=this.tn.fp();this.tn.$v().$t().E_(e,j(this.Dt()))}vp(e){if(this.Ev===null)return;if(e!==1){this.pp(),this.Gv.applySuggestedBitmapSize();const n=Us(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i)}),this.tn.bp(n,this.Xv),this.wp(n),this.tn.bp(n,this.Yv),this.gp(n))}this.Jv.applySuggestedBitmapSize();const t=Us(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Mp(t),this.tn.bp(t,this.Zv))}xp(){return this.Gv.bitmapSize}Sp(e,t,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,t,n)}bt(){var e;(e=this.Li)===null||e===void 0||e.Ha()}Qv(e){if(this.Li===null||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!0,t.V_(n,this.Li,e.localY)}tp(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),n=this.tn.fp(),i=this.Li;t.O_(n,i,e.localY)}ip(){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const e=this.tn.$v().$t(),t=this.tn.fp(),n=this.Li;this.Nv&&(this.Nv=!1,e.B_(t,n))}np(e){if(this.Li===null||!this.cn.handleScale.axisPressedMouseMove.price)return;const t=this.tn.$v().$t(),n=this.tn.fp();this.Nv=!1,t.B_(n,this.Li)}sp(e){this.cn.handleScale.axisDoubleClickReset.price&&this.nr()}ep(e){this.Li!==null&&(!this.tn.$v().$t().W().handleScale.axisPressedMouseMove.price||this.Li.Mh()||this.Li.Oo()||this.kp(1))}rp(e){this.kp(0)}up(){const e=[],t=this.Li===null?void 0:this.Li;return(n=>{for(let i=0;i<n.length;++i){const r=n[i].Rn(this.tn.fp(),t);for(let o=0;o<r.length;o++)e.push(r[o])}})(this.tn.fp().Uo()),e}mp({context:e,bitmapSize:t}){const{width:n,height:i}=t,r=this.tn.fp().$t(),o=r.q(),a=r.bd();o===a?pl(e,0,0,n,i,o):u0(e,0,0,n,i,o,a)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:n}){if(this.Ev===null||this.Li===null||!this.Li.W().borderVisible)return;e.fillStyle=this.Li.W().borderColor;const i=Math.max(1,Math.floor(this.ap().C*n));let r;r=this.qv?t.width-i:0,e.fillRect(r,0,i,t.height)}wp(e){if(this.Ev===null||this.Li===null)return;const t=this.Li.Ha(),n=this.Li.W(),i=this.ap(),r=this.qv?this.Ev.width-i.T:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:a,verticalPixelRatio:l})=>{o.fillStyle=n.borderColor;const u=Math.max(1,Math.floor(l)),c=Math.floor(.5*l),d=Math.round(i.T*a);o.beginPath();for(const f of t)o.rect(Math.floor(r*a),Math.round(f.Ea*l)-c,d,u);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{var a;o.font=this._p(),o.fillStyle=(a=n.textColor)!==null&&a!==void 0?a:this.ko.textColor,o.textAlign=this.qv?"right":"left",o.textBaseline="middle";const l=this.qv?Math.round(r-i.A):Math.round(r+i.T+i.A),u=t.map(c=>this.Fv.Mi(o,c.so));for(let c=t.length;c--;){const d=t[c];o.fillText(d.so,l,d.Ea+u[c])}})}pp(){if(this.Ev===null||this.Li===null)return;const e=[],t=this.Li.Uo().slice(),n=this.tn.fp(),i=this.ap();this.Li===n.pr()&&this.tn.fp().Uo().forEach(o=>{n.vr(o)&&t.push(o)});const r=this.Li;t.forEach(o=>{o.Rn(n,r).forEach(a=>{a.Oi(null),a.Bi()&&e.push(a)})}),e.forEach(o=>o.Oi(o.ki())),this.Li.W().alignLabels&&this.yp(e,i)}yp(e,t){if(this.Ev===null)return;const n=this.Ev.height/2,i=e.filter(o=>o.ki()<=n),r=e.filter(o=>o.ki()>n);i.sort((o,a)=>a.ki()-o.ki()),r.sort((o,a)=>o.ki()-a.ki());for(const o of e){const a=Math.floor(o.At(t)/2),l=o.ki();l>-a&&l<a&&o.Oi(a),l>this.Ev.height-a&&l<this.Ev.height+a&&o.Oi(this.Ev.height-a)}Sf(i,1,this.Ev.height,t),Sf(r,-1,this.Ev.height,t)}gp(e){if(this.Ev===null)return;const t=this.up(),n=this.ap(),i=this.qv?"right":"left";t.forEach(r=>{r.Ai()&&r.gt(j(this.Li)).X(e,n,this.Fv,i)})}Mp(e){if(this.Ev===null||this.Li===null)return;const t=this.tn.$v().$t(),n=[],i=this.tn.fp(),r=t.Zc().Rn(i,this.Li);r.length&&n.push(r);const o=this.ap(),a=this.qv?"right":"left";n.forEach(l=>{l.forEach(u=>{u.gt(j(this.Li)).X(e,o,this.Fv,a)})})}kp(e){this.Kv.style.cursor=e===1?"ns-resize":"default"}fo(){const e=this.op();this.Wv<e&&this.tn.$v().$t().Kl(),this.Wv=e}_p(){return On(this.ko.fontSize,this.ko.fontFamily)}}function Lk(s,e){var t,n;return(n=(t=s.ua)===null||t===void 0?void 0:t.call(s,e))!==null&&n!==void 0?n:[]}function Vr(s,e){var t,n;return(n=(t=s.Pn)===null||t===void 0?void 0:t.call(s,e))!==null&&n!==void 0?n:[]}function zk(s,e){var t,n;return(n=(t=s.Ji)===null||t===void 0?void 0:t.call(s,e))!==null&&n!==void 0?n:[]}function Ok(s,e){var t,n;return(n=(t=s.aa)===null||t===void 0?void 0:t.call(s,e))!==null&&n!==void 0?n:[]}class th{constructor(e,t){this.Ev=ee({width:0,height:0}),this.Cp=null,this.Tp=null,this.Pp=null,this.Rp=null,this.Dp=!1,this.Vp=new de,this.Op=new de,this.Bp=0,this.Ap=!1,this.Ip=null,this.zp=!1,this.Lp=null,this.Ep=null,this.jv=!1,this.Hv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Uv=()=>{this.jv||this.Np===null||this.$i().Uh()},this.Qd=e,this.Np=t,this.Np.W_().l(this.Fp.bind(this),this,!0),this.Wp=document.createElement("td"),this.Wp.style.padding="0",this.Wp.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.jp=document.createElement("td"),this.jp.style.padding="0",this.Hp=document.createElement("td"),this.Hp.style.padding="0",this.Wp.appendChild(n),this.Gv=Bs(n,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const i=this.Gv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Jv=Bs(n,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const r=this.Jv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.$p=document.createElement("tr"),this.$p.appendChild(this.jp),this.$p.appendChild(this.Wp),this.$p.appendChild(this.Hp),this.Up(),this.hp=new eh(this.Jv.canvasElement,this,{ev:()=>this.Ip===null&&!this.Qd.W().handleScroll.vertTouchDrag,rv:()=>this.Ip===null&&!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.Cp!==null&&this.Cp.S(),this.Tp!==null&&this.Tp.S(),this.Pp=null,this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ws(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ws(this.Gv.canvasElement),this.Gv.dispose(),this.Np!==null&&this.Np.W_().p(this),this.hp.S()}fp(){return j(this.Np)}qp(e){var t,n;this.Np!==null&&this.Np.W_().p(this),this.Np=e,this.Np!==null&&this.Np.W_().l(th.prototype.Fp.bind(this),this,!0),this.Up(),this.Qd.Yp().indexOf(this)===this.Qd.Yp().length-1?(this.Pp=(t=this.Pp)!==null&&t!==void 0?t:new Mk(this.Wp,this.Qd),this.Pp.bt()):((n=this.Pp)===null||n===void 0||n.if(),this.Pp=null)}$v(){return this.Qd}lp(){return this.$p}Up(){if(this.Np!==null&&(this.Zp(),this.$i().wt().length!==0)){if(this.Cp!==null){const e=this.Np.R_();this.Cp.Gi(j(e))}if(this.Tp!==null){const e=this.Np.D_();this.Tp.Gi(j(e))}}}Xp(){this.Cp!==null&&this.Cp.bt(),this.Tp!==null&&this.Tp.bt()}M_(){return this.Np!==null?this.Np.M_():0}x_(e){this.Np&&this.Np.x_(e)}Qf(e){if(!this.Np)return;this.Kp();const t=e.localX,n=e.localY;this.Gp(t,n,e)}bv(e){this.Kp(),this.Jp(),this.Gp(e.localX,e.localY,e)}tv(e){var t;if(!this.Np)return;this.Kp();const n=e.localX,i=e.localY;this.Gp(n,i,e);const r=this.wr(n,i);this.Qd.Qp((t=r==null?void 0:r.Lv)!==null&&t!==void 0?t:null),this.$i().jc(r&&{Hc:r.Hc,Iv:r.Iv})}dv(e){this.Np!==null&&(this.Kp(),this.tm(e))}qf(e){this.Np!==null&&this.im(this.Op,e)}jf(e){this.qf(e)}av(e){this.Kp(),this.nm(e),this.Gp(e.localX,e.localY,e)}cv(e){this.Np!==null&&(this.Kp(),this.Ap=!1,this.sm(e))}uv(e){this.Np!==null&&this.tm(e)}Rv(e){if(this.Ap=!0,this.Ip===null){const t={x:e.localX,y:e.localY};this.rm(t,t,e)}}Pv(e){this.Np!==null&&(this.Kp(),this.Np.$t().jc(null),this.hm())}lm(){return this.Vp}am(){return this.Op}xv(){this.Bp=1,this.$i().Un()}Sv(e,t){if(!this.Qd.W().handleScale.pinch)return;const n=5*(t-this.Bp);this.Bp=t,this.$i().Qc(e.nt,n)}pv(e){this.Ap=!1,this.zp=this.Ip!==null,this.Jp();const t=this.$i().Zc();this.Ip!==null&&t.yt()&&(this.Lp={x:t.Yt(),y:t.Zt()},this.Ip={x:e.localX,y:e.localY})}hv(e){if(this.Np===null)return;const t=e.localX,n=e.localY;if(this.Ip===null)this.nm(e);else{this.zp=!1;const i=j(this.Lp),r=i.x+(t-this.Ip.x),o=i.y+(n-this.Ip.y);this.Gp(r,o,e)}}_v(e){this.$v().W().trackingMode.exitMode===0&&(this.zp=!0),this.om(),this.sm(e)}wr(e,t){const n=this.Np;return n===null?null:function(i,r,o){const a=i.Uo(),l=function(u,c,d){var f,v;let p,m;for(const w of u){const y=(v=(f=w.va)===null||f===void 0?void 0:f.call(w,c,d))!==null&&v!==void 0?v:[];for(const b of y)x=b.zOrder,(!(g=p==null?void 0:p.zOrder)||x==="top"&&g!=="top"||x==="normal"&&g==="bottom")&&(p=b,m=w)}var x,g;return p&&m?{zv:p,Hc:m}:null}(a,r,o);if((l==null?void 0:l.zv.zOrder)==="top")return Wr(l);for(const u of a){if(l&&l.Hc===u&&l.zv.zOrder!=="bottom"&&!l.zv.isBackground)return Wr(l);const c=$k(u.Pn(i),r,o);if(c!==null)return{Hc:u,Bv:c.Bv,Iv:c.Iv};if(l&&l.Hc===u&&l.zv.zOrder!=="bottom"&&l.zv.isBackground)return Wr(l)}return l!=null&&l.zv?Wr(l):null}(n,e,t)}_m(e,t){j(t==="left"?this.Cp:this.Tp).cp(ee({width:e,height:this.Ev.height}))}um(){return this.Ev}cp(e){$s(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Wp.style.width=e.width+"px",this.Wp.style.height=e.height+"px")}dm(){const e=j(this.Np);e.P_(e.R_()),e.P_(e.D_());for(const t of e.Ba())if(e.vr(t)){const n=t.Dt();n!==null&&e.P_(n),t.Vn()}}xp(){return this.Gv.bitmapSize}Sp(e,t,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,t,n)}vp(e){if(e===0||this.Np===null)return;if(e>1&&this.dm(),this.Cp!==null&&this.Cp.vp(e),this.Tp!==null&&this.Tp.vp(e),e!==1){this.Gv.applySuggestedBitmapSize();const n=Us(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i)}),this.Np&&(this.fm(n,Lk),this.vm(n),this.pm(n),this.fm(n,Vr),this.fm(n,zk)))}this.Jv.applySuggestedBitmapSize();const t=Us(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.bm(t),this.fm(t,Ok))}wm(){return this.Cp}gm(){return this.Tp}bp(e,t){this.fm(e,t)}Fp(){this.Np!==null&&this.Np.W_().p(this),this.Np=null}tm(e){this.im(this.Vp,e)}im(e,t){const n=t.localX,i=t.localY;e.M()&&e.m(this.$i().St().Nu(n),{x:n,y:i},t)}mp({context:e,bitmapSize:t}){const{width:n,height:i}=t,r=this.$i(),o=r.q(),a=r.bd();o===a?pl(e,0,0,n,i,a):u0(e,0,0,n,i,o,a)}vm(e){const t=j(this.Np).j_().qh().gt();t!==null&&t.X(e,!1)}pm(e){const t=this.$i().Yc();this.Mm(e,Vr,$u,t),this.Mm(e,Vr,lo,t)}bm(e){this.Mm(e,Vr,lo,this.$i().Zc())}fm(e,t){const n=j(this.Np).Uo();for(const i of n)this.Mm(e,t,$u,i);for(const i of n)this.Mm(e,t,lo,i)}Mm(e,t,n,i){const r=j(this.Np),o=r.$t().Wc(),a=o!==null&&o.Hc===i,l=o!==null&&a&&o.Iv!==void 0?o.Iv.Mr:void 0;Lu(t,u=>n(u,e,a,l),i,r)}Zp(){if(this.Np===null)return;const e=this.Qd,t=this.Np.R_().W().visible,n=this.Np.D_().W().visible;t||this.Cp===null||(this.jp.removeChild(this.Cp.lp()),this.Cp.S(),this.Cp=null),n||this.Tp===null||(this.Hp.removeChild(this.Tp.lp()),this.Tp.S(),this.Tp=null);const i=e.$t().ud();t&&this.Cp===null&&(this.Cp=new kf(this,e.W(),i,"left"),this.jp.appendChild(this.Cp.lp())),n&&this.Tp===null&&(this.Tp=new kf(this,e.W(),i,"right"),this.Hp.appendChild(this.Tp.lp()))}xm(e){return e.Dv&&this.Ap||this.Ip!==null}Sm(e){return Math.max(0,Math.min(e,this.Ev.width-1))}km(e){return Math.max(0,Math.min(e,this.Ev.height-1))}Gp(e,t,n){this.$i().ld(this.Sm(e),this.km(t),n,j(this.Np))}hm(){this.$i().od()}om(){this.zp&&(this.Ip=null,this.hm())}rm(e,t,n){this.Ip=e,this.zp=!1,this.Gp(t.x,t.y,n);const i=this.$i().Zc();this.Lp={x:i.Yt(),y:i.Zt()}}$i(){return this.Qd.$t()}sm(e){if(!this.Dp)return;const t=this.$i(),n=this.fp();if(t.z_(n,n.vn()),this.Rp=null,this.Dp=!1,t.ed(),this.Ep!==null){const i=performance.now(),r=t.St();this.Ep.Vr(r.Hu(),i),this.Ep.Qu(i)||t.Zn(this.Ep)}}Kp(){this.Ip=null}Jp(){if(this.Np){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)j(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Np.vn().Ni()&&this.$i().St().Ni()}}nm(e){if(this.Np===null)return;const t=this.$i(),n=t.St();if(n.Ni())return;const i=this.Qd.W(),r=i.handleScroll,o=i.kineticScroll;if((!r.pressedMouseMove||e.Dv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!e.Dv))return;const a=this.Np.vn(),l=performance.now();if(this.Rp!==null||this.xm(e)||(this.Rp={x:e.clientX,y:e.clientY,Od:l,ym:e.localX,Cm:e.localY}),this.Rp!==null&&!this.Dp&&(this.Rp.x!==e.clientX||this.Rp.y!==e.clientY)){if(e.Dv&&o.touch||!e.Dv&&o.mouse){const u=n.le();this.Ep=new Pk(.2/u,7/u,.997,15/u),this.Ep.Yd(n.Hu(),this.Rp.Od)}else this.Ep=null;a.Ni()||t.A_(this.Np,a,e.localY),t.nd(e.localX),this.Dp=!0}this.Dp&&(a.Ni()||t.I_(this.Np,a,e.localY),t.sd(e.localX),this.Ep!==null&&this.Ep.Yd(n.Hu(),l))}}class Ef{constructor(e,t,n,i,r){this.ft=!0,this.Ev=ee({width:0,height:0}),this.Hv=()=>this.vp(3),this.qv=e==="left",this.Oc=n.ud,this.cn=t,this.Tm=i,this.Pm=r,this.Kv=document.createElement("div"),this.Kv.style.width="25px",this.Kv.style.height="100%",this.Kv.style.overflow="hidden",this.Gv=Bs(this.Kv,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv)}S(){this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ws(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Kv}um(){return this.Ev}cp(e){$s(this.Ev,e)||(this.Ev=e,this.Gv.resizeCanvasElement(e),this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.ft=!0)}vp(e){if(e<3&&!this.ft||this.Ev.width===0||this.Ev.height===0)return;this.ft=!1,this.Gv.applySuggestedBitmapSize();const t=Us(this.Gv);t!==null&&t.useBitmapCoordinateSpace(n=>{this.mp(n),this.Ie(n)})}xp(){return this.Gv.bitmapSize}Sp(e,t,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,t,n)}Ie({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.Tm())return;e.fillStyle=this.cn.timeScale.borderColor;const r=Math.floor(this.Oc.W().C*n),o=Math.floor(this.Oc.W().C*i),a=this.qv?t.width-r:0;e.fillRect(a,0,r,o)}mp({context:e,bitmapSize:t}){pl(e,0,0,t.width,t.height,this.Pm())}}function sh(s){return e=>{var t,n;return(n=(t=e.fa)===null||t===void 0?void 0:t.call(e,s))!==null&&n!==void 0?n:[]}}const Dk=sh("normal"),Ak=sh("top"),Ik=sh("bottom");class Uk{constructor(e,t){this.Rm=null,this.Dm=null,this.k=null,this.Vm=!1,this.Ev=ee({width:0,height:0}),this.Om=new de,this.Fv=new Gi(5),this.jv=!1,this.Hv=()=>{this.jv||this.Qd.$t().Uh()},this.Uv=()=>{this.jv||this.Qd.$t().Uh()},this.Qd=e,this.q_=t,this.cn=e.W().layout,this.Xd=document.createElement("tr"),this.Bm=document.createElement("td"),this.Bm.style.padding="0",this.Am=document.createElement("td"),this.Am.style.padding="0",this.Kv=document.createElement("td"),this.Kv.style.height="25px",this.Kv.style.padding="0",this.Im=document.createElement("div"),this.Im.style.width="100%",this.Im.style.height="100%",this.Im.style.position="relative",this.Im.style.overflow="hidden",this.Kv.appendChild(this.Im),this.Gv=Bs(this.Im,ee({width:16,height:16})),this.Gv.subscribeSuggestedBitmapSizeChanged(this.Hv);const n=this.Gv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Jv=Bs(this.Im,ee({width:16,height:16})),this.Jv.subscribeSuggestedBitmapSizeChanged(this.Uv);const i=this.Jv.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.Xd.appendChild(this.Bm),this.Xd.appendChild(this.Kv),this.Xd.appendChild(this.Am),this.zm(),this.Qd.$t().g_().l(this.zm.bind(this),this),this.hp=new eh(this.Jv.canvasElement,this,{ev:()=>!0,rv:()=>!this.Qd.W().handleScroll.horzTouchDrag})}S(){this.hp.S(),this.Rm!==null&&this.Rm.S(),this.Dm!==null&&this.Dm.S(),this.Jv.unsubscribeSuggestedBitmapSizeChanged(this.Uv),Ws(this.Jv.canvasElement),this.Jv.dispose(),this.Gv.unsubscribeSuggestedBitmapSizeChanged(this.Hv),Ws(this.Gv.canvasElement),this.Gv.dispose()}lp(){return this.Xd}Lm(){return this.Rm}Em(){return this.Dm}bv(e){if(this.Vm)return;this.Vm=!0;const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.Jc(e.localX)}pv(e){this.bv(e)}wv(){const e=this.Qd.$t();!e.St().Ni()&&this.Vm&&(this.Vm=!1,this.Qd.W().handleScale.axisPressedMouseMove.time&&e.hd())}av(e){const t=this.Qd.$t();!t.St().Ni()&&this.Qd.W().handleScale.axisPressedMouseMove.time&&t.rd(e.localX)}hv(e){this.av(e)}cv(){this.Vm=!1;const e=this.Qd.$t();e.St().Ni()&&!this.Qd.W().handleScale.axisPressedMouseMove.time||e.hd()}_v(){this.cv()}qf(){this.Qd.W().handleScale.axisDoubleClickReset.time&&this.Qd.$t().Kn()}jf(){this.qf()}Qf(){this.Qd.$t().W().handleScale.axisPressedMouseMove.time&&this.kp(1)}Pv(){this.kp(0)}um(){return this.Ev}Nm(){return this.Om}Fm(e,t,n){$s(this.Ev,e)||(this.Ev=e,this.jv=!0,this.Gv.resizeCanvasElement(e),this.Jv.resizeCanvasElement(e),this.jv=!1,this.Kv.style.width=`${e.width}px`,this.Kv.style.height=`${e.height}px`,this.Om.m(e)),this.Rm!==null&&this.Rm.cp(ee({width:t,height:e.height})),this.Dm!==null&&this.Dm.cp(ee({width:n,height:e.height}))}Wm(){const e=this.jm();return Math.ceil(e.C+e.T+e.P+e.L+e.B+e.Hm)}bt(){this.Qd.$t().St().Ha()}xp(){return this.Gv.bitmapSize}Sp(e,t,n){const i=this.xp();i.width>0&&i.height>0&&e.drawImage(this.Gv.canvasElement,t,n)}vp(e){if(e===0)return;if(e!==1){this.Gv.applySuggestedBitmapSize();const n=Us(this.Gv);n!==null&&(n.useBitmapCoordinateSpace(i=>{this.mp(i),this.Ie(i),this.$m(n,Ik)}),this.wp(n),this.$m(n,Dk)),this.Rm!==null&&this.Rm.vp(e),this.Dm!==null&&this.Dm.vp(e)}this.Jv.applySuggestedBitmapSize();const t=Us(this.Jv);t!==null&&(t.useBitmapCoordinateSpace(({context:n,bitmapSize:i})=>{n.clearRect(0,0,i.width,i.height)}),this.Um([...this.Qd.$t().wt(),this.Qd.$t().Zc()],t),this.$m(t,Ak))}$m(e,t){const n=this.Qd.$t().wt();for(const i of n)Lu(t,r=>$u(r,e,!1,void 0),i,void 0);for(const i of n)Lu(t,r=>lo(r,e,!1,void 0),i,void 0)}mp({context:e,bitmapSize:t}){pl(e,0,0,t.width,t.height,this.Qd.$t().bd())}Ie({context:e,bitmapSize:t,verticalPixelRatio:n}){if(this.Qd.W().timeScale.borderVisible){e.fillStyle=this.qm();const i=Math.max(1,Math.floor(this.jm().C*n));e.fillRect(0,0,t.width,i)}}wp(e){const t=this.Qd.$t().St(),n=t.Ha();if(!n||n.length===0)return;const i=this.q_.maxTickMarkWeight(n),r=this.jm(),o=t.W();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:a,horizontalPixelRatio:l,verticalPixelRatio:u})=>{a.strokeStyle=this.qm(),a.fillStyle=this.qm();const c=Math.max(1,Math.floor(l)),d=Math.floor(.5*l);a.beginPath();const f=Math.round(r.T*u);for(let v=n.length;v--;){const p=Math.round(n[v].coord*l);a.rect(p-d,0,c,f)}a.fill()}),e.useMediaCoordinateSpace(({context:a})=>{const l=r.C+r.T+r.L+r.P/2;a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.$(),a.font=this._p();for(const u of n)if(u.weight<i){const c=u.needAlignCoordinate?this.Ym(a,u.coord,u.label):u.coord;a.fillText(u.label,c,l)}this.Qd.W().timeScale.allowBoldLabels&&(a.font=this.Zm());for(const u of n)if(u.weight>=i){const c=u.needAlignCoordinate?this.Ym(a,u.coord,u.label):u.coord;a.fillText(u.label,c,l)}})}Ym(e,t,n){const i=this.Fv.xi(e,n),r=i/2,o=Math.floor(t-r)+.5;return o<0?t+=Math.abs(0-o):o+i>this.Ev.width&&(t-=Math.abs(this.Ev.width-(o+i))),t}Um(e,t){const n=this.jm();for(const i of e)for(const r of i.Qi())r.gt().X(t,n)}qm(){return this.Qd.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}_p(){return On(this.j(),this.cn.fontFamily)}Zm(){return On(this.j(),this.cn.fontFamily,"bold")}jm(){this.k===null&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new Gi,Hm:0});const e=this.k,t=this._p();if(e.R!==t){const n=this.j();e.P=n,e.R=t,e.L=3*n/12,e.B=3*n/12,e.ji=9*n/12,e.N=0,e.Hm=4*n/12,e.Wi.nr()}return this.k}kp(e){this.Kv.style.cursor=e===1?"ew-resize":"default"}zm(){const e=this.Qd.$t(),t=e.W();t.leftPriceScale.visible||this.Rm===null||(this.Bm.removeChild(this.Rm.lp()),this.Rm.S(),this.Rm=null),t.rightPriceScale.visible||this.Dm===null||(this.Am.removeChild(this.Dm.lp()),this.Dm.S(),this.Dm=null);const n={ud:this.Qd.$t().ud()},i=()=>t.leftPriceScale.borderVisible&&e.St().W().borderVisible,r=()=>e.bd();t.leftPriceScale.visible&&this.Rm===null&&(this.Rm=new Ef("left",t,n,i,r),this.Bm.appendChild(this.Rm.lp())),t.rightPriceScale.visible&&this.Dm===null&&(this.Dm=new Ef("right",t,n,i,r),this.Am.appendChild(this.Dm.lp()))}}const Fk=!!Dn&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(s=>s.brand.includes("Chromium"))&&!!Dn&&(!((va=navigator==null?void 0:navigator.userAgentData)===null||va===void 0)&&va.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);var va;class Bk{constructor(e,t,n){var i;this.Xm=[],this.Km=0,this.ho=0,this.__=0,this.Gm=0,this.Jm=0,this.Qm=null,this.tb=!1,this.Vp=new de,this.Op=new de,this.Rc=new de,this.ib=null,this.nb=null,this.Jd=e,this.cn=t,this.q_=n,this.Xd=document.createElement("div"),this.Xd.classList.add("tv-lightweight-charts"),this.Xd.style.overflow="hidden",this.Xd.style.direction="ltr",this.Xd.style.width="100%",this.Xd.style.height="100%",(i=this.Xd).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.sb=document.createElement("table"),this.sb.setAttribute("cellspacing","0"),this.Xd.appendChild(this.sb),this.eb=this.rb.bind(this),ya(this.cn)&&this.hb(!0),this.$i=new Ek(this.Vc.bind(this),this.cn,n),this.$t().Xc().l(this.lb.bind(this),this),this.ab=new Uk(this,this.q_),this.sb.appendChild(this.ab.lp());const r=t.autoSize&&this.ob();let o=this.cn.width,a=this.cn.height;if(r||o===0||a===0){const l=e.getBoundingClientRect();o=o||l.width,a=a||l.height}this._b(o,a),this.ub(),e.appendChild(this.Xd),this.cb(),this.$i.St().ec().l(this.$i.Kl.bind(this.$i),this),this.$i.g_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}Yp(){return this.Xm}fb(){return this.ab}S(){this.hb(!1),this.Km!==0&&window.cancelAnimationFrame(this.Km),this.$i.Xc().p(this),this.$i.St().ec().p(this),this.$i.g_().p(this),this.$i.S();for(const e of this.Xm)this.sb.removeChild(e.lp()),e.lm().p(this),e.am().p(this),e.S();this.Xm=[],j(this.ab).S(),this.Xd.parentElement!==null&&this.Xd.parentElement.removeChild(this.Xd),this.Rc.S(),this.Vp.S(),this.Op.S(),this.pb()}_b(e,t,n=!1){if(this.ho===t&&this.__===e)return;const i=function(a){const l=Math.floor(a.width),u=Math.floor(a.height);return ee({width:l-l%2,height:u-u%2})}(ee({width:e,height:t}));this.ho=i.height,this.__=i.width;const r=this.ho+"px",o=this.__+"px";j(this.Xd).style.height=r,j(this.Xd).style.width=o,this.sb.style.height=r,this.sb.style.width=o,n?this.mb(Se.es(),performance.now()):this.$i.Kl()}vp(e){e===void 0&&(e=Se.es());for(let t=0;t<this.Xm.length;t++)this.Xm[t].vp(e.Hn(t).Fn);this.cn.timeScale.visible&&this.ab.vp(e.jn())}$h(e){const t=ya(this.cn);this.$i.$h(e);const n=ya(this.cn);n!==t&&this.hb(n),this.cb(),this.bb(e)}lm(){return this.Vp}am(){return this.Op}Xc(){return this.Rc}wb(){this.Qm!==null&&(this.mb(this.Qm,performance.now()),this.Qm=null);const e=this.gb(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=j(t.getContext("2d"));return this.gb(n),t}Mb(e){return e==="left"&&!this.xb()||e==="right"&&!this.Sb()||this.Xm.length===0?0:j(e==="left"?this.Xm[0].wm():this.Xm[0].gm()).dp()}kb(){return this.cn.autoSize&&this.ib!==null}yb(){return this.Xd}Qp(e){this.nb=e,this.nb?this.yb().style.setProperty("cursor",e):this.yb().style.removeProperty("cursor")}Cb(){return this.nb}Tb(){return $e(this.Xm[0]).um()}bb(e){(e.autoSize!==void 0||!this.ib||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.ib&&this.ob(),e.autoSize===!1&&this.ib!==null&&this.pb(),e.autoSize||e.width===void 0&&e.height===void 0||this._b(e.width||this.__,e.height||this.ho))}gb(e){let t=0,n=0;const i=this.Xm[0],r=(a,l)=>{let u=0;for(let c=0;c<this.Xm.length;c++){const d=this.Xm[c],f=j(a==="left"?d.wm():d.gm()),v=f.xp();e!==null&&f.Sp(e,l,u),u+=v.height}};this.xb()&&(r("left",0),t+=j(i.wm()).xp().width);for(let a=0;a<this.Xm.length;a++){const l=this.Xm[a],u=l.xp();e!==null&&l.Sp(e,t,n),n+=u.height}t+=i.xp().width,this.Sb()&&(r("right",t),t+=j(i.gm()).xp().width);const o=(a,l,u)=>{j(a==="left"?this.ab.Lm():this.ab.Em()).Sp(j(e),l,u)};if(this.cn.timeScale.visible){const a=this.ab.xp();if(e!==null){let l=0;this.xb()&&(o("left",l,n),l=j(i.wm()).xp().width),this.ab.Sp(e,l,n),l+=a.width,this.Sb()&&o("right",l,n)}n+=a.height}return ee({width:t,height:n})}Pb(){let e=0,t=0,n=0;for(const p of this.Xm)this.xb()&&(t=Math.max(t,j(p.wm()).op(),this.cn.leftPriceScale.minimumWidth)),this.Sb()&&(n=Math.max(n,j(p.gm()).op(),this.cn.rightPriceScale.minimumWidth)),e+=p.M_();t=Ru(t),n=Ru(n);const i=this.__,r=this.ho,o=Math.max(i-t-n,0),a=this.cn.timeScale.visible;let l=a?Math.max(this.ab.Wm(),this.cn.timeScale.minimumHeight):0;var u;l=(u=l)+u%2;const c=0+l,d=r<c?0:r-c,f=d/e;let v=0;for(let p=0;p<this.Xm.length;++p){const m=this.Xm[p];m.qp(this.$i.qc()[p]);let x=0,g=0;g=p===this.Xm.length-1?d-v:Math.round(m.M_()*f),x=Math.max(g,2),v+=x,m.cp(ee({width:o,height:x})),this.xb()&&m._m(t,"left"),this.Sb()&&m._m(n,"right"),m.fp()&&this.$i.Kc(m.fp(),x)}this.ab.Fm(ee({width:a?o:0,height:l}),a?t:0,a?n:0),this.$i.S_(o),this.Gm!==t&&(this.Gm=t),this.Jm!==n&&(this.Jm=n)}hb(e){e?this.Xd.addEventListener("wheel",this.eb,{passive:!1}):this.Xd.removeEventListener("wheel",this.eb)}Rb(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return Fk?1/window.devicePixelRatio:1}rb(e){if(!(e.deltaX!==0&&this.cn.handleScroll.mouseWheel||e.deltaY!==0&&this.cn.handleScale.mouseWheel))return;const t=this.Rb(e),n=t*e.deltaX/100,i=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.cn.handleScale.mouseWheel){const r=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.Xd.getBoundingClientRect().left;this.$t().Qc(o,r)}n!==0&&this.cn.handleScroll.mouseWheel&&this.$t().td(-80*n)}mb(e,t){var n;const i=e.jn();i===3&&this.Db(),i!==3&&i!==2||(this.Vb(e),this.Ob(e,t),this.ab.bt(),this.Xm.forEach(r=>{r.Xp()}),((n=this.Qm)===null||n===void 0?void 0:n.jn())===3&&(this.Qm.ts(e),this.Db(),this.Vb(this.Qm),this.Ob(this.Qm,t),e=this.Qm,this.Qm=null)),this.vp(e)}Ob(e,t){for(const n of e.Qn())this.ns(n,t)}Vb(e){const t=this.$i.qc();for(let n=0;n<t.length;n++)e.Hn(n).Wn&&t[n].N_()}ns(e,t){const n=this.$i.St();switch(e.qn){case 0:n.hc();break;case 1:n.lc(e.Vt);break;case 2:n.Gn(e.Vt);break;case 3:n.Jn(e.Vt);break;case 4:n.qu();break;case 5:e.Vt.Qu(t)||n.Jn(e.Vt.tc(t))}}Vc(e){this.Qm!==null?this.Qm.ts(e):this.Qm=e,this.tb||(this.tb=!0,this.Km=window.requestAnimationFrame(t=>{if(this.tb=!1,this.Km=0,this.Qm!==null){const n=this.Qm;this.Qm=null,this.mb(n,t);for(const i of n.Qn())if(i.qn===5&&!i.Vt.Qu(t)){this.$t().Zn(i.Vt);break}}}))}Db(){this.ub()}ub(){const e=this.$i.qc(),t=e.length,n=this.Xm.length;for(let i=t;i<n;i++){const r=$e(this.Xm.pop());this.sb.removeChild(r.lp()),r.lm().p(this),r.am().p(this),r.S()}for(let i=n;i<t;i++){const r=new th(this,e[i]);r.lm().l(this.Bb.bind(this),this),r.am().l(this.Ab.bind(this),this),this.Xm.push(r),this.sb.insertBefore(r.lp(),this.ab.lp())}for(let i=0;i<t;i++){const r=e[i],o=this.Xm[i];o.fp()!==r?o.qp(r):o.Up()}this.cb(),this.Pb()}Ib(e,t,n){var i;const r=new Map;e!==null&&this.$i.wt().forEach(c=>{const d=c.In().ll(e);d!==null&&r.set(c,d)});let o;if(e!==null){const c=(i=this.$i.St().Ui(e))===null||i===void 0?void 0:i.originalTime;c!==void 0&&(o=c)}const a=this.$t().Wc(),l=a!==null&&a.Hc instanceof Yc?a.Hc:void 0,u=a!==null&&a.Iv!==void 0?a.Iv.gr:void 0;return{zb:o,ee:e??void 0,Lb:t??void 0,Eb:l,Nb:r,Fb:u,Wb:n??void 0}}Bb(e,t,n){this.Vp.m(()=>this.Ib(e,t,n))}Ab(e,t,n){this.Op.m(()=>this.Ib(e,t,n))}lb(e,t,n){this.Rc.m(()=>this.Ib(e,t,n))}cb(){const e=this.cn.timeScale.visible?"":"none";this.ab.lp().style.display=e}xb(){return this.Xm[0].fp().R_().W().visible}Sb(){return this.Xm[0].fp().D_().W().visible}ob(){return"ResizeObserver"in window&&(this.ib=new ResizeObserver(e=>{const t=e.find(n=>n.target===this.Jd);t&&this._b(t.contentRect.width,t.contentRect.height)}),this.ib.observe(this.Jd,{box:"border-box"}),!0)}pb(){this.ib!==null&&this.ib.disconnect(),this.ib=null}}function ya(s){return!!(s.handleScroll.mouseWheel||s.handleScale.mouseWheel)}function Wk(s){return function(e){return e.open!==void 0}(s)||function(e){return e.value!==void 0}(s)}function N0(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(n=Object.getOwnPropertySymbols(s);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(s,n[i])&&(t[n[i]]=s[n[i]])}return t}function Cf(s,e,t,n){const i=t.value,r={ee:e,ot:s,Vt:[i,i,i,i],zb:n};return t.color!==void 0&&(r.V=t.color),r}function Vk(s,e,t,n){const i=t.value,r={ee:e,ot:s,Vt:[i,i,i,i],zb:n};return t.lineColor!==void 0&&(r.lt=t.lineColor),t.topColor!==void 0&&(r.Ps=t.topColor),t.bottomColor!==void 0&&(r.Rs=t.bottomColor),r}function Hk(s,e,t,n){const i=t.value,r={ee:e,ot:s,Vt:[i,i,i,i],zb:n};return t.topLineColor!==void 0&&(r.Re=t.topLineColor),t.bottomLineColor!==void 0&&(r.De=t.bottomLineColor),t.topFillColor1!==void 0&&(r.ke=t.topFillColor1),t.topFillColor2!==void 0&&(r.ye=t.topFillColor2),t.bottomFillColor1!==void 0&&(r.Ce=t.bottomFillColor1),t.bottomFillColor2!==void 0&&(r.Te=t.bottomFillColor2),r}function Kk(s,e,t,n){const i={ee:e,ot:s,Vt:[t.open,t.high,t.low,t.close],zb:n};return t.color!==void 0&&(i.V=t.color),i}function qk(s,e,t,n){const i={ee:e,ot:s,Vt:[t.open,t.high,t.low,t.close],zb:n};return t.color!==void 0&&(i.V=t.color),t.borderColor!==void 0&&(i.Ot=t.borderColor),t.wickColor!==void 0&&(i.Xh=t.wickColor),i}function Xk(s,e,t,n,i){const r=$e(i)(t),o=Math.max(...r),a=Math.min(...r),l=r[r.length-1],u=[l,o,a,l],c=t,{time:d,color:f}=c;return{ee:e,ot:s,Vt:u,zb:n,$e:N0(c,["time","color"]),V:f}}function Hr(s){return s.Vt!==void 0}function jf(s,e){return e.customValues!==void 0&&(s.jb=e.customValues),s}function Ss(s){return(e,t,n,i,r,o)=>function(a,l){return l?l(a):(u=a).open===void 0&&u.value===void 0;var u}(n,o)?jf({ot:e,ee:t,zb:i},n):jf(s(e,t,n,i,r),n)}function Nf(s){return{Candlestick:Ss(qk),Bar:Ss(Kk),Area:Ss(Vk),Baseline:Ss(Hk),Histogram:Ss(Cf),Line:Ss(Cf),Custom:Ss(Xk)}[s]}function Tf(s){return{ee:0,Hb:new Map,la:s}}function Pf(s,e){if(s!==void 0&&s.length!==0)return{$b:e.key(s[0].ot),Ub:e.key(s[s.length-1].ot)}}function Mf(s){let e;return s.forEach(t=>{e===void 0&&(e=t.zb)}),$e(e)}class Gk{constructor(e){this.qb=new Map,this.Yb=new Map,this.Zb=new Map,this.Xb=[],this.q_=e}S(){this.qb.clear(),this.Yb.clear(),this.Zb.clear(),this.Xb=[]}Kb(e,t){let n=this.qb.size!==0,i=!1;const r=this.Yb.get(e);if(r!==void 0)if(this.Yb.size===1)n=!1,i=!0,this.qb.clear();else for(const l of this.Xb)l.pointData.Hb.delete(e)&&(i=!0);let o=[];if(t.length!==0){const l=t.map(v=>v.time),u=this.q_.createConverterToInternalObj(t),c=Nf(e.Qh()),d=e.Ca(),f=e.Ta();o=t.map((v,p)=>{const m=u(v.time),x=this.q_.key(m);let g=this.qb.get(x);g===void 0&&(g=Tf(m),this.qb.set(x,g),i=!0);const w=c(m,g.ee,v,l[p],d,f);return g.Hb.set(e,w),w})}n&&this.Gb(),this.Jb(e,o);let a=-1;if(i){const l=[];this.qb.forEach(u=>{l.push({timeWeight:0,time:u.la,pointData:u,originalTime:Mf(u.Hb)})}),l.sort((u,c)=>this.q_.key(u.time)-this.q_.key(c.time)),a=this.Qb(l)}return this.tw(e,a,function(l,u,c){const d=Pf(l,c),f=Pf(u,c);if(d!==void 0&&f!==void 0)return{ta:d.Ub>=f.Ub&&d.$b>=f.$b}}(this.Yb.get(e),r,this.q_))}vd(e){return this.Kb(e,[])}iw(e,t){const n=t;(function(m){m.zb===void 0&&(m.zb=m.time)})(n),this.q_.preprocessData(t);const i=this.q_.createConverterToInternalObj([t])(t.time),r=this.Zb.get(e);if(r!==void 0&&this.q_.key(i)<this.q_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${i}`);let o=this.qb.get(this.q_.key(i));const a=o===void 0;o===void 0&&(o=Tf(i),this.qb.set(this.q_.key(i),o));const l=Nf(e.Qh()),u=e.Ca(),c=e.Ta(),d=l(i,o.ee,t,n.zb,u,c);o.Hb.set(e,d),this.nw(e,d);const f={ta:Hr(d)};if(!a)return this.tw(e,-1,f);const v={timeWeight:0,time:o.la,pointData:o,originalTime:Mf(o.Hb)},p=hr(this.Xb,this.q_.key(v.time),(m,x)=>this.q_.key(m.time)<x);this.Xb.splice(p,0,v);for(let m=p;m<this.Xb.length;++m)wa(this.Xb[m].pointData,m);return this.q_.fillWeightsForPoints(this.Xb,p),this.tw(e,p,f)}nw(e,t){let n=this.Yb.get(e);n===void 0&&(n=[],this.Yb.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.q_.key(t.ot)>this.q_.key(i.ot)?Hr(t)&&n.push(t):Hr(t)?n[n.length-1]=t:n.splice(-1,1),this.Zb.set(e,t.ot)}Jb(e,t){t.length!==0?(this.Yb.set(e,t.filter(Hr)),this.Zb.set(e,t[t.length-1].ot)):(this.Yb.delete(e),this.Zb.delete(e))}Gb(){for(const e of this.Xb)e.pointData.Hb.size===0&&this.qb.delete(this.q_.key(e.time))}Qb(e){let t=-1;for(let n=0;n<this.Xb.length&&n<e.length;++n){const i=this.Xb[n],r=e[n];if(this.q_.key(i.time)!==this.q_.key(r.time)){t=n;break}r.timeWeight=i.timeWeight,wa(r.pointData,n)}if(t===-1&&this.Xb.length!==e.length&&(t=Math.min(this.Xb.length,e.length)),t===-1)return-1;for(let n=t;n<e.length;++n)wa(e[n].pointData,n);return this.q_.fillWeightsForPoints(e,t),this.Xb=e,t}sw(){if(this.Yb.size===0)return null;let e=0;return this.Yb.forEach(t=>{t.length!==0&&(e=Math.max(e,t[t.length-1].ee))}),e}tw(e,t,n){const i={ew:new Map,St:{Eu:this.sw()}};if(t!==-1)this.Yb.forEach((r,o)=>{i.ew.set(o,{$e:r,rw:o===e?n:void 0})}),this.Yb.has(e)||i.ew.set(e,{$e:[],rw:n}),i.St.hw=this.Xb,i.St.lw=t;else{const r=this.Yb.get(e);i.ew.set(e,{$e:r||[],rw:n})}return i}}function wa(s,e){s.ee=e,s.Hb.forEach(t=>{t.ee=e})}function nh(s){const e={value:s.Vt[3],time:s.zb};return s.jb!==void 0&&(e.customValues=s.jb),e}function Rf(s){const e=nh(s);return s.V!==void 0&&(e.color=s.V),e}function Qk(s){const e=nh(s);return s.lt!==void 0&&(e.lineColor=s.lt),s.Ps!==void 0&&(e.topColor=s.Ps),s.Rs!==void 0&&(e.bottomColor=s.Rs),e}function Jk(s){const e=nh(s);return s.Re!==void 0&&(e.topLineColor=s.Re),s.De!==void 0&&(e.bottomLineColor=s.De),s.ke!==void 0&&(e.topFillColor1=s.ke),s.ye!==void 0&&(e.topFillColor2=s.ye),s.Ce!==void 0&&(e.bottomFillColor1=s.Ce),s.Te!==void 0&&(e.bottomFillColor2=s.Te),e}function T0(s){const e={open:s.Vt[0],high:s.Vt[1],low:s.Vt[2],close:s.Vt[3],time:s.zb};return s.jb!==void 0&&(e.customValues=s.jb),e}function Yk(s){const e=T0(s);return s.V!==void 0&&(e.color=s.V),e}function Zk(s){const e=T0(s),{V:t,Ot:n,Xh:i}=s;return t!==void 0&&(e.color=t),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function zu(s){return{Area:Qk,Line:Rf,Baseline:Jk,Histogram:Rf,Bar:Yk,Candlestick:Zk,Custom:e2}[s]}function e2(s){const e=s.zb;return Object.assign(Object.assign({},s.$e),{time:e})}const t2={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},s2={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},n2={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Kc,attributionLogo:!0},xa={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},i2={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},r2={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Kc,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function $f(){return{width:0,height:0,autoSize:!1,layout:n2,crosshair:t2,grid:s2,overlayPriceScales:Object.assign({},xa),leftPriceScale:Object.assign(Object.assign({},xa),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},xa),{visible:!0}),timeScale:i2,watermark:r2,localization:{locale:Dn?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class o2{constructor(e,t){this.aw=e,this.ow=t}applyOptions(e){this.aw.$t().$c(this.ow,e)}options(){return this.Li().W()}width(){return gl(this.ow)?this.aw.Mb(this.ow):0}Li(){return j(this.aw.$t().Uc(this.ow)).Dt}}function Lf(s,e,t){const n=N0(s,["time","originalTime"]),i=Object.assign({time:e},n);return t!==void 0&&(i.originalTime=t),i}const l2={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class a2{constructor(e){this.Nh=e}applyOptions(e){this.Nh.$h(e)}options(){return this.Nh.W()}_w(){return this.Nh}}class u2{constructor(e,t,n,i,r){this.uw=new de,this.Es=e,this.cw=t,this.dw=n,this.q_=r,this.fw=i}S(){this.uw.S()}priceFormatter(){return this.Es.ba()}priceToCoordinate(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().Rt(e,t.Vt)}coordinateToPrice(e){const t=this.Es.Ct();return t===null?null:this.Es.Dt().pn(e,t.Vt)}barsInLogicalRange(e){if(e===null)return null;const t=new Cn(new Ei(e.from,e.to)).lu(),n=this.Es.In();if(n.Ni())return null;const i=n.ll(t.Os(),1),r=n.ll(t.ui(),-1),o=j(n.el()),a=j(n.An());if(i!==null&&r!==null&&i.ee>r.ee)return{barsBefore:e.from-o,barsAfter:a-e.to};const l={barsBefore:i===null||i.ee===o?e.from-o:i.ee-o,barsAfter:r===null||r.ee===a?a-e.to:a-r.ee};return i!==null&&r!==null&&(l.from=i.zb,l.to=r.zb),l}setData(e){this.q_,this.Es.Qh(),this.cw.pw(this.Es,e),this.mw("full")}update(e){this.Es.Qh(),this.cw.bw(this.Es,e),this.mw("update")}dataByIndex(e,t){const n=this.Es.In().ll(e,t);return n===null?null:zu(this.seriesType())(n)}data(){const e=zu(this.seriesType());return this.Es.In().ne().map(t=>e(t))}subscribeDataChanged(e){this.uw.l(e)}unsubscribeDataChanged(e){this.uw.v(e)}setMarkers(e){this.q_;const t=e.map(n=>Lf(n,this.q_.convertHorzItemToInternal(n.time),n.time));this.Es.na(t)}markers(){return this.Es.sa().map(e=>Lf(e,e.originalTime,void 0))}applyOptions(e){this.Es.$h(e)}options(){return Dt(this.Es.W())}priceScale(){return this.dw.priceScale(this.Es.Dt().Pa())}createPriceLine(e){const t=gt(Dt(l2),e),n=this.Es.ea(t);return new a2(n)}removePriceLine(e){this.Es.ra(e._w())}seriesType(){return this.Es.Qh()}attachPrimitive(e){this.Es.ka(e),e.attached&&e.attached({chart:this.fw,series:this,requestUpdate:()=>this.Es.$t().Kl()})}detachPrimitive(e){this.Es.ya(e),e.detached&&e.detached()}mw(e){this.uw.M()&&this.uw.m(e)}}class c2{constructor(e,t,n){this.ww=new de,this.mu=new de,this.Om=new de,this.$i=e,this.yl=e.St(),this.ab=t,this.yl.nc().l(this.gw.bind(this)),this.yl.sc().l(this.Mw.bind(this)),this.ab.Nm().l(this.xw.bind(this)),this.q_=n}S(){this.yl.nc().p(this),this.yl.sc().p(this),this.ab.Nm().p(this),this.ww.S(),this.mu.S(),this.Om.S()}scrollPosition(){return this.yl.Hu()}scrollToPosition(e,t){t?this.yl.Ju(e,1e3):this.$i.Jn(e)}scrollToRealTime(){this.yl.Gu()}getVisibleRange(){const e=this.yl.Vu();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.q_.convertHorzItemToInternal(e.from),to:this.q_.convertHorzItemToInternal(e.to)},n=this.yl.Iu(t);this.$i.pd(n)}getVisibleLogicalRange(){const e=this.yl.Du();return e===null?null:{from:e.Os(),to:e.ui()}}setVisibleLogicalRange(e){gs(e.from<=e.to,"The from index cannot be after the to index."),this.$i.pd(e)}resetTimeScale(){this.$i.Kn()}fitContent(){this.$i.hc()}logicalToCoordinate(e){const t=this.$i.St();return t.Ni()?null:t.It(e)}coordinateToLogical(e){return this.yl.Ni()?null:this.yl.Nu(e)}timeToCoordinate(e){const t=this.q_.convertHorzItemToInternal(e),n=this.yl.Va(t,!1);return n===null?null:this.yl.It(n)}coordinateToTime(e){const t=this.$i.St(),n=t.Nu(e),i=t.Ui(n);return i===null?null:i.originalTime}width(){return this.ab.um().width}height(){return this.ab.um().height}subscribeVisibleTimeRangeChange(e){this.ww.l(e)}unsubscribeVisibleTimeRangeChange(e){this.ww.v(e)}subscribeVisibleLogicalRangeChange(e){this.mu.l(e)}unsubscribeVisibleLogicalRangeChange(e){this.mu.v(e)}subscribeSizeChange(e){this.Om.l(e)}unsubscribeSizeChange(e){this.Om.v(e)}applyOptions(e){this.yl.$h(e)}options(){return Object.assign(Object.assign({},Dt(this.yl.W())),{barSpacing:this.yl.le()})}gw(){this.ww.M()&&this.ww.m(this.getVisibleRange())}Mw(){this.mu.M()&&this.mu.m(this.getVisibleLogicalRange())}xw(e){this.Om.m(e.width,e.height)}}function h2(s){if(s===void 0||s.type==="custom")return;const e=s;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(t){if(t>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return n;t*=10}return n}(e.minMove))}function zf(s){return function(e){if(Or(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;Or(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),Or(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const t=e.handleScroll;Or(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(s),s}class d2{constructor(e,t,n){this.Sw=new Map,this.kw=new Map,this.yw=new de,this.Cw=new de,this.Tw=new de,this.Pw=new Gk(t);const i=n===void 0?Dt($f()):gt(Dt($f()),zf(n));this.q_=t,this.aw=new Bk(e,i,t),this.aw.lm().l(o=>{this.yw.M()&&this.yw.m(this.Rw(o()))},this),this.aw.am().l(o=>{this.Cw.M()&&this.Cw.m(this.Rw(o()))},this),this.aw.Xc().l(o=>{this.Tw.M()&&this.Tw.m(this.Rw(o()))},this);const r=this.aw.$t();this.Dw=new c2(r,this.aw.fb(),this.q_)}remove(){this.aw.lm().p(this),this.aw.am().p(this),this.aw.Xc().p(this),this.Dw.S(),this.aw.S(),this.Sw.clear(),this.kw.clear(),this.yw.S(),this.Cw.S(),this.Tw.S(),this.Pw.S()}resize(e,t,n){this.autoSizeActive()||this.aw._b(e,t,n)}addCustomSeries(e,t){const n=yn(e),i=Object.assign(Object.assign({},i0),n.defaultOptions());return this.Vw("Custom",i,t,n)}addAreaSeries(e){return this.Vw("Area",G_,e)}addBaselineSeries(e){return this.Vw("Baseline",Q_,e)}addBarSeries(e){return this.Vw("Bar",q_,e)}addCandlestickSeries(e={}){return function(t){t.borderColor!==void 0&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),t.wickColor!==void 0&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(e),this.Vw("Candlestick",K_,e)}addHistogramSeries(e){return this.Vw("Histogram",J_,e)}addLineSeries(e){return this.Vw("Line",X_,e)}removeSeries(e){const t=$e(this.Sw.get(e)),n=this.Pw.vd(t);this.aw.$t().vd(t),this.Ow(n),this.Sw.delete(e),this.kw.delete(t)}pw(e,t){this.Ow(this.Pw.Kb(e,t))}bw(e,t){this.Ow(this.Pw.iw(e,t))}subscribeClick(e){this.yw.l(e)}unsubscribeClick(e){this.yw.v(e)}subscribeCrosshairMove(e){this.Tw.l(e)}unsubscribeCrosshairMove(e){this.Tw.v(e)}subscribeDblClick(e){this.Cw.l(e)}unsubscribeDblClick(e){this.Cw.v(e)}priceScale(e){return new o2(this.aw,e)}timeScale(){return this.Dw}applyOptions(e){this.aw.$h(zf(e))}options(){return this.aw.W()}takeScreenshot(){return this.aw.wb()}autoSizeActive(){return this.aw.kb()}chartElement(){return this.aw.yb()}paneSize(){const e=this.aw.Tb();return{height:e.height,width:e.width}}setCrosshairPosition(e,t,n){const i=this.Sw.get(n);if(i===void 0)return;const r=this.aw.$t().dr(i);r!==null&&this.aw.$t().ad(e,t,r)}clearCrosshairPosition(){this.aw.$t().od(!0)}Vw(e,t,n={},i){h2(n.priceFormat);const r=gt(Dt(r0),Dt(t),n),o=this.aw.$t().dd(e,r,i),a=new u2(o,this,this,this,this.q_);return this.Sw.set(a,o),this.kw.set(o,a),a}Ow(e){const t=this.aw.$t();t._d(e.St.Eu,e.St.hw,e.St.lw),e.ew.forEach((n,i)=>i.J(n.$e,n.rw)),t.Wu()}Bw(e){return $e(this.kw.get(e))}Rw(e){const t=new Map;e.Nb.forEach((i,r)=>{const o=r.Qh(),a=zu(o)(i);if(o!=="Custom")gs(Wk(a));else{const l=r.Ta();gs(!l||l(a)===!1)}t.set(this.Bw(r),a)});const n=e.Eb!==void 0&&this.kw.has(e.Eb)?this.Bw(e.Eb):void 0;return{time:e.zb,logical:e.ee,point:e.Lb,hoveredSeries:n,hoveredObjectId:e.Fb,seriesData:t,sourceEvent:e.Wb}}}function f2(s,e,t){let n;if(cr(s)){const r=document.getElementById(s);gs(r!==null,`Cannot find element in DOM with id=${s}`),n=r}else n=s;const i=new d2(n,e,t);return e.setOptions(i.options()),i}function p2(s,e){return f2(s,new xf,xf.Id(e))}Object.assign(Object.assign({},r0),i0);const m2=[{label:"1m",value:"1m",minutes:1},{label:"5m",value:"5m",minutes:5},{label:"15m",value:"15m",minutes:15},{label:"1h",value:"1h",minutes:60},{label:"4h",value:"4h",minutes:240},{label:"1d",value:"1d",minutes:1440},{label:"1w",value:"1w",minutes:10080}],P0=()=>{const{selectedToken:s}=Wn(),e=_.useRef(null),t=_.useRef(null),n=_.useRef(null),[i,r]=_.useState("15m");return _.useEffect(()=>{if(!e.current)return;const o=p2(e.current,{width:e.current.clientWidth,height:500,layout:{background:{color:"#0b0f19"},textColor:"#d1d4dc"},grid:{vertLines:{color:"#1f2733"},horzLines:{color:"#1f2733"}},crosshair:{mode:1},rightPriceScale:{borderColor:"#485c7b"},timeScale:{borderColor:"#485c7b",timeVisible:!0,secondsVisible:!1,timeVisible:!0,secondsVisible:!1}}),a=o.addCandlestickSeries({upColor:"#4bffb5",downColor:"#ff4976",borderVisible:!1,borderUpColor:"#4bffb5",borderDownColor:"#ff4976",wickUpColor:"#4bffb5",wickDownColor:"#ff4976"});t.current=o,n.current=a;const l=()=>{e.current&&o.applyOptions({width:e.current.clientWidth})};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l),o.remove()}},[]),_.useEffect(()=>{(async()=>{try{const u=(await(await fetch(`https://api.binance.com/api/v3/klines?symbol=${s}&interval=${i}&limit=100`)).json()).map(c=>({time:c[0]/1e3,open:parseFloat(c[1]),high:parseFloat(c[2]),low:parseFloat(c[3]),close:parseFloat(c[4])}));n.current&&n.current.setData(u)}catch(a){console.error("Failed to fetch historical data:",a)}})()},[s,i]),_.useEffect(()=>{const o=qs.onPriceUpdate(a=>{const l=a.find(u=>u.symbol===s);if(l&&n.current){const u={time:Math.floor(Date.now()/1e3),open:l.price,high:l.price,low:l.price,close:l.price};n.current.update(u)}});return()=>o()},[s]),h.jsxs("div",{className:"bg-[#0b0f19] rounded-lg overflow-hidden",children:[h.jsx("div",{className:"p-2 border-b border-gray-700 flex items-center justify-end space-x-2",children:m2.map(({label:o,value:a})=>h.jsx("button",{onClick:()=>r(a),className:`px-3 py-1 rounded text-sm ${i===a?"bg-[#4bffb5] text-[#0b0f19] font-medium":"text-[#d1d4dc] hover:bg-[#1f2733]"}`,children:o},a))}),h.jsx("div",{ref:e,className:"w-full h-[500px]"})]})},g2=()=>{var u;const{selectedToken:s}=Wn(),[e,t]=_.useState([]),[n,i]=_.useState([]);_.useState(2);const[r,o]=_.useState(!1),[a,l]=_.useState(0);return _.useEffect(()=>{const c=qs.onOrderBookUpdate(d=>{if(d.symbol===s){const f=Date.now();f-a>=500&&(i(d.bids.slice(0,6)),t(d.asks.slice(0,6)),l(f))}});return()=>c()},[s,a]),_.useEffect(()=>{if(r){const c=setTimeout(()=>{o(!1)},5e3);return()=>clearTimeout(c)}},[r]),h.jsxs("div",{className:"h-full w-full flex flex-col bg-[#0F172A] text-xs font-mono",children:[h.jsxs("button",{className:"p-3 border-b border-gray-800 flex items-center justify-between hover:bg-gray-800 transition-colors w-full",onClick:()=>o(!r),children:[h.jsx("span",{className:"text-gray-400",children:"Order Book"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:"text-xs text-gray-400 mr-2",children:s}),r?h.jsx(oo,{size:16}):h.jsx(f_,{size:16})]})]}),h.jsxs("div",{className:`flex-1 overflow-hidden transition-all duration-300 ${r?"h-auto":"h-0"}`,children:[h.jsxs("div",{className:"grid grid-cols-2 py-2 text-gray-500 text-[11px] px-3",children:[h.jsx("div",{children:"Price (USDT)"}),h.jsx("div",{className:"text-right",children:"Total (BTC)"})]}),h.jsxs("div",{className:"flex-1",children:[e.slice().reverse().map((c,d)=>h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 right-0 bg-[#3D1C1C] z-0",style:{width:`${c.depth*100}%`}}),h.jsxs("div",{className:"grid grid-cols-2 py-1 px-3 relative z-10",children:[h.jsx("div",{className:"text-[#FF5370]",children:c.price.toFixed(1)}),h.jsx("div",{className:"text-right text-gray-300",children:c.total.toFixed(3)})]})]},`ask-${d}`)),h.jsxs("div",{className:"grid grid-cols-2 py-1.5 px-3 bg-gray-800 bg-opacity-40 text-[11px]",children:[h.jsxs("div",{className:"text-gray-400",children:["Mark ",(u=n[0])==null?void 0:u.price.toFixed(2)]}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"text-[#4CAF50]",children:"Long 57%"}),h.jsx("span",{className:"text-gray-400 mx-1",children:"|"}),h.jsx("span",{className:"text-[#FF5370]",children:"43% Short"})]})]})]}),h.jsx("div",{className:"flex-1",children:n.map((c,d)=>h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-y-0 right-0 bg-[#1C3D26] z-0",style:{width:`${c.depth*100}%`}}),h.jsxs("div",{className:"grid grid-cols-2 py-1 px-3 relative z-10",children:[h.jsx("div",{className:"text-[#4CAF50]",children:c.price.toFixed(1)}),h.jsx("div",{className:"text-right text-gray-300",children:c.total.toFixed(3)})]})]},`bid-${d}`))})]})]})},Of=[{label:"60s",value:60,seconds:60},{label:"120s",value:120,seconds:120},{label:"5min",value:300,seconds:300},{label:"10min",value:600,seconds:600}],v2=[1,2,3,5,10,20,25,50,75,100,125],y2=()=>{const{selectedToken:s,setSelectedToken:e}=Wn(),{openPosition:t,positions:n,portfolioBalance:i,closePosition:r,updateUsdtBalance:o}=ur(),[a,l]=_.useState("market"),[u,c]=_.useState("long"),[d,f]=_.useState(""),[v,p]=_.useState(""),[m,x]=_.useState(0),[g,w]=_.useState(0),[y,b]=_.useState(20),[S,k]=_.useState(Of[0]),[E,C]=_.useState(0),[$,M]=_.useState(null),[I,z]=_.useState(55.56),[O,H]=_.useState(44.44),[G,Q]=_.useState(!1),[Qe,P]=_.useState(!0),[L,D]=_.useState("positions"),[q,se]=_.useState(!1),[Pt,ot]=_.useState(""),[Xt,Je]=_.useState([]),[B,yt]=_.useState([]),wl=n.filter(T=>T.status==="open"),M0=n.filter(T=>T.status==="closed");_.useEffect(()=>{let T;if(E>0)T=setInterval(()=>{C(W=>{if(W<=1){const ue=new Date;return ue.setSeconds(ue.getSeconds()+S.seconds),M(ue),S.seconds}return W-1})},1e3);else{const W=new Date;W.setSeconds(W.getSeconds()+S.seconds),M(W),C(S.seconds)}return()=>clearInterval(T)},[S,E]),_.useEffect(()=>{const T=setInterval(()=>{const W=45+Math.random()*20;z(W),H(100-W)},3e3);return()=>clearInterval(T)},[]),_.useEffect(()=>{const T=qs.onPriceUpdate(W=>{Je(W);const ue=W.find(me=>me.symbol===s);ue&&(x(ue.price),w(ue.priceChange),B.forEach(me=>{(me.type==="long"?ue.price<=me.limitPrice:ue.price>=me.limitPrice)&&(t({symbol:me.symbol,type:me.type,entryPrice:me.limitPrice,amount:me.amount,leverage:me.leverage}),yt(xl=>xl.filter(I0=>I0.id!==me.id)))}),n.forEach(me=>{if(me.status==="open"){const xl=(me.type==="long"?ue.price-me.entryPrice:me.entryPrice-ue.price)*me.amount*me.leverage;Math.abs(xl)>=i&&r(me.id)}}))});return()=>T()},[s,n,i,r,B]);const dr=T=>T.replace("USDT",""),fr=dr(s),ih=Be[fr],R0=T=>`${T}s`,$0=T=>T?T.toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/(\d+)\/(\d+)\/(\d+),/,"$3/$1/$2"):"",L0=()=>{const T=new Date,W=new Date(T),ue=new Date($||T);return`${W.getHours().toString().padStart(2,"0")}:${W.getMinutes().toString().padStart(2,"0")}-${ue.getHours().toString().padStart(2,"0")}:${ue.getMinutes().toString().padStart(2,"0")}`},z0=T=>{b(T),Q(!1)},rh=()=>{if(!(!d||parseFloat(d)<=0)){if(i<=0){alert("Insufficient balance to open position");return}try{if(a==="market")t({symbol:s,type:u,entryPrice:m,amount:parseFloat(d),leverage:y});else if(a==="limit"&&v){const T={id:Math.random().toString(36).substring(7),symbol:s,type:u,amount:parseFloat(d),limitPrice:parseFloat(v),leverage:y};yt(W=>[...W,T])}f(""),p("")}catch(T){alert(T instanceof Error?T.message:"Failed to open position")}}},O0=T=>{yt(W=>W.filter(ue=>ue.id!==T))},D0=Xt.filter(T=>T.symbol==="USDT"?!1:T.symbol.toLowerCase().includes(Pt.toLowerCase())).sort((T,W)=>W.price*W.volume-T.price*T.volume);return h.jsxs("div",{className:"flex flex-col h-full bg-[#0F172A]",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[h.jsxs("button",{onClick:()=>se(!0),className:"flex items-center space-x-2 hover:bg-[#1E293B] p-2 rounded-lg transition-colors",children:[h.jsxs("div",{className:"flex items-center",children:[ih?h.jsx("img",{src:ih,alt:fr,className:"w-8 h-8 rounded-full mr-2"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-2",children:fr[0]}),h.jsxs("div",{children:[h.jsx("div",{className:"font-semibold",children:fr}),h.jsxs("div",{className:`text-sm ${g>=0?"text-[#22C55E]":"text-[#EF4444]"}`,children:[g>=0?"+":"",g.toFixed(2),"%"]})]})]}),h.jsx(oo,{size:20,className:"text-gray-400"})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:`text-lg ${m>=0?"text-[#22C55E]":"text-[#EF4444]"}`,children:ie(m)}),h.jsx("button",{onClick:()=>P(!Qe),children:Qe?h.jsx(Bc,{size:20}):h.jsx(Wc,{size:20})})]})]}),h.jsxs("div",{className:"p-4 border-b border-gray-800",children:[h.jsx("div",{className:"flex space-x-2 mb-4",children:Of.map(T=>h.jsx("button",{onClick:()=>{k(T),C(0)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${S.value===T.value?"bg-[#4A5568] text-white":"bg-[#2D3748] text-gray-400 hover:bg-[#374151]"}`,children:T.label},T.value))}),h.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-gray-400 mb-1",children:"Order deadline(UTC+3)"}),h.jsx("div",{className:"text-white",children:$0($)})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-[#22C55E] mb-1",children:"Countdown"}),h.jsx("div",{className:"text-[#22C55E] text-lg font-bold",children:R0(E)})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-gray-400 mb-1",children:"Time Period"}),h.jsx("div",{className:"text-white",children:L0()})]})]})]}),h.jsx("div",{className:"px-4 py-2 border-b border-gray-800",children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("button",{className:"flex items-center space-x-1 text-gray-400",children:[h.jsx("span",{children:"Line"}),h.jsx(oo,{size:16})]}),h.jsxs("button",{className:"flex items-center space-x-1 text-gray-400",children:[h.jsx("span",{children:"VOL"}),h.jsx(oo,{size:16})]})]})}),q&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md max-h-[80vh] overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-gray-800",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Select Market"}),h.jsx("button",{onClick:()=>se(!1),children:h.jsx(zn,{size:20})})]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"text",value:Pt,onChange:T=>ot(T.target.value),placeholder:"Search markets",className:"w-full bg-[#2D3748] text-white pl-10 pr-4 py-2 rounded-lg"}),h.jsx(dl,{size:20,className:"absolute left-3 top-2.5 text-gray-400"})]})]}),h.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:D0.map(T=>{const W=dr(T.symbol),ue=Be[W];return h.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-[#2D3748] transition-colors",onClick:()=>{e(T.symbol),se(!1)},children:[h.jsxs("div",{className:"flex items-center",children:[ue?h.jsx("img",{src:ue,alt:W,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:W[0]}),h.jsxs("div",{children:[h.jsxs("div",{className:"font-medium",children:[W,"/USDT"]}),h.jsx("div",{className:"text-sm text-gray-400",children:ie(T.price)})]})]}),h.jsxs("div",{className:`text-sm ${T.priceChange>=0?"text-[#22C55E]":"text-[#EF4444]"}`,children:[T.priceChange>=0?"+":"",T.priceChange.toFixed(2),"%"]})]},T.symbol)})})]})}),h.jsx("div",{className:"flex flex-1 overflow-hidden",children:h.jsx("div",{className:"flex-1 flex flex-col",children:h.jsx("div",{className:"flex-1 p-4",children:h.jsx(P0,{})})})}),h.jsxs("div",{className:"border-t border-gray-800",children:[h.jsxs("div",{className:"flex border-b border-gray-800",children:[h.jsx("button",{className:`flex-1 p-4 text-sm ${L==="positions"?"text-[#22C55E] border-b-2 border-[#22C55E]":"text-gray-400"}`,onClick:()=>D("positions"),children:"Position order"}),h.jsx("button",{className:`flex-1 p-4 text-sm ${L==="orders"?"text-[#22C55E] border-b-2 border-[#22C55E]":"text-gray-400"}`,onClick:()=>D("orders"),children:"Historical orders"}),h.jsx("button",{className:`flex-1 p-4 text-sm ${L==="history"?"text-[#22C55E] border-b-2 border-[#22C55E]":"text-gray-400"}`,onClick:()=>D("history"),children:"Invited me"}),h.jsx("button",{className:"flex-1 p-4 text-sm text-gray-400",children:"Follow"})]}),h.jsx("div",{className:"p-4",children:h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("button",{onClick:()=>{c("long"),rh()},className:"bg-[#22C55E] hover:bg-[#16A34A] text-white p-4 rounded-lg font-medium transition-colors flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(C_,{size:20,className:"mr-2"}),h.jsx("span",{children:"CALL"})]}),h.jsxs("span",{className:"text-lg font-bold",children:[I.toFixed(2),"%"]})]}),h.jsxs("button",{onClick:()=>{c("short"),rh()},className:"bg-[#EF4444] hover:bg-[#DC2626] text-white p-4 rounded-lg font-medium transition-colors flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(E_,{size:20,className:"mr-2"}),h.jsx("span",{children:"PUT"})]}),h.jsxs("span",{className:"text-lg font-bold",children:[O.toFixed(2),"%"]})]})]})}),h.jsxs("div",{className:"p-4 max-h-48 overflow-y-auto",children:[L==="positions"&&wl.map(T=>{var W;return h.jsxs("div",{className:"bg-[#1E293B] p-4 rounded-lg mb-2",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:`text-sm ${T.type==="long"?"text-[#22C55E]":"text-[#EF4444]"}`,children:T.type.toUpperCase()}),h.jsxs("span",{className:"ml-2",children:[T.leverage,"x"]})]}),h.jsx("button",{onClick:()=>r(T.id),className:"text-sm text-gray-400",children:"Close"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsx("div",{className:"text-gray-400",children:"Size"}),h.jsxs("div",{className:"text-right",children:[T.amount," ",dr(T.symbol)]}),h.jsx("div",{className:"text-gray-400",children:"Entry Price"}),h.jsx("div",{className:"text-right",children:ie(T.entryPrice)}),h.jsx("div",{className:"text-gray-400",children:"Mark Price"}),h.jsx("div",{className:"text-right",children:ie(m)}),h.jsx("div",{className:"text-gray-400",children:"PNL"}),h.jsxs("div",{className:`text-right ${T.pnl&&T.pnl>=0?"text-[#22C55E]":"text-[#EF4444]"}`,children:[ie(T.pnl||0)," (",(W=T.pnlPercent)==null?void 0:W.toFixed(2),"%)"]})]})]},T.id)}),L==="orders"&&B.map(T=>h.jsxs("div",{className:"bg-[#1E293B] p-4 rounded-lg mb-2",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:`text-sm ${T.type==="long"?"text-[#22C55E]":"text-[#EF4444]"}`,children:T.type.toUpperCase()}),h.jsxs("span",{className:"ml-2",children:[T.leverage,"x"]})]}),h.jsx("button",{onClick:()=>O0(T.id),className:"text-sm text-gray-400",children:"Cancel"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsx("div",{className:"text-gray-400",children:"Symbol"}),h.jsxs("div",{className:"text-right",children:[dr(T.symbol),"/USDT"]}),h.jsx("div",{className:"text-gray-400",children:"Amount"}),h.jsx("div",{className:"text-right",children:T.amount}),h.jsx("div",{className:"text-gray-400",children:"Limit Price"}),h.jsx("div",{className:"text-right",children:ie(T.limitPrice)}),h.jsx("div",{className:"text-gray-400",children:"Current Price"}),h.jsx("div",{className:"text-right",children:ie(m)})]})]},T.id)),L==="history"&&M0.map(T=>{var W,ue;return h.jsxs("div",{className:"bg-[#1E293B] p-4 rounded-lg mb-2",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx("span",{className:`text-sm ${T.type==="long"?"text-[#22C55E]":"text-[#EF4444]"}`,children:T.type.toUpperCase()}),h.jsxs("span",{className:"ml-2",children:[T.leverage,"x"]})]}),h.jsx("span",{className:"text-sm text-gray-400",children:(W=T.closeTime)==null?void 0:W.toLocaleTimeString()})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsx("div",{className:"text-gray-400",children:"Entry Price"}),h.jsx("div",{className:"text-right",children:ie(T.entryPrice)}),h.jsx("div",{className:"text-gray-400",children:"Close Price"}),h.jsx("div",{className:"text-right",children:ie(m)}),h.jsx("div",{className:"text-gray-400",children:"PNL"}),h.jsxs("div",{className:`text-right ${T.pnl&&T.pnl>=0?"text-[#22C55E]":"text-[#EF4444]"}`,children:[ie(T.pnl||0)," (",(ue=T.pnlPercent)==null?void 0:ue.toFixed(2),"%)"]})]})]},T.id)})]})]}),G&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-4 m-4",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold",children:"Adjust Leverage"}),h.jsx("button",{onClick:()=>Q(!1),children:h.jsx(zn,{size:20})})]}),h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("button",{onClick:()=>b(Math.max(1,y-1)),className:"p-2 bg-[#2D3748] rounded-lg",children:h.jsx(x_,{size:20})}),h.jsxs("span",{className:"text-2xl font-bold",children:[y,"x"]}),h.jsx("button",{onClick:()=>b(Math.min(125,y+1)),className:"p-2 bg-[#2D3748] rounded-lg",children:h.jsx(S_,{size:20})})]}),h.jsx("div",{className:"grid grid-cols-5 gap-2 mb-4",children:v2.map(T=>h.jsxs("button",{onClick:()=>z0(T),className:`p-2 rounded-lg text-center ${y===T?"bg-[#22C55E] text-white":"bg-[#2D3748] hover:bg-[#374151]"}`,children:[T,"x"]},T))}),h.jsx("div",{className:"text-sm text-gray-400",children:"Higher leverage means higher risk of liquidation"})]})})]})},w2=()=>{const[s,e]=_.useState(!1),[t,n]=_.useState(!1),[i,r]=_.useState(!1),[o,a]=_.useState([]),{tokenBalances:l,positions:u}=ur(),[c,d]=_.useState(0);_.useEffect(()=>{const m=new Date;m.setHours(0,0,0,0);const x=qs.onPriceUpdate(g=>{a(g);const w=u.reduce((y,b)=>{const S=b.openTime>=m,k=b.closeTime&&b.closeTime>=m;return S||k?y+(b.pnl||0):y},0);d(w)});return()=>x()},[u]);const f=m=>{var g;return m==="USDT"?1:((g=o.find(w=>w.symbol===`${m}USDT`))==null?void 0:g.price)||0},v=()=>l.reduce((m,x)=>{const g=f(x.symbol);return m+x.balance*g},0),p=[{icon:Fg,label:"Deposit",color:"text-[#22C55E]",onClick:()=>n(!0)},{icon:Bg,label:"Withdraw",color:"text-[#EF4444]",onClick:()=>r(!0)},{icon:Uc,label:"Convert",color:"text-[#3B82F6]",onClick:()=>e(!0)}];return h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:h.jsxs("div",{className:"p-4 border-b border-gray-700",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Total Assets Value"}),h.jsx("div",{className:"text-2xl font-semibold",children:ie(v())})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-gray-400",children:"Today's PNL"}),h.jsxs("div",{className:`text-lg font-semibold ${c>=0?"text-[#22C55E]":"text-[#EF4444]"}`,children:[c>=0?"+":"",ie(c)]})]})]}),h.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:p.map(({icon:m,label:x,color:g,onClick:w})=>h.jsxs("button",{onClick:w,className:"bg-[#2D3748] hover:bg-[#374151] rounded-lg p-4 transition-colors flex flex-col items-center justify-center",children:[h.jsx(m,{className:`w-6 h-6 ${g} mb-2`}),h.jsx("span",{className:"text-sm font-medium",children:x})]},x))}),h.jsx("div",{className:"space-y-3",children:l.map(m=>{const x=Be[m.symbol],g=f(m.symbol),w=m.balance*g;return h.jsx("div",{className:"bg-gray-750 rounded-md p-3",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center",children:[x?h.jsx("img",{src:x,alt:m.symbol,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:m.symbol.substring(0,1)}),h.jsxs("div",{children:[h.jsx("div",{className:"font-medium",children:m.symbol}),h.jsx("div",{className:"text-sm text-gray-400",children:m.balance.toLocaleString()})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{children:ie(w)}),h.jsx("div",{className:"text-sm text-gray-400",children:ie(g)})]})]})},m.symbol)})})]})}),h.jsx(n0,{isOpen:s,onClose:()=>e(!1),prices:o,tokenBalances:l}),h.jsx(t0,{isOpen:t,onClose:()=>n(!1)}),h.jsx(s0,{isOpen:i,onClose:()=>r(!1)})]})},x2=()=>{pg(),ar();const[s,e]=fe.useState("home"),{selectedToken:t,setSelectedToken:n}=Wn(),[i,r]=fe.useState(!1),[o,a]=fe.useState(!1),u=(v=>v.replace("USDT",""))(t),c=Be[u],d=v=>{e(v)},f=()=>{switch(s){case"home":return h.jsx(A_,{onNavigateToFutures:()=>d("futures")});case"markets":return h.jsxs("div",{className:"px-2 py-2",children:[h.jsxs("div",{className:"bg-[#1E293B] rounded-lg p-4 relative mb-4",children:[h.jsx("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>r(!i),children:h.jsxs("div",{className:"flex items-center",children:[c?h.jsx("img",{src:c,alt:u,className:"w-8 h-8 rounded-full mr-3"}):h.jsx("div",{className:"w-8 h-8 rounded-full bg-[#22C55E] flex items-center justify-center text-white mr-3",children:u.substring(0,1)}),h.jsxs("div",{children:[h.jsxs("div",{className:"font-semibold",children:[u,"/USDT"]}),h.jsx("div",{className:"text-sm text-gray-400",children:"Spot Trading"})]})]})}),i&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-[#1E293B] rounded-lg shadow-lg z-50 max-h-64 overflow-y-auto",children:h.jsx(Tu,{onSelect:v=>{n(v),r(!1)}})})]}),h.jsx(P0,{}),h.jsx(g2,{})]});case"futures":return h.jsx("div",{className:"px-2 py-2",children:h.jsx(y2,{})});case"portfolio":return h.jsx("div",{className:"px-2 py-2",children:h.jsx(w2,{})});default:return null}};return h.jsxs("div",{className:"min-h-screen flex flex-col bg-[#0F172A] text-white",children:[h.jsx(T_,{}),h.jsx("main",{className:"flex-1 overflow-auto pb-20",children:f()}),h.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-[#1E293B] border-t border-gray-800",children:h.jsxs("div",{className:"flex justify-between items-center h-16 px-4",children:[h.jsxs("button",{onClick:()=>e("home"),className:`flex flex-col items-center justify-center ${s==="home"?"text-[#22C55E]":"text-gray-400"}`,children:[h.jsx(g_,{size:20}),h.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),h.jsxs("button",{onClick:()=>e("markets"),className:`flex flex-col items-center justify-center ${s==="markets"?"text-[#22C55E]":"text-gray-400"}`,children:[h.jsx(d_,{size:20}),h.jsx("span",{className:"text-xs mt-1",children:"Markets"})]}),h.jsxs("button",{onClick:()=>e("futures"),className:`flex flex-col items-center justify-center ${s==="futures"?"text-[#22C55E]":"text-gray-400"}`,children:[h.jsx(v_,{size:20}),h.jsx("span",{className:"text-xs mt-1",children:"Futures"})]}),h.jsxs("button",{onClick:()=>e("portfolio"),className:`flex flex-col items-center justify-center ${s==="portfolio"?"text-[#22C55E]":"text-gray-400"}`,children:[h.jsx(j_,{size:20}),h.jsx("span",{className:"text-xs mt-1",children:"Assets"})]})]})}),h.jsx(Wg,{isOpen:o,onClose:()=>a(!1),initialMode:"login"})]})},b2=()=>{const{updatePassword:s,loading:e}=ar(),[t,n]=_.useState(""),[i,r]=_.useState(""),[o,a]=_.useState(!1),[l,u]=_.useState(""),[c,d]=_.useState(!1),[f,v]=_.useState(!1);_.useEffect(()=>{(async()=>{const{data:{session:x}}=await St.auth.getSession();x?v(!0):u("Invalid or expired reset link. Please request a new one.")})()},[]);const p=async m=>{if(m.preventDefault(),u(""),t!==i){u("Passwords do not match");return}if(t.length<6){u("Password must be at least 6 characters long");return}try{await s(t),await St.auth.signOut(),d(!0),setTimeout(()=>{window.location.href="/"},2e3)}catch(x){u(x.message||"Failed to update password")}};return c?h.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-[#22C55E] rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Fc,{size:32,className:"text-white"})}),h.jsx("h2",{className:"text-xl font-semibold mb-2 text-white",children:"Password Updated & Logged In!"}),h.jsx("p",{className:"text-gray-400",children:"Your password has been successfully updated and you are now logged in. Redirecting to dashboard..."})]})}):f?h.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-6",children:[h.jsx("h2",{className:"text-xl font-semibold mb-6 text-white text-center",children:"Set New Password"}),h.jsxs("form",{onSubmit:p,children:[l&&h.jsx("div",{className:"bg-red-500 bg-opacity-10 text-red-500 px-4 py-2 rounded-lg mb-4",children:l}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"New Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:o?"text":"password",value:t,onChange:m=>n(m.target.value),placeholder:"Enter your new password",className:"w-full bg-[#2D3748] text-white px-3 py-2 pr-10 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]",required:!0,minLength:6}),h.jsx("button",{type:"button",onClick:()=>a(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:o?h.jsx(Bc,{size:18}):h.jsx(Wc,{size:18})})]})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Confirm New Password"}),h.jsx("div",{className:"relative",children:h.jsx("input",{type:o?"text":"password",value:i,onChange:m=>r(m.target.value),placeholder:"Confirm your new password",className:"w-full bg-[#2D3748] text-white px-3 py-2 pr-10 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#22C55E]",required:!0,minLength:6})})]}),h.jsx("button",{type:"submit",disabled:e,className:"w-full bg-[#22C55E] hover:bg-[#16A34A] disabled:bg-gray-600 text-white py-3 rounded-lg font-medium transition-all duration-200",children:e?h.jsxs("div",{className:"flex items-center justify-center",children:[h.jsx(hl,{size:20,className:"animate-spin mr-2"}),"Updating Password..."]}):"Update Password"})]})]})}):h.jsx("div",{className:"min-h-screen bg-[#0F172A] flex items-center justify-center",children:h.jsxs("div",{className:"bg-[#1E293B] rounded-lg w-full max-w-md p-8 text-center",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-white",children:"Invalid Reset Link"}),h.jsx("p",{className:"text-gray-400 mb-6",children:"This password reset link is invalid or has expired. Please request a new one."}),h.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-[#22C55E] hover:bg-[#16A34A] text-white py-3 rounded-lg font-medium transition-all duration-200",children:"Back to Login"})]})})};function _2(){return h.jsx(D1,{children:h.jsx(a_,{children:h.jsx(A1,{children:h.jsx(u_,{children:h.jsx(j1,{children:h.jsxs(i1,{children:[h.jsx(pu,{path:"/",element:h.jsx(x2,{})}),h.jsx(pu,{path:"/reset-password",element:h.jsx(b2,{})})]})})})})})})}Gm(document.getElementById("root")).render(h.jsx(_.StrictMode,{children:h.jsx(_2,{})}));
